<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>1. MySQL Connector/J</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="java-connector"></a>1. MySQL Connector/J</h2></div></div><hr></div><div class="toc"><dl><dt><span class="section"><a href="#cj-basic-jdbc">1.1. Basic JDBC concepts</a></span></dt><dt><span class="section"><a href="#cj-installing">1.2. Installing Connector/J</a></span></dt><dt><span class="section"><a href="#cj-jdbc-reference">1.3. JDBC Reference</a></span></dt><dt><span class="section"><a href="#cj-j2ee">1.4. Using Connector/J with J2EE and Other Java Frameworks</a></span></dt><dt><span class="section"><a href="#cj-troubleshooting">1.5. Diagnosing Connector/J Problems</a></span></dt><dt><span class="section"><a href="#cj-news">1.6. MySQL Connector/J Change History</a></span></dt></dl></div><p>
    MySQL provides connectivity for client applications developed in the
    Java programming language via a JDBC driver, which is called MySQL
    Connector/J.
  </p><p>
    MySQL Connector/J is a JDBC-3.0 “<span class="quote">Type 4</span>” driver, which
    means that is pure Java, implements version 3.0 of the JDBC
    specification, and communicates directly with the MySQL server using
    the MySQL protocol.
  </p><p>
    This document is arranged for a beginning JDBC developer. If you are
    already experienced with using JDBC, you might consider starting
    with the <a href="#cj-installing" title="1.2. Installing Connector/J">Section 1.2, “Installing Connector/J”</a>.
  </p><p>
    Although JDBC is useful by itself, we would hope that if you are not
    familiar with JDBC that after reading the first few sections of this
    manual, that you would avoid using “<span class="quote">naked</span>” JDBC for all
    but the most trivial problems and consider using one of the popular
    persistence frameworks such as
    <a href="http://www.hibernate.org/" target="_top">Hibernate</a>,
    <a href="http://www.springframework.org/" target="_top">Spring's JDBC
    templates</a> or <a href="http://ibatis.apache.org/" target="_top">Ibatis
    SQL Maps</a> to do the majority of repetitive work and heavier
    lifting that is sometimes required with JDBC.
  </p><p>
    This section is not designed to be a complete JDBC tutorial. If you
    need more information about using JDBC you might be interested in
    the following online tutorials that are more in-depth than the
    information presented here:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <a href="http://java.sun.com/docs/books/tutorial/jdbc/basics/index.html" target="_top">JDBC
        Basics</a> — A tutorial from Sun covering beginner
        topics in JDBC
      </p></li><li><p>
        <a href="http://java.sun.com/developer/onlineTraining/Database/JDBCShortCourse/index.html" target="_top">JDBC
        Short Course</a> — A more in-depth tutorial from Sun
        and JGuru
      </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-basic-jdbc"></a>1.1. Basic JDBC concepts</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#cj-connect-with-drivermanager">1.1.1. Connecting to MySQL using the <code class="literal">DriverManager</code> Interface</a></span></dt><dt><span class="section"><a href="#cj-using-statements">1.1.2. Using Statements to Execute SQL</a></span></dt><dt><span class="section"><a href="#cj-using-callable-statements">1.1.3. Using <code class="literal">CallableStatements</code> to Execute Stored Procedures</a></span></dt><dt><span class="section"><a href="#cj-retrieve-autoinc">1.1.4. Retrieving <code class="literal">AUTO_INCREMENT</code> Column Values</a></span></dt></dl></div><p>
      This section provides some general JDBC background.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-connect-with-drivermanager"></a>1.1.1. Connecting to MySQL using the <code class="literal">DriverManager</code> Interface</h4></div></div></div><p>
        When you are using JDBC outside of an application server, the
        <code class="literal">DriverManager</code> class manages the establishment
        of Connections.
      </p><p>
        The <code class="literal">DriverManager</code> needs to be told which JDBC
        drivers it should try to make Connections with. The easiest way
        to do this is to use <code class="function">Class.forName()</code> on the
        class that implements the <code class="literal">java.sql.Driver</code>
        interface. With MySQL Connector/J, the name of this class is
        <code class="literal">com.mysql.jdbc.Driver</code>. With this method, you
        could use an external configuration file to supply the driver
        class name and driver parameters to use when connecting to a
        database.
      </p><p>
        The following section of Java code shows how you might register
        MySQL Connector/J from the <code class="function">main()</code> method of
        your application:
      </p><pre class="programlisting">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

// Notice, do not import com.mysql.jdbc.*
// or you will have problems!

public class LoadDriver {
    public static void main(String[] args) {
        try {
            // The newInstance() call is a work around for some
            // broken Java implementations

            Class.forName("com.mysql.jdbc.Driver").newInstance();
        } catch (Exception ex) {
            // handle the error
        }
}</pre><p>
        After the driver has been registered with the
        <code class="literal">DriverManager</code>, you can obtain a
        <code class="literal">Connection</code> instance that is connected to a
        particular database by calling
        <code class="function">DriverManager.getConnection()</code>:
      </p><div class="example"><a name="id2966834"></a><p class="title"><b>Example 1. Obtaining a Connection From the <code class="literal">DriverManager</code></b></p><p>
          This example shows how you can obtain a
          <code class="literal">Connection</code> instance from the
          <code class="literal">DriverManager</code>. There are a few different
          signatures for the <code class="function">getConnection()</code>
          method. You should see the API documentation that comes with
          your JDK for more specific information on how to use them.
        </p><pre class="programlisting">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

    ... try {
            Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/test?user=monty&amp;password=greatsqldb");

            // Do something with the Connection

           ....
        } catch (SQLException ex) {
            // handle any errors
            System.out.println("SQLException: " + ex.getMessage());
            System.out.println("SQLState: " + ex.getSQLState());
            System.out.println("VendorError: " + ex.getErrorCode());
        }
</pre><p>
          Once a <code class="classname">Connection</code> is established, it
          can be used to create <code class="classname">Statement</code> and
          <code class="classname">PreparedStatement</code> objects, as well as
          retrieve metadata about the database. This is explained in the
          following sections.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-using-statements"></a>1.1.2. Using Statements to Execute SQL</h4></div></div></div><p>
        <code class="classname">Statement</code> objects allow you to execute
        basic SQL queries and retrieve the results through the
        <code class="literal">ResultSet</code> class which is described later.
      </p><p>
        To create a <code class="classname">Statement</code> instance, you call
        the <code class="function">createStatement()</code> method on the
        <code class="literal">Connection</code> object you have retrieved via one
        of the <code class="function">DriverManager.getConnection()</code> or
        <code class="function">DataSource.getConnection()</code> methods
        described earlier.
      </p><p>
        Once you have a <code class="classname">Statement</code> instance, you
        can execute a <code class="literal">SELECT</code> query by calling the
        <code class="literal">executeQuery(String)</code> method with the SQL you
        want to use.
      </p><p>
        To update data in the database, use the
        <code class="literal">executeUpdate(String SQL)</code> method. This method
        returns the number of rows affected by the update statement.
      </p><p>
        If you don't know ahead of time whether the SQL statement will
        be a <code class="literal">SELECT</code> or an
        <code class="literal">UPDATE</code>/<code class="literal">INSERT</code>, then you
        can use the <code class="literal">execute(String SQL)</code> method. This
        method will return true if the SQL query was a
        <code class="literal">SELECT</code>, or false if it was an
        <code class="literal">UPDATE</code>, <code class="literal">INSERT</code>, or
        <code class="literal">DELETE</code> statement. If the statement was a
        <code class="literal">SELECT</code> query, you can retrieve the results by
        calling the <code class="function">getResultSet()</code> method. If the
        statement was an <code class="literal">UPDATE</code>,
        <code class="literal">INSERT</code>, or <code class="literal">DELETE</code>
        statement, you can retrieve the affected rows count by calling
        <code class="function">getUpdateCount()</code> on the
        <code class="classname">Statement</code> instance.
      </p><div class="example"><a name="id2967030"></a><p class="title"><b>Example 2. Using java.sql.Statement to Execute a SELECT Query</b></p><pre class="programlisting">// assume that conn is an already created JDBC connection
Statement stmt = null;
ResultSet rs = null;

try {
    stmt = conn.createStatement();
    rs = stmt.executeQuery("SELECT foo FROM bar");

    // or alternatively, if you don't know ahead of time that
    // the query will be a SELECT...

    if (stmt.execute("SELECT foo FROM bar")) {
        rs = stmt.getResultSet();
    }

    // Now do something with the ResultSet ....
} finally {
    // it is a good idea to release
    // resources in a finally{} block
    // in reverse-order of their creation
    // if they are no-longer needed

    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException sqlEx) { // ignore }

        rs = null;
    }

    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException sqlEx) { // ignore }

        stmt = null;
    }
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-using-callable-statements"></a>1.1.3. Using <code class="literal">CallableStatements</code> to Execute Stored Procedures</h4></div></div></div><p>
        Starting with MySQL server version 5.0 when used with
        Connector/J 3.1.1 or newer, the
        <code class="classname">java.sql.CallableStatement</code> interface is
        fully implemented with the exception of the
        <code class="function">getParameterMetaData()</code> method.
      </p><p>
        MySQL's stored procedure syntax is documented in the
        "<a href="http://www.mysql.com/doc/en/stored-procedures.html" target="_top">Stored
        Procedures and Functions</a>" section of the MySQL Reference
        Manual.
      </p><p>
        Connector/J exposes stored procedure functionality through
        JDBC's <code class="classname">CallableStatement</code> interface.
      </p><p>
        The following example shows a stored procedure that returns the
        value of <code class="varname">inOutParam</code> incremented by 1, and the
        string passed in via <code class="varname">inputParam</code> as a
        <code class="classname">ResultSet</code>:

        </p><div class="example"><a name="id2967118"></a><p class="title"><b>Example 3. Stored Procedure Example</b></p><pre class="programlisting">CREATE PROCEDURE demoSp(IN inputParam VARCHAR(255), INOUT inOutParam INT)
BEGIN
    DECLARE z INT;
    SET z = inOutParam + 1;
    SET inOutParam = z;

    SELECT inputParam;

    SELECT CONCAT('zyxw', inputParam);
END</pre></div><p>
      </p><p>
        To use the <code class="function">demoSp</code> procedure with
        Connector/J, follow these steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Prepare the callable statement by using
            <code class="function">Connection.prepareCall()</code> .
          </p><p>
            Notice that you have to use JDBC escape syntax, and that the
            parentheses surrounding the parameter placeholders are not
            optional:
          </p><div class="example"><a name="id2967160"></a><p class="title"><b>Example 4. Using <code class="function">Connection.prepareCall()</code></b></p><pre class="programlisting">import java.sql.CallableStatement;

...

    //
    // Prepare a call to the stored procedure 'demoSp'
    // with two parameters
    //
    // Notice the use of JDBC-escape syntax ({call ...})
    //

    CallableStatement cStmt = conn.prepareCall("{call demoSp(?, ?)}");



    cStmt.setString(1, "abcdefg");</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              <code class="function">Connection.prepareCall()</code> is an
              expensive method, due to the metadata retrieval that the
              driver performs to support output parameters. For
              performance reasons, you should try to minimize
              unnecessary calls to
              <code class="function">Connection.prepareCall()</code> by reusing
              <code class="classname">CallableStatement</code> instances in your
              code.
            </p></div></li><li><p>
            Register the output parameters (if any exist)
          </p><p>
            To retrieve the values of output parameters (parameters
            specified as <code class="literal">OUT</code> or
            <code class="literal">INOUT</code> when you created the stored
            procedure), JDBC requires that they be specified before
            statement execution using the various
            <code class="function">registerOutputParameter()</code> methods in
            the <code class="classname">CallableStatement</code> interface:

            </p><div class="example"><a name="id2967233"></a><p class="title"><b>Example 5. Registering Output Parameters</b></p><pre class="programlisting">import java.sql.Types;
...
//
// Connector/J supports both named and indexed
// output parameters. You can register output
// parameters using either method, as well
// as retrieve output parameters using either
// method, regardless of what method was
// used to register them.
//
// The following examples show how to use
// the various methods of registering
// output parameters (you should of course
// use only one registration per parameter).
//

//
// Registers the second parameter as output, and
// uses the type 'INTEGER' for values returned from
// getObject()
//

cStmt.registerOutParameter(2, Types.INTEGER);

//
// Registers the named parameter 'inOutParam', and
// uses the type 'INTEGER' for values returned from
// getObject()
//

cStmt.registerOutParameter("inOutParam", Types.INTEGER);
...
</pre></div><p>
          </p></li><li><p>
            Set the input parameters (if any exist)
          </p><p>
            Input and in/out parameters are set as for
            <code class="classname">PreparedStatement</code> objects. However,
            <code class="classname">CallableStatement</code> also supports
            setting parameters by name:

            </p><div class="example"><a name="id2967278"></a><p class="title"><b>Example 6. Setting <code class="literal">CallableStatement</code> Input Parameters</b></p><pre class="programlisting">...

    //
    // Set a parameter by index
    //

    cStmt.setString(1, "abcdefg");

    //
    // Alternatively, set a parameter using
    // the parameter name
    //

    cStmt.setString("inputParameter", "abcdefg");

    //
    // Set the 'in/out' parameter using an index
    //

    cStmt.setInt(2, 1);

    //
    // Alternatively, set the 'in/out' parameter
    // by name
    //

    cStmt.setInt("inOutParam", 1);

...</pre></div><p>
          </p></li><li><p>
            Execute the <code class="classname">CallableStatement</code>, and
            retrieve any result sets or output parameters.
          </p><p>
            Although <code class="classname">CallableStatement</code> supports
            calling any of the <code class="classname">Statement</code> execute
            methods (<code class="function">executeUpdate()</code>,
            <code class="function">executeQuery()</code> or
            <code class="function">execute()</code>), the most flexible method to
            call is <code class="function">execute()</code>, as you do not need
            to know ahead of time if the stored procedure returns result
            sets:

            </p><div class="example"><a name="id2967342"></a><p class="title"><b>Example 7. Retrieving Results and Output Parameter Values</b></p><pre class="programlisting">...

    boolean hadResults = cStmt.execute();

    //
    // Process all returned result sets
    //

    while (hadResults) {
        ResultSet rs = cStmt.getResultSet();

        // process result set
        ...

        hadResults = cStmt.getMoreResults();
    }

    //
    // Retrieve output parameters
    //
    // Connector/J supports both index-based and
    // name-based retrieval
    //

    int outputValue = cStmt.getInt(2); // index-based

    outputValue = cStmt.getInt("inOutParam"); // name-based

...</pre></div><p>
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-retrieve-autoinc"></a>1.1.4. Retrieving <code class="literal">AUTO_INCREMENT</code> Column Values</h4></div></div></div><p>
        Before version 3.0 of the JDBC API, there was no standard way of
        retrieving key values from databases that supported “<span class="quote">auto
        increment</span>” or identity columns. With older JDBC drivers
        for MySQL, you could always use a MySQL-specific method on the
        <code class="classname">Statement</code> interface, or issue the query
        <code class="literal">SELECT LAST_INSERT_ID()</code> after issuing an
        <code class="literal">INSERT</code> to a table that had an
        <code class="literal">AUTO_INCREMENT</code> key. Using the MySQL-specific
        method call isn't portable, and issuing a
        <code class="literal">SELECT</code> to get the
        <code class="literal">AUTO_INCREMENT</code> key's value requires another
        round-trip to the database, which isn't as efficient as
        possible. The following code snippets demonstrate the three
        different ways to retrieve <code class="literal">AUTO_INCREMENT</code>
        values. First, we demonstrate the use of the new JDBC-3.0 method
        <code class="function">getGeneratedKeys()</code> which is now the
        preferred method to use if you need to retrieve
        <code class="literal">AUTO_INCREMENT</code> keys and have access to
        JDBC-3.0. The second example shows how you can retrieve the same
        value using a standard <code class="literal">SELECT
        LAST_INSERT_ID()</code> query. The final example shows how
        updatable result sets can retrieve the
        <code class="literal">AUTO_INCREMENT</code> value when using the
        <code class="function">insertRow()</code> method.

        </p><div class="example"><a name="id2967455"></a><p class="title"><b>Example 8. Retrieving <code class="literal">AUTO_INCREMENT</code> Column Values using
            <code class="function">Statement.getGeneratedKeys()</code></b></p><pre class="programlisting">   Statement stmt = null;
   ResultSet rs = null;

   try {

    //
    // Create a Statement instance that we can use for
    // 'normal' result sets assuming you have a
    // Connection 'conn' to a MySQL database already
    // available

    stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
                                java.sql.ResultSet.CONCUR_UPDATABLE);

    //
    // Issue the DDL queries for the table for this example
    //

    stmt.executeUpdate("DROP TABLE IF EXISTS autoIncTutorial");
    stmt.executeUpdate(
            "CREATE TABLE autoIncTutorial ("
            + "priKey INT NOT NULL AUTO_INCREMENT, "
            + "dataField VARCHAR(64), PRIMARY KEY (priKey))");

    //
    // Insert one row that will generate an AUTO INCREMENT
    // key in the 'priKey' field
    //

    stmt.executeUpdate(
            "INSERT INTO autoIncTutorial (dataField) "
            + "values ('Can I Get the Auto Increment Field?')",
            Statement.RETURN_GENERATED_KEYS);

    //
    // Example of using Statement.getGeneratedKeys()
    // to retrieve the value of an auto-increment
    // value
    //

    int autoIncKeyFromApi = -1;

    rs = stmt.getGeneratedKeys();

    if (rs.next()) {
        autoIncKeyFromApi = rs.getInt(1);
    } else {

        // throw an exception from here
    }

    rs.close();

    rs = null;

    System.out.println("Key returned from getGeneratedKeys():"
        + autoIncKeyFromApi);
} finally {

    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException ex) {
            // ignore
        }
    }

    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException ex) {
            // ignore
        }
    }
}
</pre></div><p>

        </p><div class="example"><a name="id2967501"></a><p class="title"><b>Example 9. Retrieving <code class="literal">AUTO_INCREMENT</code> Column Values using
            <code class="function">SELECT LAST_INSERT_ID()</code></b></p><pre class="programlisting">   Statement stmt = null;
   ResultSet rs = null;

   try {

    //
    // Create a Statement instance that we can use for
    // 'normal' result sets.

    stmt = conn.createStatement();

    //
    // Issue the DDL queries for the table for this example
    //

    stmt.executeUpdate("DROP TABLE IF EXISTS autoIncTutorial");
    stmt.executeUpdate(
            "CREATE TABLE autoIncTutorial ("
            + "priKey INT NOT NULL AUTO_INCREMENT, "
            + "dataField VARCHAR(64), PRIMARY KEY (priKey))");

    //
    // Insert one row that will generate an AUTO INCREMENT
    // key in the 'priKey' field
    //

    stmt.executeUpdate(
            "INSERT INTO autoIncTutorial (dataField) "
            + "values ('Can I Get the Auto Increment Field?')");

    //
    // Use the MySQL LAST_INSERT_ID()
    // function to do the same thing as getGeneratedKeys()
    //

    int autoIncKeyFromFunc = -1;
    rs = stmt.executeQuery("SELECT LAST_INSERT_ID()");

    if (rs.next()) {
        autoIncKeyFromFunc = rs.getInt(1);
    } else {
        // throw an exception from here
    }

    rs.close();

    System.out.println("Key returned from " + "'SELECT LAST_INSERT_ID()': "
        + autoIncKeyFromFunc);

} finally {

    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException ex) {
            // ignore
        }
    }

    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException ex) {
            // ignore
        }
    }
}
   </pre></div><p>

        </p><div class="example"><a name="id2967543"></a><p class="title"><b>Example 10. Retrieving <code class="literal">AUTO_INCREMENT</code> Column Values in
            <code class="literal">Updatable ResultSets</code></b></p><pre class="programlisting">   Statement stmt = null;
   ResultSet rs = null;

   try {

    //
    // Create a Statement instance that we can use for
    // 'normal' result sets as well as an 'updatable'
    // one, assuming you have a Connection 'conn' to
    // a MySQL database already available
    //

    stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
                                java.sql.ResultSet.CONCUR_UPDATABLE);

    //
    // Issue the DDL queries for the table for this example
    //

    stmt.executeUpdate("DROP TABLE IF EXISTS autoIncTutorial");
    stmt.executeUpdate(
            "CREATE TABLE autoIncTutorial ("
            + "priKey INT NOT NULL AUTO_INCREMENT, "
            + "dataField VARCHAR(64), PRIMARY KEY (priKey))");

    //
    // Example of retrieving an AUTO INCREMENT key
    // from an updatable result set
    //

    rs = stmt.executeQuery("SELECT priKey, dataField "
       + "FROM autoIncTutorial");

    rs.moveToInsertRow();

    rs.updateString("dataField", "AUTO INCREMENT here?");
    rs.insertRow();

    //
    // the driver adds rows at the end
    //

    rs.last();

    //
    // We should now be on the row we just inserted
    //

    int autoIncKeyFromRS = rs.getInt("priKey");

    rs.close();

    rs = null;

    System.out.println("Key returned for inserted row: "
        + autoIncKeyFromRS);

} finally {

    if (rs != null) {
        try {
            rs.close();
        } catch (SQLException ex) {
            // ignore
        }
    }

    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException ex) {
            // ignore
        }
    }
}


   </pre></div><p>

        When you run the preceding example code, you should get the
        following output: Key returned from
        <code class="function">getGeneratedKeys()</code>: 1 Key returned from
        <code class="literal">SELECT LAST_INSERT_ID()</code>: 1 Key returned for
        inserted row: 2 You should be aware, that at times, it can be
        tricky to use the <code class="literal">SELECT LAST_INSERT_ID()</code>
        query, as that function's value is scoped to a connection. So,
        if some other query happens on the same connection, the value
        will be overwritten. On the other hand, the
        <code class="function">getGeneratedKeys()</code> method is scoped by the
        <code class="classname">Statement</code> instance, so it can be used
        even if other queries happen on the same connection, but not on
        the same <code class="classname">Statement</code> instance.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-installing"></a>1.2. Installing Connector/J</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#cj-system-requirements">1.2.1. Required Software Versions</a></span></dt><dt><span class="section"><a href="#cj-upgrading">1.2.2. Upgrading from an Older Version</a></span></dt><dt><span class="section"><a href="#cj-installing-source">1.2.3. Installing from the Development Source Tree</a></span></dt></dl></div><p>
      Use the following instructions to install Connector/J
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-system-requirements"></a>1.2.1. Required Software Versions</h4></div></div></div><p></p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="cj-supported-java-versions"></a>1.2.1.1. Java Versions Supported</h5></div></div></div><p>
          MySQL Connector/J supports Java-2 JVMs, including JDK-1.2.x,
          JDK-1.3.x, JDK-1.4.x and JDK-1.5.x, and requires JDK-1.4.x or
          newer to compile (but not run). MySQL Connector/J does not
          support JDK-1.1.x or JDK-1.0.x
        </p><p>
          Because of the implementation of
          <code class="classname">java.sql.Savepoint</code>, Connector/J 3.1.0
          and newer will not run on JDKs older than 1.4 unless the class
          verifier is turned off (<code class="option">-Xverify:none</code>), as
          the class verifier will try to load the class definition for
          <code class="classname">java.sql.Savepoint</code> even though it is
          not accessed by the driver unless you actually use savepoint
          functionality.
        </p><p>
          Caching functionality provided by Connector/J 3.1.0 or newer
          is also not available on JVMs older than 1.4.x, as it relies
          on <code class="classname">java.util.LinkedHashMap</code> which was
          first available in JDK-1.4.0.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="cj-supported-mysql-versions"></a>1.2.1.2. MySQL Server Version Guidelines</h5></div></div></div><p>
          MySQL Connector/J supports all known MySQL server versions.
          Some features (foreign keys, updatable result sets) require
          more recent versions of MySQL to operate.
        </p><p>
          When connecting to MySQL server version 4.1 or newer, it is
          best to use MySQL Connector/J version 3.1, as it has full
          support for features in the newer versions of the server,
          including Unicode characters, views, stored procedures and
          server-side prepared statements.
        </p><p>
          Although Connector/J version 3.0 will connect to MySQL server,
          version 4.1 or newer, and implements Unicode characters and
          the new authorization mechanism, Connector/J 3.0 will not be
          updated to support new features in current and future server
          versions.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="cj-classpath"></a>1.2.1.3. Installing the Driver and Configuring the <code class="literal">CLASSPATH</code></h5></div></div></div><p>
          MySQL Connector/J is distributed as a .zip or .tar.gz archive
          containing the sources, the class files a class-file only
          “<span class="quote">binary</span>” .jar archive named
          "<code class="filename">mysql-connector-java-[version]-bin.jar</code>",
          and starting with Connector/J 3.1.8 a “<span class="quote">debug</span>”
          build of the driver in a file named
          "<code class="filename">mysql-connector-java-[version]-bin-g.jar</code>".
        </p><p>
          Starting with Connector/J 3.1.9, we don't ship the .class
          files “<span class="quote">unbundled,</span>” they are only available in the
          JAR archives that ship with the driver.
        </p><p>
          You should not use the “<span class="quote">debug</span>” build of the
          driver unless instructed to do so when reporting a problem or
          bug to MySQL AB, as it is not designed to be run in production
          environments, and will have adverse performance impact when
          used. The debug binary also depends on the Aspect/J runtime
          library, which is located in the
          <code class="filename">src/lib/aspectjrt.jar</code> file that comes
          with the Connector/J distribution.
        </p><p>
          You will need to use the appropriate graphical or command-line
          utility to un-archive the distribution (for example, WinZip
          for the .zip archive, and <span><strong class="command">tar</strong></span> for the
          .tar.gz archive). Because there are potentially long filenames
          in the distribution, we use the GNU tar archive format. You
          will need to use GNU tar (or an application that understands
          the GNU tar archive format) to unpack the .tar.gz variant of
          the distribution.
        </p><p>
          Once you have extracted the distribution archive, you can
          install the driver by placing
          mysql-connector-java-[version]-bin.jar in your classpath,
          either by adding the FULL path to it to your CLASSPATH
          environment variable, or by directly specifying it with the
          command line switch -cp when starting your JVM
        </p><p>
          If you are going to use the driver with the JDBC
          DriverManager, you would use "com.mysql.jdbc.Driver" as the
          class that implements java.sql.Driver.
        </p><div class="example"><a name="id2967828"></a><p class="title"><b>Example 11. Setting the CLASSPATH Under UNIX</b></p><p>
            The following command works for 'csh' under UNIX:
          </p><pre class="screen">$ setenv CLASSPATH /path/to/mysql-connector-java-[version]-bin.jar:$CLASSPATH</pre></div><p>
          The above command can be added to the appropriate startup file
          for the login shell to make MySQL Connector/J available to all
          Java applications.
        </p><p>
          If you want to use MySQL Connector/J with an application
          server such as Tomcat or JBoss, you will have to read your
          vendor's documentation for more information on how to
          configure third-party class libraries, as most application
          servers ignore the CLASSPATH environment variable. For
          configuration examples for some J2EE application servers, see
          <a href="#cj-j2ee" title="1.4. Using Connector/J with J2EE and Other Java Frameworks">Section 1.4, “Using Connector/J with J2EE and Other Java Frameworks”</a>. However, the authoritative source
          for JDBC connection pool configuration information for your
          particular application server is the documentation for that
          application server.
        </p><p>
          If you are developing servlets or JSPs, and your application
          server is J2EE-compliant, you can put the driver's .jar file
          in the WEB-INF/lib subdirectory of your webapp, as this is a
          standard location for third party class libraries in J2EE web
          applications.
        </p><p>
          You can also use the MysqlDataSource or
          MysqlConnectionPoolDataSource classes in the
          com.mysql.jdbc.jdbc2.optional package, if your J2EE
          application server supports or requires them. Starting with
          Connector/J 5.0.0, the javax.sql.XADataSource interface is
          implemented via the
          com.mysql.jdbc.jdbc2.optional.MysqlXADataSource class, which
          supports XA distributed transactions when used in combination
          with MySQL server version 5.0.
        </p><p>
          The various MysqlDataSource classes support the following
          parameters (through standard "set" mutators):
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              user
            </p></li><li><p>
              password
            </p></li><li><p>
              serverName (see the previous section about fail-over
              hosts)
            </p></li><li><p>
              databaseName
            </p></li><li><p>
              port
            </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-upgrading"></a>1.2.2. Upgrading from an Older Version</h4></div></div></div><p>
        MySQL AB tries to keep the upgrade process as easy as possible,
        however as is the case with any software, sometimes changes need
        to be made in new versions to support new features, improve
        existing functionality, or comply with new standards.
      </p><p>
        This section has information about what users who are upgrading
        from one version of Connector/J to another (or to a new version
        of the MySQL server, with respect to JDBC functionality) should
        be aware of.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="cj-upgrading-3-0-to-3-1"></a>1.2.2.1. Upgrading from MySQL Connector/J 3.0 to 3.1</h5></div></div></div><p>
          Connector/J 3.1 is designed to be backward-compatible with
          Connector/J 3.0 as much as possible. Major changes are
          isolated to new functionality exposed in MySQL-4.1 and newer,
          which includes Unicode character sets, server-side prepared
          statements, SQLState codes returned in error messages by the
          server and various performance enhancements that can be
          enabled or disabled via configuration properties.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Unicode Character Sets — See the next section, as
              well as ???, for information on this
              new feature of MySQL. If you have something misconfigured,
              it will usually show up as an error with a message similar
              to <code class="literal">Illegal mix of collations</code>.
            </p></li><li><p>
              <span class="emphasis"><em>Server-side Prepared Statements</em></span>
              — Connector/J 3.1 will automatically detect and use
              server-side prepared statements when they are available
              (MySQL server version 4.1.0 and newer).
            </p><p>
              Starting with version 3.1.7, the driver scans SQL you are
              preparing via all variants of
              <code class="methodname">Connection.prepareStatement()</code> to
              determine if it is a supported type of statement to
              prepare on the server side, and if it is not supported by
              the server, it instead prepares it as a client-side
              emulated prepared statement. You can disable this feature
              by passing
              <span class="property">'emulateUnsupportedPstmts=false'</span> in
              your JDBC URL.
            </p><p>
              If your application encounters issues with server-side
              prepared statements, you can revert to the older
              client-side emulated prepared statement code that is still
              presently used for MySQL servers older than 4.1.0 with the
              following connection property:
            </p><p>
              <code class="computeroutput">useServerPrepStmts=false</code>
            </p></li><li><p>
              Datetimes with all-zero components ('0000-00-00 ...')
              — These values can not be represented reliably in
              Java. Connector/J 3.0.x always converted them to NULL when
              being read from a ResultSet.
            </p><p>
              Connector/J 3.1 throws an exception by default when these
              values are encountered as this is the most correct
              behavior according to the JDBC and SQL standards. This
              behavior can be modified using the '
              <span class="property">zeroDateTimeBehavior</span> ' configuration
              property. The allowable values are: 'exception' (the
              default), which throws an SQLException with an SQLState of
              'S1009', 'convertToNull', which returns NULL instead of
              the date, and 'round', which rounds the date to the
              nearest closest value which is '0001-01-01'.
            </p><p>
              Starting with Connector/J 3.1.7, ResultSet.getString() can
              be decoupled from this behavior via '
              <span class="property">noDatetimeStringSync=true</span> ' (the
              default value is 'false') so that you can get retrieve the
              unaltered all-zero value as a String. It should be noted
              that this also precludes using any time zone conversions,
              therefore the driver will not allow you to enable
              <span class="property">noDatetimeStringSync</span> and
              <span class="property">useTimezone</span> at the same time.
            </p></li><li><p>
              New SQLState Codes — Connector/J 3.1 uses SQL:1999
              SQLState codes returned by the MySQL server (if
              supported), which are different from the
              “<span class="quote">legacy</span>” X/Open state codes that Connector/J
              3.0 uses. If connected to a MySQL server older than
              MySQL-4.1.0 (the oldest version to return SQLStates as
              part of the error code), the driver will use a built-in
              mapping. You can revert to the old mapping by using the
              following configuration property:
            </p><p>
              <code class="computeroutput">useSqlStateCodes=false</code>
            </p></li><li><p>
              Calling ResultSet.getString() on a BLOB column will now
              return the address of the byte[] array that represents it,
              instead of a String representation of the BLOB. BLOBs have
              no character set, so they can't be converted to
              java.lang.Strings without data loss or corruption.
            </p><p>
              To store strings in MySQL with LOB behavior, use one of
              the TEXT types, which the driver will treat as a
              java.sql.Clob.
            </p></li><li><p>
              Starting with Connector/J 3.1.8 a “<span class="quote">debug</span>”
              build of the driver in a file named
              "<code class="filename">mysql-connector-java-[version]-bin-g.jar</code>"
              is shipped alongside the normal “<span class="quote">binary</span>” jar
              file that is named
              "<code class="filename">mysql-connector-java-[version]-bin.jar</code>".
            </p><p>
              Starting with Connector/J 3.1.9, we don't ship the .class
              files “<span class="quote">unbundled,</span>” they are only available in
              the JAR archives that ship with the driver.
            </p><p>
              You should not use the “<span class="quote">debug</span>” build of the
              driver unless instructed to do so when reporting a problem
              or bug to MySQL AB, as it is not designed to be run in
              production environments, and will have adverse performance
              impact when used. The debug binary also depends on the
              Aspect/J runtime library, which is located in the
              <code class="filename">src/lib/aspectjrt.jar</code> file that comes
              with the Connector/J distribution.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="cj-jdbc-upgrading-issues"></a>1.2.2.2. JDBC-Specific Issues When Upgrading to MySQL Server 4.1 or Newer</h5></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="emphasis"><em>Using the UTF-8 Character Encoding</em></span> -
              Prior to MySQL server version 4.1, the UTF-8 character
              encoding was not supported by the server, however the JDBC
              driver could use it, allowing storage of multiple
              character sets in latin1 tables on the server.
            </p><p>
              Starting with MySQL-4.1, this functionality is deprecated.
              If you have applications that rely on this functionality,
              and can not upgrade them to use the official Unicode
              character support in MySQL server version 4.1 or newer,
              you should add the following property to your connection
              URL:
            </p><p>
              <code class="computeroutput">useOldUTF8Behavior=true</code>
            </p></li><li><p>
              <span class="emphasis"><em>Server-side Prepared Statements</em></span> -
              Connector/J 3.1 will automatically detect and use
              server-side prepared statements when they are available
              (MySQL server version 4.1.0 and newer). If your
              application encounters issues with server-side prepared
              statements, you can revert to the older client-side
              emulated prepared statement code that is still presently
              used for MySQL servers older than 4.1.0 with the following
              connection property:
            </p><p>
              <code class="computeroutput">useServerPrepStmts=false</code>
            </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-installing-source"></a>1.2.3. Installing from the Development Source Tree</h4></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          You should read this section only if you are interested in
          helping us test our new code. If you just want to get MySQL
          Connector/J up and running on your system, you should use a
          standard release distribution.
        </p></div><p>
        To install MySQL Connector/J from the development source tree,
        make sure that you have the following prerequisites:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Subversion, to check out the sources from our repository
            (available from
            <a href="http://subversion.tigris.org/" target="_top">http://subversion.tigris.org/</a>).
          </p></li><li><p>
            Apache Ant version 1.6 or newer (available from
            <a href="http://ant.apache.org/" target="_top">http://ant.apache.org/</a>).
          </p></li><li><p>
            JDK-1.4.2 or later. Although MySQL Connector/J can be
            installed on older JDKs, to compile it from source you must
            have at least JDK-1.4.2.
          </p></li></ul></div><p>
        The Subversion source code repository for MySQL Connector/J is
        located at
        <a href="http://svn.mysql.com/svnpublic/connector-j" target="_top">http://svn.mysql.com/svnpublic/connector-j</a>. In
        general, you should not check out the entire repository because
        it contains every branch and tag for MySQL Connector/J and is
        quite large.
      </p><p>
        To check out and compile a specific branch of MySQL Connector/J,
        follow these steps:
      </p><div class="orderedlist"><ol type="1"><li><p>
            At the time of this writing, there are three active branches
            of Connector/J: <code class="literal">branch_3_0</code>,
            <code class="literal">branch_3_1</code> and
            <code class="literal">branch_5_0</code>. Check out the latest code
            from the branch that you want with the following command
            (replacing <em class="replaceable"><code>[major]</code></em> and
            <em class="replaceable"><code>[minor]</code></em> with appropriate version
            numbers):
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>svn co http://svn.mysql.com/svnpublic/connector-j/branches/branch_<em class="replaceable"><code>[major]</code></em>_<em class="replaceable"><code>[minor]</code></em>/connector-j</code></strong></pre><p>
            This creates a <code class="filename">connector-j</code> subdirectory
            in the current directory that contains the latest sources
            for the requested branch.
          </p></li><li><p>
            Change location to the <code class="filename">connector-j</code>
            directory to make it your current working directory:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd connector-j</code></strong></pre></li><li><p>
            Issue the following command to compile the driver and create
            a <code class="filename">.jar</code> file suitable for installation:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ant dist</code></strong></pre><p>
            This creates a <code class="filename">build</code> directory in the
            current directory, where all build output will go. A
            directory is created in the <code class="filename">build</code>
            directory that includes the version number of the sources
            you are building from. This directory contains the sources,
            compiled <code class="filename">.class</code> files, and a
            <code class="filename">.jar</code> file suitable for deployment. For
            other possible targets, including ones that will create a
            fully packaged distribution, issue the following command:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ant --projecthelp</code></strong></pre></li><li><p>
            A newly created <code class="filename">.jar</code> file containing
            the JDBC driver will be placed in the directory
            <code class="filename">build/mysql-connector-java-<em class="replaceable"><code>[version]</code></em></code>.
          </p><p>
            Install the newly created JDBC driver as you would a binary
            <code class="filename">.jar</code> file that you download from MySQL
            by following the instructions in
            <a href="#cj-classpath" title="1.2.1.3. Installing the Driver and Configuring the CLASSPATH">Section 1.2.1.3, “Installing the Driver and Configuring the <code class="literal">CLASSPATH</code>”</a>.
          </p></li></ol></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-jdbc-reference"></a>1.3. JDBC Reference</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#cj-configuration-properties">1.3.1. Driver/Datasource Class Names, URL Syntax and Configuration Properties for Connector/J</a></span></dt><dt><span class="section"><a href="#cj-implementation-notes">1.3.2. JDBC API Implementation Notes</a></span></dt><dt><span class="section"><a href="#cj-type-conversions">1.3.3. Java, JDBC and MySQL Types</a></span></dt><dt><span class="section"><a href="#cj-character-sets">1.3.4. Using Character Sets and Unicode</a></span></dt><dt><span class="section"><a href="#cj-using-ssl">1.3.5. Connecting Securely Using SSL</a></span></dt><dt><span class="section"><a href="#cj-replication-connection">1.3.6. Using Master/Slave Replication with ReplicationConnection</a></span></dt></dl></div><p></p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-configuration-properties"></a>1.3.1. Driver/Datasource Class Names, URL Syntax and Configuration Properties for Connector/J</h4></div></div></div><p>
        The name of the class that implements java.sql.Driver in MySQL
        Connector/J is 'com.mysql.jdbc.Driver'. The
        'org.gjt.mm.mysql.Driver' class name is also usable to remain
        backward-compatible with MM.MySQL. You should use this class
        name when registering the driver, or when otherwise configuring
        software to use MySQL Connector/J.
      </p><p>
        The JDBC URL format for MySQL Connector/J is as follows, with
        items in square brackets ([, ]) being optional:

        </p><pre class="screen">jdbc:mysql://[host][,failoverhost...][:port]/[database][?propertyName1][=propertyValue1][&amp;propertyName2][=propertyValue2]...</pre><p>
      </p><p>
        If the hostname is not specified, it defaults to '127.0.0.1'. If
        the port is not specified, it defaults to '3306', the default
        port number for MySQL servers.
      </p><pre class="screen">jdbc:mysql://[host:port],[host:port].../[database][?propertyName1][=propertyValue1][&amp;propertyName2][=propertyValue2]...</pre><p>
        If the database is not specified, the connection will be made
        with no default database. In this case, you will need to either
        call the <code class="function">setCatalog()</code> method on the
        Connection instance or fully-specify table names using the
        database name (i.e. 'SELECT dbname.tablename.colname FROM
        dbname.tablename...') in your SQL. Not specifying the database
        to use upon connection is generally only useful when building
        tools that work with multiple databases, such as GUI database
        managers.
      </p><p>
        MySQL Connector/J has fail-over support. This allows the driver
        to fail-over to any number of “<span class="quote">slave</span>” hosts and
        still perform read-only queries. Fail-over only happens when the
        connection is in an autoCommit(true) state, because fail-over
        can not happen reliably when a transaction is in progress. Most
        application servers and connection pools set autoCommit to
        'true' at the end of every transaction/connection use.
      </p><p>
        The fail-over functionality has the following behavior:
      </p><p>
        If the URL property "autoReconnect" is false: Failover only
        happens at connection initialization, and failback occurs when
        the driver determines that the first host has become available
        again.
      </p><p>
        If the URL property "autoReconnect" is true: Failover happens
        when the driver determines that the connection has failed
        (before <span class="emphasis"><em>every</em></span> query), and falls back to the
        first host when it determines that the host has become available
        again (after queriesBeforeRetryMaster queries have been issued).
      </p><p>
        In either case, whenever you are connected to a "failed-over"
        server, the connection will be set to read-only state, so
        queries that would modify data will have exceptions thrown (the
        query will <span class="emphasis"><em>never</em></span> be processed by the MySQL
        server).
      </p><p>
        Configuration properties define how Connector/J will make a
        connection to a MySQL server. Unless otherwise noted, properties
        can be set for a DataSource object or for a Connection object.
      </p><p>
        Configuration Properties can be set in one of the following
        ways:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Using the set*() methods on MySQL implementations of
            java.sql.DataSource (which is the preferred method when
            using implementations of java.sql.DataSource):
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                com.mysql.jdbc.jdbc2.optional.MysqlDataSource
              </p></li><li><p>
                com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource
              </p></li></ul></div></li><li><p>
            As a key/value pair in the java.util.Properties instance
            passed to DriverManager.getConnection() or Driver.connect()
          </p></li><li><p>
            As a JDBC URL parameter in the URL given to
            java.sql.DriverManager.getConnection(),
            java.sql.Driver.connect() or the MySQL implementations of
            javax.sql.DataSource's setURL() method.

            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                If the mechanism you use to configure a JDBC URL is
                XML-based, you will need to use the XML character
                literal &amp;amp; to separate configuration parameters,
                as the ampersand is a reserved character for XML.
              </p></div><p>
          </p></li></ul></div><p>
        The properties are listed in the following table:
      </p><div class="table"><a name="id2968876"></a><p class="title"><b>Table 1. Connection Properties</b></p><table summary="Connection Properties" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Definition</th><th>Required?</th><th>Default Value</th><th>Since Version</th></tr></thead><tbody><tr><td colspan="5"><span class="emphasis"><em>Connection/Authentication</em></span></td></tr><tr><td>user</td><td>The user to connect as</td><td>No</td><td> </td><td>all</td></tr><tr><td>password</td><td>The password to use when connecting</td><td>No</td><td> </td><td>all</td></tr><tr><td>socketFactory</td><td>The name of the class that the driver should use for creating socket
                connections to the server. This class must implement the
                interface 'com.mysql.jdbc.SocketFactory' and have public
                no-args constructor.</td><td>No</td><td>com.mysql.jdbc.StandardSocketFactory</td><td>3.0.3</td></tr><tr><td>connectTimeout</td><td>Timeout for socket connect (in milliseconds), with 0 being no timeout.
                Only works on JDK-1.4 or newer. Defaults to '0'.</td><td>No</td><td>0</td><td>3.0.1</td></tr><tr><td>socketTimeout</td><td>Timeout on network socket operations (0, the default means no timeout).</td><td>No</td><td>0</td><td>3.0.1</td></tr><tr><td>useConfigs</td><td>Load the comma-delimited list of configuration properties before parsing
                the URL or applying user-specified properties. These
                configurations are explained in the 'Configurations' of
                the documentation.</td><td>No</td><td> </td><td>3.1.5</td></tr><tr><td>interactiveClient</td><td>Set the CLIENT_INTERACTIVE flag, which tells MySQL to timeout
                connections based on INTERACTIVE_TIMEOUT instead of
                WAIT_TIMEOUT</td><td>No</td><td>false</td><td>3.1.0</td></tr><tr><td>propertiesTransform</td><td>An implementation of com.mysql.jdbc.ConnectionPropertiesTransform that
                the driver will use to modify URL properties passed to
                the driver before attempting a connection</td><td>No</td><td> </td><td>3.1.4</td></tr><tr><td>useCompression</td><td>Use zlib compression when communicating with the server (true/false)?
                Defaults to 'false'.</td><td>No</td><td>false</td><td>3.0.17</td></tr><tr><td colspan="5"><span class="emphasis"><em>High Availability and Clustering</em></span></td></tr><tr><td>autoReconnect</td><td>Should the driver try to re-establish stale and/or dead connections? If
                enabled the driver will throw an exception for a queries
                issued on a stale or dead connection, which belong to
                the current transaction, but will attempt reconnect
                before the next query issued on the connection in a new
                transaction. The use of this feature is not recommended,
                because it has side effects related to session state and
                data consistency when applications don'thandle
                SQLExceptions properly, and is only designed to be used
                when you are unable to configure your application to
                handle SQLExceptions resulting from dead andstale
                connections properly. Alternatively, investigate setting
                the MySQL server variable "wait_timeout"to some high
                value rather than the default of 8 hours.</td><td>No</td><td>false</td><td>1.1</td></tr><tr><td>autoReconnectForPools</td><td>Use a reconnection strategy appropriate for connection pools (defaults
                to 'false')</td><td>No</td><td>false</td><td>3.1.3</td></tr><tr><td>failOverReadOnly</td><td>When failing over in autoReconnect mode, should the connection be set to
                'read-only'?</td><td>No</td><td>true</td><td>3.0.12</td></tr><tr><td>reconnectAtTxEnd</td><td>If autoReconnect is set to true, should the driver attempt
                reconnectionsat the end of every transaction?</td><td>No</td><td>false</td><td>3.0.10</td></tr><tr><td>roundRobinLoadBalance</td><td>When autoReconnect is enabled, and failoverReadonly is false, should we
                pick hosts to connect to on a round-robin basis?</td><td>No</td><td>false</td><td>3.1.2</td></tr><tr><td>queriesBeforeRetryMaster</td><td>Number of queries to issue before falling back to master when failed
                over (when using multi-host failover). Whichever
                condition is met first, 'queriesBeforeRetryMaster' or
                'secondsBeforeRetryMaster' will cause an attempt to be
                made to reconnect to the master. Defaults to 50.</td><td>No</td><td>50</td><td>3.0.2</td></tr><tr><td>secondsBeforeRetryMaster</td><td>How long should the driver wait, when failed over, before attempting to
                reconnect to the master server? Whichever condition is
                met first, 'queriesBeforeRetryMaster' or
                'secondsBeforeRetryMaster' will cause an attempt to be
                made to reconnect to the master. Time in seconds,
                defaults to 30</td><td>No</td><td>30</td><td>3.0.2</td></tr><tr><td>enableDeprecatedAutoreconnect</td><td>Auto-reconnect functionality is deprecated starting with version 3.2,
                and will be removed in version 3.3. Set this property to
                'true' to disable the check for the feature being
                configured.</td><td>No</td><td>false</td><td>3.2.1</td></tr><tr><td>resourceId</td><td>A globally unique name that identifies the resource that this datasource
                or connection is connected to, used for
                XAResource.isSameRM() when the driver can't determine
                this value based on hostnames used in the URL</td><td>No</td><td> </td><td>5.0.1</td></tr><tr><td colspan="5"><span class="emphasis"><em>Security</em></span></td></tr><tr><td>allowMultiQueries</td><td>Allow the use of ';' to delimit multiple queries during one statement
                (true/false, defaults to 'false'</td><td>No</td><td>false</td><td>3.1.1</td></tr><tr><td>useSSL</td><td>Use SSL when communicating with the server (true/false), defaults to
                'false'</td><td>No</td><td>false</td><td>3.0.2</td></tr><tr><td>requireSSL</td><td>Require SSL connection if useSSL=true? (defaults to 'false').</td><td>No</td><td>false</td><td>3.1.0</td></tr><tr><td>allowUrlInLocalInfile</td><td>Should the driver allow URLs in 'LOAD DATA LOCAL INFILE' statements?</td><td>No</td><td>false</td><td>3.1.4</td></tr><tr><td>paranoid</td><td>Take measures to prevent exposure sensitive information in error
                messages and clear data structures holding sensitive
                data when possible? (defaults to 'false')</td><td>No</td><td>false</td><td>3.0.1</td></tr><tr><td colspan="5"><span class="emphasis"><em>Performance Extensions</em></span></td></tr><tr><td>metadataCacheSize</td><td>The number of queries to cacheResultSetMetadata for if
                cacheResultSetMetaData is set to 'true' (default 50)</td><td>No</td><td>50</td><td>3.1.1</td></tr><tr><td>prepStmtCacheSize</td><td>If prepared statement caching is enabled, how many prepared statements
                should be cached?</td><td>No</td><td>25</td><td>3.0.10</td></tr><tr><td>prepStmtCacheSqlLimit</td><td>If prepared statement caching is enabled, what's the largest SQL the
                driver will cache the parsing for?</td><td>No</td><td>256</td><td>3.0.10</td></tr><tr><td>useCursorFetch</td><td>If connected to MySQL &gt; 5.0.2, and setFetchSize() &gt; 0 on a
                statement, should that statement use cursor-based
                fetching to retrieve rows?</td><td>No</td><td>false</td><td>5.0.0</td></tr><tr><td>blobSendChunkSize</td><td>Chunk to use when sending BLOB/CLOBs via ServerPreparedStatements</td><td>No</td><td>1048576</td><td>3.1.9</td></tr><tr><td>cacheCallableStmts</td><td>Should the driver cache the parsing stage of CallableStatements</td><td>No</td><td>false</td><td>3.1.2</td></tr><tr><td>cachePrepStmts</td><td>Should the driver cache the parsing stage of PreparedStatements of
                client-side prepared statements, the "check" for
                suitability of server-side prepared and server-side
                prepared statements themselves?</td><td>No</td><td>false</td><td>3.0.10</td></tr><tr><td>cacheResultSetMetadata</td><td>Should the driver cache ResultSetMetaData for Statements and
                PreparedStatements? (Req. JDK-1.4+, true/false, default
                'false')</td><td>No</td><td>false</td><td>3.1.1</td></tr><tr><td>cacheServerConfiguration</td><td>Should the driver cache the results of 'SHOW VARIABLES' and 'SHOW
                COLLATION' on a per-URL basis?</td><td>No</td><td>false</td><td>3.1.5</td></tr><tr><td>defaultFetchSize</td><td>The driver will call setFetchSize(n) with this value on all
                newly-created Statements</td><td>No</td><td>0</td><td>3.1.9</td></tr><tr><td>dontTrackOpenResources</td><td>The JDBC specification requires the driver to automatically track and
                close resources, however if your application doesn't do
                a good job of explicitly calling close() on statements
                or result sets, this can cause memory leakage. Setting
                this property to true relaxes this constraint, and can
                be more memory efficient for some applications.</td><td>No</td><td>false</td><td>3.1.7</td></tr><tr><td>dynamicCalendars</td><td>Should the driver retrieve the default calendar when required, or cache
                it per connection/session?</td><td>No</td><td>false</td><td>3.1.5</td></tr><tr><td>elideSetAutoCommits</td><td>If using MySQL-4.1 or newer, should the driver only issue 'set
                autocommit=n' queries when the server's state doesn't
                match the requested state by
                Connection.setAutoCommit(boolean)?</td><td>No</td><td>false</td><td>3.1.3</td></tr><tr><td>holdResultsOpenOverStatementClose</td><td>Should the driver close result sets on Statement.close() as required by
                the JDBC specification?</td><td>No</td><td>false</td><td>3.1.7</td></tr><tr><td>locatorFetchBufferSize</td><td>If 'emulateLocators' is configured to 'true', what size buffer should be
                used when fetching BLOB data for getBinaryInputStream?</td><td>No</td><td>1048576</td><td>3.2.1</td></tr><tr><td>rewriteBatchedStatements</td><td>Should the driver use multiqueries (irregardless of the setting of
                "allowMultiQueries") as well as rewriting of prepared
                statements for INSERT into multi-value inserts when
                executeBatch() is called? Notice that this has the
                potential for SQL injection if using plain
                java.sql.Statements and your code doesn't sanitize input
                correctly. Notice that for prepared statements,
                server-side prepared statements can not currently take
                advantage of this rewrite option, and that if you don't
                specify stream lengths when using
                PreparedStatement.set*Stream(),the driver won't be able
                to determine the optimium number of parameters per batch
                and you might receive anan error from the driver that
                the resultant packet is too large.
                Statement.getGeneratedKeys() for these rewritten
                statements only works when the entire batch includes
                INSERT statements.</td><td>No</td><td>false</td><td>3.1.13</td></tr><tr><td>useFastIntParsing</td><td>Use internal String-&gt;Integer conversion routines to avoid excessive
                object creation?</td><td>No</td><td>true</td><td>3.1.4</td></tr><tr><td>useLocalSessionState</td><td>Should the driver refer to the internal values of autocommit and
                transaction isolation that are set by
                Connection.setAutoCommit() and
                Connection.setTransactionIsolation(), rather than
                querying the database?</td><td>No</td><td>false</td><td>3.1.7</td></tr><tr><td>useReadAheadInput</td><td>Use newer, optimized non-blocking, buffered input stream when reading
                from the server?</td><td>No</td><td>true</td><td>3.1.5</td></tr><tr><td colspan="5"><span class="emphasis"><em>Debuging/Profiling</em></span></td></tr><tr><td>logger</td><td>The name of a class that implements 'com.mysql.jdbc.log.Log' that will
                be used to log messages to.(default is
                'com.mysql.jdbc.log.StandardLogger', which logs to
                STDERR)</td><td>No</td><td>com.mysql.jdbc.log.StandardLogger</td><td>3.1.1</td></tr><tr><td>profileSQL</td><td>Trace queries and their execution/fetch times to the configured logger
                (true/false) defaults to 'false'</td><td>No</td><td>false</td><td>3.1.0</td></tr><tr><td>reportMetricsIntervalMillis</td><td>If 'gatherPerfMetrics' is enabled, how often should they be logged (in
                ms)?</td><td>No</td><td>30000</td><td>3.1.2</td></tr><tr><td>maxQuerySizeToLog</td><td>Controls the maximum length/size of a query that will get logged when
                profiling or tracing</td><td>No</td><td>2048</td><td>3.1.3</td></tr><tr><td>packetDebugBufferSize</td><td>The maximum number of packets to retain when 'enablePacketDebug' is true</td><td>No</td><td>20</td><td>3.1.3</td></tr><tr><td>slowQueryThresholdMillis</td><td>If 'logSlowQueries' is enabled, how long should a query (in ms) before
                it is logged as 'slow'?</td><td>No</td><td>2000</td><td>3.1.2</td></tr><tr><td>useUsageAdvisor</td><td>Should the driver issue 'usage' warnings advising proper and efficient
                usage of JDBC and MySQL Connector/J to the log
                (true/false, defaults to 'false')?</td><td>No</td><td>false</td><td>3.1.1</td></tr><tr><td>autoGenerateTestcaseScript</td><td>Should the driver dump the SQL it is executing, including server-side
                prepared statements to STDERR?</td><td>No</td><td>false</td><td>3.1.9</td></tr><tr><td>dumpMetadataOnColumnNotFound</td><td>Should the driver dump the field-level metadata of a result set into the
                exception message when ResultSet.findColumn() fails?</td><td>No</td><td>false</td><td>3.1.13</td></tr><tr><td>dumpQueriesOnException</td><td>Should the driver dump the contents of the query sent to the server in
                the message for SQLExceptions?</td><td>No</td><td>false</td><td>3.1.3</td></tr><tr><td>enablePacketDebug</td><td>When enabled, a ring-buffer of 'packetDebugBufferSize' packets will be
                kept, and dumped when exceptions are thrown in key areas
                in the driver's code</td><td>No</td><td>false</td><td>3.1.3</td></tr><tr><td>explainSlowQueries</td><td>If 'logSlowQueries' is enabled, should the driver automatically issue an
                'EXPLAIN' on the server and send the results to the
                configured log at a WARN level?</td><td>No</td><td>false</td><td>3.1.2</td></tr><tr><td>logSlowQueries</td><td>Should queries that take longer than 'slowQueryThresholdMillis' be
                logged?</td><td>No</td><td>false</td><td>3.1.2</td></tr><tr><td>traceProtocol</td><td>Should trace-level network protocol be logged?</td><td>No</td><td>false</td><td>3.1.2</td></tr><tr><td colspan="5"><span class="emphasis"><em>Miscellaneous</em></span></td></tr><tr><td>useUnicode</td><td>Should the driver use Unicode character encodings when handling strings?
                Should only be used when the driver can't determine the
                character set mapping, or you are trying to 'force' the
                driver to use a character set that MySQL either doesn't
                natively support (such as UTF-8), true/false, defaults
                to 'true'</td><td>No</td><td>true</td><td>1.1g</td></tr><tr><td>characterEncoding</td><td>If 'useUnicode' is set to true, what character encoding should the
                driver use when dealing with strings? (defaults is to
                'autodetect')</td><td>No</td><td> </td><td>1.1g</td></tr><tr><td>characterSetResults</td><td>Character set to tell the server to return results as.</td><td>No</td><td> </td><td>3.0.13</td></tr><tr><td>connectionCollation</td><td>If set, tells the server to use this collation via 'set
                collation_connection'</td><td>No</td><td> </td><td>3.0.13</td></tr><tr><td>sessionVariables</td><td>A comma-separated list of name/value pairs to be sent as SET SESSION ...
                to the server when the driver connects.</td><td>No</td><td> </td><td>3.1.8</td></tr><tr><td>allowNanAndInf</td><td>Should the driver allow NaN or +/- INF values in
                PreparedStatement.setDouble()?</td><td>No</td><td>false</td><td>3.1.5</td></tr><tr><td>autoClosePStmtStreams</td><td>Should the driver automatically call .close() on streams/readers passed
                as arguments via set*() methods?</td><td>No</td><td>false</td><td>3.1.12</td></tr><tr><td>autoDeserialize</td><td>Should the driver automatically detect and de-serialize objects stored
                in BLOB fields?</td><td>No</td><td>false</td><td>3.1.5</td></tr><tr><td>capitalizeTypeNames</td><td>Capitalize type names in DatabaseMetaData? (usually only useful when
                using WebObjects, true/false, defaults to 'false')</td><td>No</td><td>false</td><td>2.0.7</td></tr><tr><td>clobCharacterEncoding</td><td>The character encoding to use for sending and retrieving TEXT,
                MEDIUMTEXT and LONGTEXT values instead of the configured
                connection characterEncoding</td><td>No</td><td> </td><td>5.0.0</td></tr><tr><td>clobberStreamingResults</td><td>This will cause a 'streaming' ResultSet to be automatically closed, and
                any outstanding data still streaming from the server to
                be discarded if another query is executed before all the
                data has been read from the server.</td><td>No</td><td>false</td><td>3.0.9</td></tr><tr><td>continueBatchOnError</td><td>Should the driver continue processing batch commands if one statement
                fails. The JDBC spec allows either way (defaults to
                'true').</td><td>No</td><td>true</td><td>3.0.3</td></tr><tr><td>createDatabaseIfNotExist</td><td>Creates the database given in the URL if it doesn't yet exist. Assumes
                the configured user has permissions to create databases.</td><td>No</td><td>false</td><td>3.1.9</td></tr><tr><td>emptyStringsConvertToZero</td><td>Should the driver allow conversions from empty string fields to numeric
                values of '0'?</td><td>No</td><td>true</td><td>3.1.8</td></tr><tr><td>emulateLocators</td><td>N/A</td><td>No</td><td>false</td><td>3.1.0</td></tr><tr><td>emulateUnsupportedPstmts</td><td>Should the driver detect prepared statements that are not supported by
                the server, and replace them with client-side emulated
                versions?</td><td>No</td><td>true</td><td>3.1.7</td></tr><tr><td>ignoreNonTxTables</td><td>Ignore non-transactional table warning for rollback? (defaults to
                'false').</td><td>No</td><td>false</td><td>3.0.9</td></tr><tr><td>jdbcCompliantTruncation</td><td>Should the driver throw java.sql.DataTruncation exceptions when data is
                truncated as is required by the JDBC specification when
                connected to a server that supports warnings(MySQL 4.1.0
                and newer)?</td><td>No</td><td>true</td><td>3.1.2</td></tr><tr><td>maxRows</td><td>The maximum number of rows to return (0, the default means return all
                rows).</td><td>No</td><td>-1</td><td>all versions</td></tr><tr><td>noDatetimeStringSync</td><td>Don't ensure that
                ResultSet.getDatetimeType().toString().equals(ResultSet.getString())</td><td>No</td><td>false</td><td>3.1.7</td></tr><tr><td>noTimezoneConversionForTimeType</td><td>Don't convert TIME values using the server timezone if
                'useTimezone'='true'</td><td>No</td><td>false</td><td>5.0.0</td></tr><tr><td>nullCatalogMeansCurrent</td><td>When DatabaseMetadataMethods ask for a 'catalog' parameter, does the
                value null mean use the current catalog? (this is not
                JDBC-compliant, but follows legacy behavior from earlier
                versions of the driver)</td><td>No</td><td>true</td><td>3.1.8</td></tr><tr><td>nullNamePatternMatchesAll</td><td>Should DatabaseMetaData methods that accept *pattern parameters treat
                null the same as '%' (this is not JDBC-compliant,
                however older versions of the driver accepted this
                departure from the specification)</td><td>No</td><td>true</td><td>3.1.8</td></tr><tr><td>overrideSupportsIntegrityEnhancementFacility</td><td>Should the driver return "true" for
                DatabaseMetaData.supportsIntegrityEnhancementFacility()
                even if the database doesn't support it to workaround
                applications that require this method to return "true"
                to signal support of foreign keys, even though the SQL
                specification states that this facility contains much
                more than just foreign key support (one such application
                being OpenOffice)?</td><td>No</td><td>false</td><td>3.1.12</td></tr><tr><td>pedantic</td><td>Follow the JDBC spec to the letter.</td><td>No</td><td>false</td><td>3.0.0</td></tr><tr><td>processEscapeCodesForPrepStmts</td><td>Should the driver process escape codes in queries that are prepared?</td><td>No</td><td>true</td><td>3.1.12</td></tr><tr><td>relaxAutoCommit</td><td>If the version of MySQL the driver connects to does not support
                transactions, still allow calls to commit(), rollback()
                and setAutoCommit() (true/false, defaults to 'false')?</td><td>No</td><td>false</td><td>2.0.13</td></tr><tr><td>retainStatementAfterResultSetClose</td><td>Should the driver retain the Statement reference in a ResultSet after
                ResultSet.close() has been called. This is not
                JDBC-compliant after JDBC-4.0.</td><td>No</td><td>false</td><td>3.1.11</td></tr><tr><td>rollbackOnPooledClose</td><td>Should the driver issue a rollback() when the logical connection in a
                pool is closed?</td><td>No</td><td>true</td><td>3.0.15</td></tr><tr><td>runningCTS13</td><td>Enables workarounds for bugs in Sun's JDBC compliance testsuite version
                1.3</td><td>No</td><td>false</td><td>3.1.7</td></tr><tr><td>serverTimezone</td><td>Override detection/mapping of timezone. Used when timezone from server
                doesn't map to Java timezone</td><td>No</td><td> </td><td>3.0.2</td></tr><tr><td>strictFloatingPoint</td><td>Used only in older versions of compliance test</td><td>No</td><td>false</td><td>3.0.0</td></tr><tr><td>strictUpdates</td><td>Should the driver do strict checking (all primary keys selected) of
                updatable result sets (true, false, defaults to 'true')?</td><td>No</td><td>true</td><td>3.0.4</td></tr><tr><td>tinyInt1isBit</td><td>Should the driver treat the datatype TINYINT(1) as the BIT type (because
                the server silently converts BIT -&gt; TINYINT(1) when
                creating tables)?</td><td>No</td><td>true</td><td>3.0.16</td></tr><tr><td>transformedBitIsBoolean</td><td>If the driver converts TINYINT(1) to a different type, should it use
                BOOLEAN instead of BIT for future compatibility with
                MySQL-5.0, as MySQL-5.0 has a BIT type?</td><td>No</td><td>false</td><td>3.1.9</td></tr><tr><td>ultraDevHack</td><td>Create PreparedStatements for prepareCall() when required, because
                UltraDev is broken and issues a prepareCall() for _all_
                statements? (true/false, defaults to 'false')</td><td>No</td><td>false</td><td>2.0.3</td></tr><tr><td>useGmtMillisForDatetimes</td><td>Convert between session timezone and GMT before creating Date and
                Timestamp instances (value of "false" is legacy
                behavior, "true" leads to more JDBC-compliant behavior.</td><td>No</td><td>false</td><td>3.1.12</td></tr><tr><td>useHostsInPrivileges</td><td>Add '@hostname' to users in DatabaseMetaData.getColumn/TablePrivileges()
                (true/false), defaults to 'true'.</td><td>No</td><td>true</td><td>3.0.2</td></tr><tr><td>useInformationSchema</td><td>When connected to MySQL-5.0.7 or newer, should the driver use the
                INFORMATION_SCHEMA to derive information used by
                DatabaseMetaData?</td><td>No</td><td>false</td><td>5.0.0</td></tr><tr><td>useJDBCCompliantTimezoneShift</td><td>Should the driver use JDBC-compliant rules when converting
                TIME/TIMESTAMP/DATETIME values' timezone information for
                those JDBC arguments which take a java.util.Calendar
                argument? (Notice that this option is exclusive of the
                "useTimezone=true" configuration option.)</td><td>No</td><td>false</td><td>5.0.0</td></tr><tr><td>useOldUTF8Behavior</td><td>Use the UTF-8 behavior the driver did when communicating with 4.0 and
                older servers</td><td>No</td><td>false</td><td>3.1.6</td></tr><tr><td>useOnlyServerErrorMessages</td><td>Don't prepend 'standard' SQLState error messages to error messages
                returned by the server.</td><td>No</td><td>true</td><td>3.0.15</td></tr><tr><td>useServerPrepStmts</td><td>Use server-side prepared statements if the server supports them?
                (defaults to 'true').</td><td>No</td><td>true</td><td>3.1.0</td></tr><tr><td>useSqlStateCodes</td><td>Use SQL Standard state codes instead of 'legacy' X/Open/SQL state codes
                (true/false), default is 'true'</td><td>No</td><td>true</td><td>3.1.3</td></tr><tr><td>useStreamLengthsInPrepStmts</td><td>Honor stream length parameter in
                PreparedStatement/ResultSet.setXXXStream() method calls
                (true/false, defaults to 'true')?</td><td>No</td><td>true</td><td>3.0.2</td></tr><tr><td>useTimezone</td><td>Convert time/date types between client and server timezones (true/false,
                defaults to 'false')?</td><td>No</td><td>false</td><td>3.0.2</td></tr><tr><td>useUnbufferedInput</td><td>Don't use BufferedInputStream for reading data from the server</td><td>No</td><td>true</td><td>3.0.11</td></tr><tr><td>yearIsDateType</td><td>Should the JDBC driver treat the MySQL type "YEAR" as a java.sql.Date,
                or as a SHORT?</td><td>No</td><td>true</td><td>3.1.9</td></tr><tr><td>zeroDateTimeBehavior</td><td>What should happen when the driver encounters DATETIME values that are
                composed entirely of zeroes (used by MySQL to represent
                invalid dates)? Valid values are 'exception', 'round'
                and 'convertToNull'.</td><td>No</td><td>exception</td><td>3.1.4</td></tr></tbody></table></div><p>
        Connector/J also supports access to MySQL via named pipes on
        Windows NT/2000/XP using the 'NamedPipeSocketFactory' as a
        plugin-socket factory via the 'socketFactory' property. If you
        don't use a 'namedPipePath' property, the default of
        '\\.\pipe\MySQL' will be used. If you use the
        NamedPipeSocketFactory, the hostname and port number values in
        the JDBC url will be ignored.
      </p><p>
        Adding the following property to your URL will enable the
        NamedPipeSocketFactory:
      </p><p>
        socketFactory=com.mysql.jdbc.NamedPipeSocketFactory
      </p><p>
        Named pipes only work when connecting to a MySQL server on the
        same physical machine as the one the JDBC driver is being used
        on. In simple performance tests, it appears that named pipe
        access is between 30%-50% faster than the standard TCP/IP
        access.
      </p><p>
        You can create your own socket factories by following the
        example code in
        <code class="classname">com.mysql.jdbc.NamedPipeSocketFactory</code>, or
        <code class="classname">com.mysql.jdbc.StandardSocketFactory</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-implementation-notes"></a>1.3.2. JDBC API Implementation Notes</h4></div></div></div><p>
        MySQL Connector/J passes all of the tests in the
        publicly-available version of Sun's JDBC compliance test suite.
        However, in many places the JDBC specification is vague about
        how certain functionality should be implemented, or the
        specification allows leeway in implementation.
      </p><p>
        This section gives details on a interface-by-interface level
        about how certain implementation decisions may affect how you
        use MySQL Connector/J.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Blob
          </p><p>
            The Blob implementation does not allow in-place modification
            (they are 'copies', as reported by the
            DatabaseMetaData.locatorsUpdateCopies() method). Because of
            this, you should use the corresponding
            PreparedStatement.setBlob() or ResultSet.updateBlob() (in
            the case of updatable result sets) methods to save changes
            back to the database.
          </p><p>
            Starting with Connector/J version 3.1.0, you can emulate
            Blobs with locators by adding the property
            'emulateLocators=true' to your JDBC URL. You must then use a
            column alias with the value of the column set to the actual
            name of the Blob column in the SELECT that you write to
            retrieve the Blob. The SELECT must also reference only one
            table, the table must have a primary key, and the SELECT
            must cover all columns that make up the primary key. The
            driver will then delay loading the actual Blob data until
            you retrieve the Blob and call retrieval methods
            (getInputStream(), getBytes(), and so forth) on it.
          </p></li><li><p>
            CallableStatement
          </p><p>
            Starting with Connector/J 3.1.1, stored procedures are
            supported when connecting to MySQL version 5.0 or newer via
            the <code class="classname">CallableStatement</code> interface.
            Currently, the <code class="function">getParameterMetaData()</code>
            method of <code class="classname">CallableStatement</code> is not
            supported.
          </p></li><li><p>
            Clob
          </p><p>
            The Clob implementation does not allow in-place modification
            (they are 'copies', as reported by the
            DatabaseMetaData.locatorsUpdateCopies() method). Because of
            this, you should use the PreparedStatement.setClob() method
            to save changes back to the database. The JDBC API does not
            have a ResultSet.updateClob() method.
          </p></li><li><p>
            Connection
          </p><p>
            Unlike older versions of MM.MySQL the
            <code class="function">isClosed()</code> method does not
            “<span class="quote">ping</span>” the server to determine if it is alive.
            In accordance with the JDBC specification, it only returns
            true if 'closed()' has been called on the connection. If you
            need to determine if the connection is still valid, you
            should issue a simple query, such as "SELECT 1". The driver
            will throw an exception if the connection is no longer
            valid.
          </p></li><li><p>
            DatabaseMetaData
          </p><p>
            Foreign Key information (getImported/ExportedKeys() and
            getCrossReference()) is only available from 'InnoDB'-type
            tables. However, the driver uses 'SHOW CREATE TABLE' to
            retrieve this information, so when other storage engines
            support foreign keys, the driver will transparently support
            them as well.
          </p></li><li><p>
            Driver
          </p></li><li><p>
            PreparedStatement
          </p><p>
            PreparedStatements are implemented by the driver, as MySQL
            does not have a prepared statement feature. Because of this,
            the driver does not implement getParameterMetaData() or
            getMetaData() as it would require the driver to have a
            complete SQL parser in the client.
          </p><p>
            Starting with version 3.1.0 MySQL Connector/J, server-side
            prepared statements and 'binary-encoded' result sets are
            used when the server supports them.
          </p><p>
            Take care when using a server-side prepared statement with
            “<span class="quote">large</span>” parameters that are set via
            setBinaryStream(), setAsciiStream(), setUnicodeStream(),
            setBlob(), or setClob(). If you want to re-execute the
            statement with any “<span class="quote">large</span>” parameter changed to
            a non-“<span class="quote">large</span>” parameter, it is necessary to
            call clearParameters() and set all parameters again. The
            reason for this is as follows:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                The driver streams the 'large' data 'out-of-band' to the
                prepared statement on the server side when the parameter
                is set (before execution of the prepared statement).
              </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
                Once that has been done, the stream used to read the
                data on the client side is closed (as per the JDBC
                spec), and can't be read from again.
              </p></li></ul></div><div class="itemizedlist"><ul type="circle"><li><p>
                If a parameter changes from “<span class="quote">large</span>” to
                non-“<span class="quote">large,</span>” the driver must reset the
                server-side state of the prepared statement to allow the
                parameter that is being changed to take the place of the
                prior “<span class="quote">large</span>” value. This removes all of
                the 'large' data that has already been sent to the
                server, thus requiring the data to be re-sent, via the
                setBinaryStream(), setAsciiStream(), setUnicodeStream(),
                setBlob() or setClob() methods.
              </p></li></ul></div><p>
            Consequently, if you want to change the “<span class="quote">type</span>”
            of a parameter to a non-“<span class="quote">large</span>” one, you must
            call clearParameters() and set all parameters of the
            prepared statement again before it can be re-executed.
          </p></li><li><p>
            ResultSet
          </p><p>
            By default, ResultSets are completely retrieved and stored
            in memory. In most cases this is the most efficient way to
            operate, and due to the design of the MySQL network protocol
            is easier to implement. If you are working with ResultSets
            that have a large number of rows or large values, and can
            not allocate heap space in your JVM for the memory required,
            you can tell the driver to 'stream' the results back one row
            at a time.
          </p><p>
            To enable this functionality, you need to create a Statement
            instance in the following manner:
          </p><pre class="programlisting">stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
              java.sql.ResultSet.CONCUR_READ_ONLY);
stmt.setFetchSize(Integer.MIN_VALUE);</pre><p>
            The combination of a forward-only, read-only result set,
            with a fetch size of Integer.MIN_VALUE serves as a signal to
            the driver to “<span class="quote">stream</span>” result sets row-by-row.
            After this any result sets created with the statement will
            be retrieved row-by-row.
          </p><p>
            There are some caveats with this approach. You will have to
            read all of the rows in the result set (or close it) before
            you can issue any other queries on the connection, or an
            exception will be thrown.
          </p><p>
            The earliest the locks these statements hold can be released
            (whether they be <code class="literal">MyISAM</code> table-level locks
            or row-level locks in some other storage engine such as
            <code class="literal">InnoDB</code>) is when the statement completes.
          </p><p>
            If the statement is within scope of a transaction, then
            locks are released when the transaction completes (which
            implies that the statement needs to complete first). As with
            most other databases, statements are not complete until all
            the results pending on the statement are read or the active
            result set for the statement is closed.
          </p><p>
            Therefore, if using “<span class="quote">streaming</span>” results, you
            should process them as quickly as possible if you want to
            maintain concurrent access to the tables referenced by the
            statement producing the result set.
          </p></li><li><p>
            ResultSetMetaData
          </p><p>
            The "isAutoIncrement()" method only works when using MySQL
            servers 4.0 and newer.
          </p></li><li><p>
            Statement
          </p><p>
            When using versions of the JDBC driver earlier than 3.2.1,
            and connected to server versions earlier than 5.0.3, the
            "setFetchSize()" method has no effect, other than to toggle
            result set streaming as described above.
          </p><p>
            MySQL does not support SQL cursors, and the JDBC driver
            doesn't emulate them, so "setCursorName()" has no effect.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-type-conversions"></a>1.3.3. Java, JDBC and MySQL Types</h4></div></div></div><p>
        MySQL Connector/J is flexible in the way it handles conversions
        between MySQL data types and Java data types.
      </p><p>
        In general, any MySQL data type can be converted to a
        java.lang.String, and any numerical type can be converted to any
        of the Java numerical types, although round-off, overflow, or
        loss of precision may occur.
      </p><p>
        Starting with Connector/J 3.1.0, the JDBC driver will issue
        warnings or throw DataTruncation exceptions as is required by
        the JDBC specification unless the connection was configured not
        to do so by using the property "jdbcCompliantTruncation" and
        setting it to "false".
      </p><p>
        The conversions that are always guaranteed to work are listed in
        the following table:
      </p><div class="table"><a name="id2971903"></a><p class="title"><b>Table 2. Conversion Table</b></p><table summary="Conversion Table" border="1"><colgroup><col><col></colgroup><thead><tr><th>These MySQL Data Types</th><th>Can always be converted to these Java types</th></tr></thead><tbody><tr><td><span class="type">CHAR, VARCHAR, BLOB, TEXT, ENUM, and SET</span></td><td><code class="classname">java.lang.String, java.io.InputStream, java.io.Reader,
                java.sql.Blob, java.sql.Clob</code></td></tr><tr><td><span class="type">FLOAT, REAL, DOUBLE PRECISION, NUMERIC, DECIMAL, TINYINT,
                SMALLINT, MEDIUMINT, INTEGER, BIGINT</span></td><td><code class="classname">java.lang.String, java.lang.Short, java.lang.Integer,
                java.lang.Long, java.lang.Double,
                java.math.BigDecimal</code>

                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                    round-off, overflow or loss of precision may occur
                    if you choose a Java numeric data type that has less
                    precision or capacity than the MySQL data type you
                    are converting to/from.
                  </p></div></td></tr><tr><td><span class="type">DATE, TIME, DATETIME, TIMESTAMP</span></td><td><code class="classname">java.lang.String, java.sql.Date,
                java.sql.Timestamp</code></td></tr></tbody></table></div><p>
        The <code class="classname">ResultSet.getObject()</code> method uses the
        following type conversions between MySQL and Java types,
        following the JDBC specification where appropriate:
      </p><p>
        </p><div class="table"><a name="id2972241"></a><p class="title"><b>Table 3. MySQL Types to Java Types for ResultSet.getObject()</b></p><table summary="MySQL Types to Java Types for ResultSet.getObject()" border="1"><colgroup><col><col></colgroup><thead><tr><th>MySQL Type Name</th><th>Returned as Java Class</th></tr></thead><tbody><tr><td><span class="type">BIT(1)</span> (new in MySQL-5.0)</td><td><code class="classname">java.lang.Boolean</code></td></tr><tr><td><span class="type">BIT( &gt; 1)</span> (new in MySQL-5.0)</td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">TINYINT</span></td><td><code class="classname">java.lang.Boolean</code> if the configuration property
                  "tinyInt1isBit" is set to "true" (the default) and the
                  storage size is "1", or
                  <code class="classname">java.lang.Integer</code> if not.</td></tr><tr><td><span class="type">BOOL , BOOLEAN</span></td><td>See <span class="type">TINYINT</span>, above as these are aliases for
                  <span class="type">TINYINT(1)</span>, currently.</td></tr><tr><td><span class="type">SMALLINT[(M)] [UNSIGNED]</span></td><td><code class="classname">java.lang.Integer</code> (regardless if UNSIGNED or not)</td></tr><tr><td><span class="type">MEDIUMINT[(M)] [UNSIGNED]</span></td><td><code class="classname">java.lang.Integer,</code> if UNSIGNED
                  <code class="classname">java.lang.Long</code></td></tr><tr><td><span class="type">INT,INTEGER[(M)] [UNSIGNED]</span></td><td><code class="classname">java.lang.Integer</code>, if UNSIGNED
                  <code class="classname">java.lang.Long</code></td></tr><tr><td><span class="type">BIGINT[(M)] [UNSIGNED]</span></td><td><code class="classname">java.lang.Long</code>, if UNSIGNED
                  <code class="classname">java.math.BigInteger</code></td></tr><tr><td><span class="type">FLOAT[(M,D)]</span></td><td><code class="classname">java.lang.Float</code></td></tr><tr><td><span class="type">DOUBLE[(M,B)]</span></td><td><code class="classname">java.lang.Double</code></td></tr><tr><td><span class="type">DECIMAL[(M[,D])]</span></td><td><code class="classname">java.math.BigDecimal</code></td></tr><tr><td><span class="type">DATE</span></td><td><code class="classname">java.sql.Date</code></td></tr><tr><td><span class="type">DATETIME</span></td><td><code class="classname">java.sql.Timestamp</code></td></tr><tr><td><span class="type">TIMESTAMP[(M)]</span></td><td><code class="classname">java.sql.Timestamp</code></td></tr><tr><td><span class="type">TIME</span></td><td><code class="classname">java.sql.Time</code></td></tr><tr><td><span class="type">YEAR[(2|4)]</span></td><td><code class="classname">java.sql.Date</code> (with the date set two January 1st,
                  at midnight)</td></tr><tr><td><span class="type">CHAR(M)</span></td><td><code class="classname">java.lang.String</code> (unless the character set for
                  the column is <span class="type">BINARY</span>, then
                  <code class="classname">byte[]</code> is returned.</td></tr><tr><td><span class="type">VARCHAR(M) [BINARY]</span></td><td><code class="classname">java.lang.String</code> (unless the character set for
                  the column is <span class="type">BINARY</span>, then
                  <code class="classname">byte[]</code> is returned.</td></tr><tr><td><span class="type">BINARY(M)</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">VARBINARY(M)</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">TINYBLOB</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">TINYTEXT</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">BLOB</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">TEXT</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">MEDIUMBLOB</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">MEDIUMTEXT</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">LONGBLOB</span></td><td><code class="classname">byte[]</code></td></tr><tr><td><span class="type">LONGTEXT</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">ENUM('value1','value2',...)</span></td><td><code class="classname">java.lang.String</code></td></tr><tr><td><span class="type">SET('value1','value2',...)</span></td><td><code class="classname">java.lang.String</code></td></tr></tbody></table></div><p>
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-character-sets"></a>1.3.4. Using Character Sets and Unicode</h4></div></div></div><p>
        All strings sent from the JDBC driver to the server are
        converted automatically from native Java Unicode form to the
        client character encoding, including all queries sent via
        <code class="methodname">Statement.execute()</code>,
        <code class="methodname">Statement.executeUpdate()</code>,
        <code class="methodname">Statement.executeQuery()</code> as well as all

        <code class="interfacename">PreparedStatement</code>

        and

        <code class="interfacename">CallableStatement</code>

        parameters with the exclusion of parameters set using
        <code class="methodname">setBytes()</code>,
        <code class="methodname">setBinaryStream()</code>,
        <code class="methodname">setAsciiStream()</code>,
        <code class="methodname">setUnicodeStream()</code> and
        <code class="methodname">setBlob()</code> .
      </p><p>
        Prior to MySQL Server 4.1, Connector/J supported a single
        character encoding per connection, which could either be
        automatically detected from the server configuration, or could
        be configured by the user through the
        <em class="parameter"><code>"useUnicode"</code></em> and
        "<em class="parameter"><code>characterEncoding</code></em>" properties.
      </p><p>
        Starting with MySQL Server 4.1, Connector/J supports a single
        character encoding between client and server, and any number of
        character encodings for data returned by the server to the
        client in <code class="classname">ResultSets</code>.
      </p><p>
        The character encoding between client and server is
        automatically detected upon connection. The encoding used by the
        driver is specified on the server via the
        <code class="literal">character_set</code> system variable for server
        versions older than 4.1.0 and
        <code class="literal">character_set_server</code> for server versions
        4.1.0 and newer. For more information, see
        ???.
      </p><p>
        To override the automatically-detected encoding on the client
        side, use the <em class="parameter"><code>characterEncoding</code></em> property
        in the URL used to connect to the server.
      </p><p>
        When specifying character encodings on the client side,
        Java-style names should be used. The following table lists
        Java-style names for MySQL character sets:

        </p><div class="table"><a name="id2972813"></a><p class="title"><b>Table 4. MySQL to Java Encoding Name Translations</b></p><table summary="MySQL to Java Encoding Name Translations" border="1"><colgroup><col><col></colgroup><thead><tr><th>MySQL Character Set Name</th><th>Java-Style Character Encoding Name</th></tr></thead><tbody><tr><td>usa7</td><td>US-ASCII</td></tr><tr><td>big5</td><td>Big5</td></tr><tr><td>gbk</td><td>GBK</td></tr><tr><td>sjis</td><td>SJIS (or Cp932 or MS932 for MySQL Server &lt; 4.1.11)</td></tr><tr><td>cp932</td><td>Cp932 or MS932 (MySQL Server &gt; 4.1.11)</td></tr><tr><td>gb2312</td><td>EUC_CN</td></tr><tr><td>ujis</td><td>EUC_JP</td></tr><tr><td>euc_kr</td><td>EUC_KR</td></tr><tr><td>latin1</td><td>ISO8859_1</td></tr><tr><td>latin1_de</td><td>ISO8859_1</td></tr><tr><td>german1</td><td>ISO8859_1</td></tr><tr><td>danish</td><td>ISO8859_1</td></tr><tr><td>latin2</td><td>ISO8859_2</td></tr><tr><td>czech</td><td>ISO8859_2</td></tr><tr><td>hungarian</td><td>ISO8859_2</td></tr><tr><td>croat</td><td>ISO8859_2</td></tr><tr><td>greek</td><td>ISO8859_7</td></tr><tr><td>hebrew</td><td>ISO8859_8</td></tr><tr><td>latin5</td><td>ISO8859_9</td></tr><tr><td>latvian</td><td>ISO8859_13</td></tr><tr><td>latvian1</td><td>ISO8859_13</td></tr><tr><td>estonia</td><td>ISO8859_13</td></tr><tr><td>dos</td><td>Cp437</td></tr><tr><td>pclatin2</td><td>Cp852</td></tr><tr><td>cp866</td><td>Cp866</td></tr><tr><td>koi8_ru</td><td>KOI8_R</td></tr><tr><td>tis620</td><td>TIS620</td></tr><tr><td>win1250</td><td>Cp1250</td></tr><tr><td>win1250ch</td><td>Cp1250</td></tr><tr><td>win1251</td><td>Cp1251</td></tr><tr><td>cp1251</td><td>Cp1251</td></tr><tr><td>win1251ukr</td><td>Cp1251</td></tr><tr><td>cp1257</td><td>Cp1257</td></tr><tr><td>macroman</td><td>MacRoman</td></tr><tr><td>macce</td><td>MacCentralEurope</td></tr><tr><td>utf8</td><td>UTF-8</td></tr><tr><td>ucs2</td><td>UnicodeBig</td></tr></tbody></table></div><p>
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          Do not issue the query 'set names' with Connector/J, as the
          driver will not detect that the character set has changed, and
          will continue to use the character set detected during the
          initial connection setup.
        </p></div><p>
        To allow multiple character sets to be sent from the client, the
        "UTF-8" encoding should be used, either by configuring "utf8" as
        the default server character set, or by configuring the JDBC
        driver to use "UTF-8" through the
        <em class="parameter"><code>characterEncoding</code></em> property.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-using-ssl"></a>1.3.5. Connecting Securely Using SSL</h4></div></div></div><p>
        SSL in MySQL Connector/J encrypts all data (other than the
        initial handshake) between the JDBC driver and the server. The
        performance penalty for enabling SSL is an increase in query
        processing time between 35% and 50%, depending on the size of
        the query, and the amount of data it returns.
      </p><p>
        For SSL Support to work, you must have the following:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            A JDK that includes JSSE (Java Secure Sockets Extension),
            like JDK-1.4.1 or newer. SSL does not currently work with a
            JDK that you can add JSSE to, like JDK-1.2.x or JDK-1.3.x
            due to the following JSSE bug:
            <a href="http://developer.java.sun.com/developer/bugParade/bugs/4273544.html" target="_top">http://developer.java.sun.com/developer/bugParade/bugs/4273544.html</a>
          </p></li><li><p>
            A MySQL server that supports SSL and has been compiled and
            configured to do so, which is MySQL-4.0.4 or later, see:
            <a href="http://www.mysql.com/doc/en/secure-connections.html" target="_top">http://www.mysql.com/doc/en/secure-connections.html</a>
          </p></li><li><p>
            A client certificate (covered later in this section)
          </p></li></ul></div><p>
        You will first need to import the MySQL server CA Certificate
        into a Java truststore. A sample MySQL server CA Certificate is
        located in the 'SSL' subdirectory of the MySQL source
        distribution. This is what SSL will use to determine if you are
        communicating with a secure MySQL server.
      </p><p>
        To use Java's 'keytool' to create a truststore in the current
        directory , and import the server's CA certificate
        ('cacert.pem'), you can do the following (assuming that'keytool'
        is in your path. It's located in the 'bin' subdirectory of your
        JDK or JRE):
      </p><pre class="programlisting">shell&gt; keytool -import -alias mysqlServerCACert -file cacert.pem -keystore truststore
        </pre><p>
        Keytool will respond with the following information:
      </p><pre class="programlisting">Enter keystore password:  *********
Owner: EMAILADDRESS=walrus@example.com, CN=Walrus, O=MySQL AB, L=Orenburg, ST=Some
-State, C=RU
Issuer: EMAILADDRESS=walrus@example.com, CN=Walrus, O=MySQL AB, L=Orenburg, ST=Som
e-State, C=RU
Serial number: 0
Valid from: Fri Aug 02 16:55:53 CDT 2002 until: Sat Aug 02 16:55:53 CDT 2003
Certificate fingerprints:
         MD5:  61:91:A0:F2:03:07:61:7A:81:38:66:DA:19:C4:8D:AB
         SHA1: 25:77:41:05:D5:AD:99:8C:14:8C:CA:68:9C:2F:B8:89:C3:34:4D:6C
Trust this certificate? [no]:  yes
Certificate was added to keystore</pre><p>
        You will then need to generate a client certificate, so that the
        MySQL server knows that it is talking to a secure client:
      </p><pre class="programlisting"> shell&gt; keytool -genkey -keyalg rsa -alias mysqlClientCertificate -keystore keystore </pre><p>
        Keytool will prompt you for the following information, and
        create a keystore named 'keystore' in the current directory.
      </p><p>
        You should respond with information that is appropriate for your
        situation:
      </p><pre class="programlisting">Enter keystore password:  *********
What is your first and last name?
  [Unknown]:  Matthews
What is the name of your organizational unit?
  [Unknown]:  Software Development
What is the name of your organization?
  [Unknown]:  MySQL AB
What is the name of your City or Locality?
  [Unknown]:  Flossmoor
What is the name of your State or Province?
  [Unknown]:  IL
What is the two-letter country code for this unit?
  [Unknown]:  US
Is &lt;CN=Matthews, OU=Software Development, O=MySQL AB,
 L=Flossmoor, ST=IL, C=US&gt; correct?
  [no]:  y

Enter key password for &lt;mysqlClientCertificate&gt;
        (RETURN if same as keystore password):</pre><p>
        Finally, to get JSSE to use the keystore and truststore that you
        have generated, you need to set the following system properties
        when you start your JVM, replacing 'path_to_keystore_file' with
        the full path to the keystore file you created,
        'path_to_truststore_file' with the path to the truststore file
        you created, and using the appropriate password values for each
        property.
      </p><pre class="programlisting">-Djavax.net.ssl.keyStore=path_to_keystore_file
-Djavax.net.ssl.keyStorePassword=*********
-Djavax.net.ssl.trustStore=path_to_truststore_file
-Djavax.net.ssl.trustStorePassword=********* </pre><p>
        You will also need to set 'useSSL' to 'true' in your connection
        parameters for MySQL Connector/J, either by adding 'useSSL=true'
        to your URL, or by setting the property 'useSSL' to 'true' in
        the java.util.Properties instance you pass to
        DriverManager.getConnection().
      </p><p>
        You can test that SSL is working by turning on JSSE debugging
        (as detailed below), and look for the following key events:
      </p><pre class="programlisting">...
 *** ClientHello, v3.1
 RandomCookie:  GMT: 1018531834 bytes = { 199, 148, 180, 215, 74, 12, 54, 244, 0, 168, 55, 103, 215, 64, 16, 138, 225, 190, 132, 153, 2, 217, 219, 239, 202, 19, 121, 78 }
 Session ID:  {}
 Cipher Suites:  { 0, 5, 0, 4, 0, 9, 0, 10, 0, 18, 0, 19, 0, 3, 0, 17 }
 Compression Methods:  { 0 }
 ***
 [write] MD5 and SHA1 hashes:  len = 59
 0000: 01 00 00 37 03 01 3D B6   90 FA C7 94 B4 D7 4A 0C  ...7..=.......J.
 0010: 36 F4 00 A8 37 67 D7 40   10 8A E1 BE 84 99 02 D9  6...7g.@........
 0020: DB EF CA 13 79 4E 00 00   10 00 05 00 04 00 09 00  ....yN..........
 0030: 0A 00 12 00 13 00 03 00   11 01 00                 ...........
 main, WRITE:  SSL v3.1 Handshake, length = 59
 main, READ:  SSL v3.1 Handshake, length = 74
 *** ServerHello, v3.1
 RandomCookie:  GMT: 1018577560 bytes = { 116, 50, 4, 103, 25, 100, 58, 202, 79, 185, 178, 100, 215, 66, 254, 21, 83, 187, 190, 42, 170, 3, 132, 110, 82, 148, 160, 92 }
 Session ID:  {163, 227, 84, 53, 81, 127, 252, 254, 178, 179, 68, 63, 182, 158, 30, 11, 150, 79, 170, 76, 255, 92, 15, 226, 24, 17, 177, 219, 158, 177, 187, 143}
 Cipher Suite:  { 0, 5 }
 Compression Method: 0
 ***
 %% Created:  [Session-1, SSL_RSA_WITH_RC4_128_SHA]
 ** SSL_RSA_WITH_RC4_128_SHA
 [read] MD5 and SHA1 hashes:  len = 74
 0000: 02 00 00 46 03 01 3D B6   43 98 74 32 04 67 19 64  ...F..=.C.t2.g.d
 0010: 3A CA 4F B9 B2 64 D7 42   FE 15 53 BB BE 2A AA 03  :.O..d.B..S..*..
 0020: 84 6E 52 94 A0 5C 20 A3   E3 54 35 51 7F FC FE B2  .nR..\ ..T5Q....
 0030: B3 44 3F B6 9E 1E 0B 96   4F AA 4C FF 5C 0F E2 18  .D?.....O.L.\...
 0040: 11 B1 DB 9E B1 BB 8F 00   05 00                    ..........
 main, READ:  SSL v3.1 Handshake, length = 1712
 ...</pre><p>
        JSSE provides debugging (to STDOUT) when you set the following
        system property: -Djavax.net.debug=all This will tell you what
        keystores and truststores are being used, as well as what is
        going on during the SSL handshake and certificate exchange. It
        will be helpful when trying to determine what is not working
        when trying to get an SSL connection to happen.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-replication-connection"></a>1.3.6. Using Master/Slave Replication with ReplicationConnection</h4></div></div></div><p>
        Starting with Connector/J 3.1.7, we've made available a variant
        of the driver that will automatically send queries to a
        read/write master, or a failover or round-robin loadbalanced set
        of slaves based on the state of
        <code class="function">Connection.getReadOnly()</code> .
      </p><p>
        An application signals that it wants a transaction to be
        read-only by calling
        <code class="function">Connection.setReadOnly(true)</code>, this
        “<span class="quote">replication-aware</span>” connection will use one of the
        slave connections, which are load-balanced per-vm using a
        round-robin scheme (a given connection is “<span class="quote">sticky</span>”
        to a slave unless that slave is removed from service). If you
        have a write transaction, or if you have a read that is
        “<span class="quote">time-sensitive</span>” (remember, replication in MySQL is
        asynchronous), set the connection to be not read-only, by
        calling <code class="function">Connection.setReadOnly(false)</code> and
        the driver will ensure that further calls are sent to the
        “<span class="quote">master</span>” MySQL server. The driver takes care of
        propagating the current state of autocommit, isolation level,
        and catalog between all of the connections that it uses to
        accomplish this load balancing functionality.
      </p><p>
        To enable this functionality, use the "
        <code class="function">com.mysql.jdbc.ReplicationDriver</code> " class
        when configuring your application server's connection pool or
        when creating an instance of a JDBC driver for your standalone
        application. Because it accepts the same URL format as the
        standard MySQL JDBC driver,
        <code class="function">ReplicationDriver</code> does not currently work
        with <code class="function">java.sql.DriverManager</code> -based
        connection creation unless it is the only MySQL JDBC driver
        registered with the <code class="function">DriverManager</code> .
      </p><p>
        Here is a short, simple example of how ReplicationDriver might
        be used in a standalone application.
      </p><a name="cj-using-replication-driver-example"></a><pre class="programlisting">import java.sql.Connection;
import java.sql.ResultSet;
import java.util.Properties;

import com.mysql.jdbc.ReplicationDriver;

public class ReplicationDriverDemo {

    public static void main(String[] args) throws Exception {
        ReplicationDriver driver = new ReplicationDriver();

        Properties props = new Properties();

        // We want this for failover on the slaves
        props.put("autoReconnect", "true");

        // We want to load balance between the slaves
        props.put("roundRobinLoadBalance", "true");

        props.put("user", "foo");
        props.put("password", "bar");

        //
        // Looks like a normal MySQL JDBC url, with a comma-separated list
        // of hosts, the first being the 'master', the rest being any number
        // of slaves that the driver will load balance against
        //

        Connection conn =
            driver.connect("jdbc:mysql://master,slave1,slave2,slave3/test",
                props);

        //
        // Perform read/write work on the master
        // by setting the read-only flag to "false"
        //

        conn.setReadOnly(false);
        conn.setAutoCommit(false);
        conn.createStatement().executeUpdate("UPDATE some_table ....");
        conn.commit();

        //
        // Now, do a query from a slave, the driver automatically picks one
        // from the list
        //

        conn.setReadOnly(true);

        ResultSet rs = conn.createStatement().executeQuery("SELECT a,b,c FROM some_other_table");

         .......
    }
}
</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-j2ee"></a>1.4. Using Connector/J with J2EE and Other Java Frameworks</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#cj-general-j2ee-concepts">1.4.1. General J2EE Concepts</a></span></dt><dt><span class="section"><a href="#cj-tomcat-config">1.4.2. Using Connector/J with Tomcat</a></span></dt><dt><span class="section"><a href="#cj-jboss-config">1.4.3. Using Connector/J with JBoss</a></span></dt></dl></div><p>
      This section describes how to use Connector/J in several contexts.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-general-j2ee-concepts"></a>1.4.1. General J2EE Concepts</h4></div></div></div><p>
        This section provides general background on J2EE concepts that
        pertain to use of Connector/J.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="cj-connection-pooling"></a>1.4.1.1. Understanding Connection Pooling</h5></div></div></div><p>
          Connection pooling is a technique of creating and managing a
          pool of connections that are ready for use by any thread that
          needs them.
        </p><p>
          This technique of “<span class="quote">pooling</span>” connections is based
          on the fact that most applications only need a thread to have
          access to a JDBC connection when they are actively processing
          a transaction, which usually take only milliseconds to
          complete. When not processing a transaction, the connection
          would otherwise sit idle. Instead, connection pooling allows
          the idle connection to be used by some other thread to do
          useful work.
        </p><p>
          In practice, when a thread needs to do work against a MySQL or
          other database with JDBC, it requests a connection from the
          pool. When the thread is finished using the connection, it
          returns it to the pool, so that it may be used by any other
          threads that want to use it.
        </p><p>
          When the connection is “<span class="quote">loaned out</span>” from the
          pool, it is used exclusively by the thread that requested it.
          From a programming point of view, it is the same as if your
          thread called DriverManager.getConnection() every time it
          needed a JDBC connection, however with connection pooling,
          your thread may end up using either a new, or already-existing
          connection.
        </p><p>
          Connection pooling can greatly increase the performance of
          your Java application, while reducing overall resource usage.
          The main benefits to connection pooling are:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Reduced connection creation time
            </p><p>
              Although this is not usually an issue with the quick
              connection setup that MySQL offers compared to other
              databases, creating new JDBC connections still incurs
              networking and JDBC driver overhead that will be avoided
              if connections are “<span class="quote">recycled.</span>”
            </p></li><li><p>
              Simplified programming model
            </p><p>
              When using connection pooling, each individual thread can
              act as though it has created its own JDBC connection,
              allowing you to use straight-forward JDBC programming
              techniques.
            </p></li><li><p>
              Controlled resource usage
            </p><p>
              If you don't use connection pooling, and instead create a
              new connection every time a thread needs one, your
              application's resource usage can be quite wasteful and
              lead to unpredictable behavior under load.
            </p></li></ul></div><p>
          Remember that each connection to MySQL has overhead (memory,
          CPU, context switches, and so forth) on both the client and
          server side. Every connection limits how many resources there
          are available to your application as well as the MySQL server.
          Many of these resources will be used whether or not the
          connection is actually doing any useful work!
        </p><p>
          Connection pools can be tuned to maximize performance, while
          keeping resource utilization below the point where your
          application will start to fail rather than just run slower.
        </p><p>
          Luckily, Sun has standardized the concept of connection
          pooling in JDBC through the JDBC-2.0 "Optional" interfaces,
          and all major application servers have implementations of
          these APIs that work fine with MySQL Connector/J.
        </p><p>
          Generally, you configure a connection pool in your application
          server configuration files, and access it via the Java Naming
          and Directory Interface (JNDI). The following code shows how
          you might use a connection pool from an application deployed
          in a J2EE application server:

          </p><div class="example"><a name="id2973769"></a><p class="title"><b>Example 12. Using a Connection Pool with a J2EE Application Server</b></p><pre class="programlisting">import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Statement;

import javax.naming.InitialContext;
import javax.sql.DataSource;


public class MyServletJspOrEjb {

    public void doSomething() throws Exception {
        /*
         * Create a JNDI Initial context to be able to
         *  lookup  the DataSource
         *
         * In production-level code, this should be cached as
         * an instance or static variable, as it can
         * be quite expensive to create a JNDI context.
         *
         * Note: This code only works when you are using servlets
         * or EJBs in a J2EE application server. If you are
         * using connection pooling in standalone Java code, you
         * will have to create/configure datasources using whatever
         * mechanisms your particular connection pooling library
         * provides.
         */

        InitialContext ctx = new InitialContext();

         /*
          * Lookup the DataSource, which will be backed by a pool
          * that the application server provides. DataSource instances
          * are also a good candidate for caching as an instance
          * variable, as JNDI lookups can be expensive as well.
          */

        DataSource ds = (DataSource)ctx.lookup("java:comp/env/jdbc/MySQLDB");

        /*
         * The following code is what would actually be in your
         * Servlet, JSP or EJB 'service' method...where you need
         * to work with a JDBC connection.
         */

        Connection conn = null;
        Statement stmt = null;

        try {
            conn = ds.getConnection();

            /*
             * Now, use normal JDBC programming to work with
             * MySQL, making sure to close each resource when you're
             * finished with it, which allows the connection pool
             * resources to be recovered as quickly as possible
             */

            stmt = conn.createStatement();
            stmt.execute("SOME SQL QUERY");

            stmt.close();
            stmt = null;

            conn.close();
            conn = null;
        } finally {
            /*
             * close any jdbc instances here that weren't
             * explicitly closed during normal code path, so
             * that we don't 'leak' resources...
             */

            if (stmt != null) {
                try {
                    stmt.close();
                } catch (sqlexception sqlex) {
                    // ignore -- as we can't do anything about it here
                }

                stmt = null;
            }

            if (conn != null) {
                try {
                    conn.close();
                } catch (sqlexception sqlex) {
                    // ignore -- as we can't do anything about it here
                }

                conn = null;
            }
        }
    }
}</pre></div><p>

          As shown in the example above, after obtaining the JNDI
          InitialContext, and looking up the DataSource, the rest of the
          code should look familiar to anyone who has done JDBC
          programming in the past.
        </p><p>
          The most important thing to remember when using connection
          pooling is to make sure that no matter what happens in your
          code (exceptions, flow-of-control, and so forth), connections,
          and anything created by them (such as statements or result
          sets) are closed, so that they may be re-used, otherwise they
          will be “<span class="quote">stranded,</span>” which in the best case means
          that the MySQL server resources they represent (such as
          buffers, locks, or sockets) may be tied up for some time, or
          worst case, may be tied up forever.
        </p><p>
          What's the Best Size for my Connection Pool?
        </p><p>
          As with all other configuration rules-of-thumb, the answer is
          “<span class="quote">It depends.</span>” Although the optimal size depends
          on anticipated load and average database transaction time, the
          optimum connection pool size is smaller than you might expect.
          If you take Sun's Java Petstore blueprint application for
          example, a connection pool of 15-20 connections can serve a
          relatively moderate load (600 concurrent users) using MySQL
          and Tomcat with response times that are acceptable.
        </p><p>
          To correctly size a connection pool for your application, you
          should create load test scripts with tools such as Apache
          JMeter or The Grinder, and load test your application.
        </p><p>
          An easy way to determine a starting point is to configure your
          connection pool's maximum number of connections to be
          “<span class="quote">unbounded,</span>” run a load test, and measure the
          largest amount of concurrently used connections. You can then
          work backward from there to determine what values of minimum
          and maximum pooled connections give the best performance for
          your particular application.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-tomcat-config"></a>1.4.2. Using Connector/J with Tomcat</h4></div></div></div><p>
        The following instructions are based on the instructions for
        Tomcat-5.x, available at
        <a href="http://jakarta.apache.org/tomcat/tomcat-5.0-doc/jndi-datasource-examples-howto.html" target="_top">http://jakarta.apache.org/tomcat/tomcat-5.0-doc/jndi-datasource-examples-howto.html</a>
        which is current at the time this document was written.
      </p><p>
        First, install the .jar file that comes with Connector/J in
        <code class="filename">$CATALINA_HOME/common/lib</code> so that it is
        available to all applications installed in the container.
      </p><p>
        Next, Configure the JNDI DataSource by adding a declaration
        resource to <code class="filename">$CATALINA_HOME/conf/server.xml</code>
        in the context that defines your web application:
      </p><pre class="programlisting">&lt;Context ....&gt;

  ...

  &lt;Resource name="jdbc/MySQLDB"
               auth="Container"
               type="javax.sql.DataSource"/&gt;

  &lt;!-- The name you used above, must match _exactly_ here!

       The connection pool will be bound into JNDI with the name
       "java:/comp/env/jdbc/MySQLDB"
  --&gt;

  &lt;ResourceParams name="jdbc/MySQLDB"&gt;
    &lt;parameter&gt;
      &lt;name&gt;factory&lt;/name&gt;
      &lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Don't set this any higher than max_connections on your
         MySQL server, usually this should be a 10 or a few 10's
         of connections, not hundreds or thousands --&gt;

    &lt;parameter&gt;
      &lt;name&gt;maxActive&lt;/name&gt;
      &lt;value&gt;10&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- You don't want to many idle connections hanging around
         if you can avoid it, only enough to soak up a spike in
         the load --&gt;

    &lt;parameter&gt;
      &lt;name&gt;maxIdle&lt;/name&gt;
      &lt;value&gt;5&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Don't use autoReconnect=true, it's going away eventually
         and it's a crutch for older connection pools that couldn't
         test connections. You need to decide whether your application is
         supposed to deal with SQLExceptions (hint, it should), and
         how much of a performance penalty you're willing to pay
         to ensure 'freshness' of the connection --&gt;

    &lt;parameter&gt;
      &lt;name&gt;validationQuery&lt;/name&gt;
      &lt;value&gt;SELECT 1&lt;/value&gt;
    &lt;/parameter&gt;

   &lt;!-- The most conservative approach is to test connections
        before they're given to your application. For most applications
        this is okay, the query used above is very small and takes
        no real server resources to process, other than the time used
        to traverse the network.

        If you have a high-load application you'll need to rely on
        something else. --&gt;

    &lt;parameter&gt;
      &lt;name&gt;testOnBorrow&lt;/name&gt;
      &lt;value&gt;true&lt;/value&gt;
    &lt;/parameter&gt;

   &lt;!-- Otherwise, or in addition to testOnBorrow, you can test
        while connections are sitting idle --&gt;

    &lt;parameter&gt;
      &lt;name&gt;testWhileIdle&lt;/name&gt;
      &lt;value&gt;true&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- You have to set this value, otherwise even though
         you've asked connections to be tested while idle,
         the idle evicter thread will never run --&gt;

    &lt;parameter&gt;
      &lt;name&gt;timeBetweenEvictionRunsMillis&lt;/name&gt;
      &lt;value&gt;10000&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Don't allow connections to hang out idle too long,
         never longer than what wait_timeout is set to on the
         server...A few minutes or even fraction of a minute
         is sometimes okay here, it depends on your application
         and how much spikey load it will see --&gt;

    &lt;parameter&gt;
      &lt;name&gt;minEvictableIdleTimeMillis&lt;/name&gt;
      &lt;value&gt;60000&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Username and password used when connecting to MySQL --&gt;

    &lt;parameter&gt;
     &lt;name&gt;username&lt;/name&gt;
     &lt;value&gt;someuser&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;parameter&gt;
     &lt;name&gt;password&lt;/name&gt;
     &lt;value&gt;somepass&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- Class name for the Connector/J driver --&gt;

    &lt;parameter&gt;
       &lt;name&gt;driverClassName&lt;/name&gt;
       &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
    &lt;/parameter&gt;

    &lt;!-- The JDBC connection url for connecting to MySQL, notice
         that if you want to pass any other MySQL-specific parameters
         you should pass them here in the URL, setting them using the
         parameter tags above will have no effect, you will also
         need to use &amp;amp; to separate parameter values as the
         ampersand is a reserved character in XML --&gt;

    &lt;parameter&gt;
      &lt;name&gt;url&lt;/name&gt;
      &lt;value&gt;jdbc:mysql://localhost:3306/test&lt;/value&gt;
    &lt;/parameter&gt;

  &lt;/ResourceParams&gt;
&lt;/Context&gt;</pre><p>
        In general, you should follow the installation instructions that
        come with your version of Tomcat, as the way you configure
        datasources in Tomcat changes from time-to-time, and
        unfortunately if you use the wrong syntax in your XML file, you
        will most likely end up with an exception similar to the
        following:
      </p><pre class="programlisting">Error: java.sql.SQLException: Cannot load JDBC driver class 'null ' SQL
state: null </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-jboss-config"></a>1.4.3. Using Connector/J with JBoss</h4></div></div></div><p>
        These instructions cover JBoss-4.x. To make the JDBC driver
        classes available to the application server, copy the .jar file
        that comes with Connector/J to the <code class="filename">lib</code>
        directory for your server configuration (which is usually called
        "<code class="filename">default</code>"). Then, in the same configuration
        directory, in the subdirectory named “<span class="quote">deploy,</span>”
        create a datasource configuration file that ends with "-ds.xml",
        which tells JBoss to deploy this file as a JDBC Datasource. The
        file should have the following contents:
      </p><pre class="programlisting">&lt;datasources&gt;
    &lt;local-tx-datasource&gt;
        &lt;!-- This connection pool will be bound into JNDI with the name
             "java:/MySQLDB" --&gt;

        &lt;jndi-name&gt;MySQLDB&lt;/jndi-name&gt;
        &lt;connection-url&gt;jdbc:mysql://localhost:3306/dbname&lt;/connection-url&gt;
        &lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt;
        &lt;user-name&gt;user&lt;/user-name&gt;
        &lt;password&gt;pass&lt;/password&gt;

        &lt;min-pool-size&gt;5&lt;/min-pool-size&gt;

        &lt;!-- Don't set this any higher than max_connections on your
         MySQL server, usually this should be a 10 or a few 10's
         of connections, not hundreds or thousands --&gt;

        &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;

        &lt;!-- Don't allow connections to hang out idle too long,
         never longer than what wait_timeout is set to on the
         server...A few minutes is usually okay here,
         it depends on your application
         and how much spikey load it will see --&gt;

        &lt;idle-timeout-minutes&gt;5&lt;/idle-timeout-minutes&gt;

        &lt;!-- If you're using Connector/J 3.1.8 or newer, you can use
             our implementation of these to increase the robustness
             of the connection pool. --&gt;

        &lt;exception-sorter-class-name&gt;com.mysql.jdbc.integration.jboss.ExtendedMysqlExceptionSorter&lt;/exception-sorter-class-name&gt;
        &lt;valid-connection-checker-class-name&gt;com.mysql.jdbc.integration.jboss.MysqlValidConnectionChecker&lt;/valid-connection-checker-class-name&gt;

    &lt;/local-tx-datasource&gt;
&lt;/datasources&gt; </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-troubleshooting"></a>1.5. Diagnosing Connector/J Problems</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#cj-faq">1.5.1. Common Problems and Solutions</a></span></dt><dt><span class="section"><a href="#cj-reporting-bugs">1.5.2. How to Report Connector/J Bugs or Problems</a></span></dt></dl></div><p>
      This section describes how to solve problems that you may
      encounter when using Connector/J.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-faq"></a>1.5.1. Common Problems and Solutions</h4></div></div></div><p>
        There are a few issues that seem to be commonly encountered
        often by users of MySQL Connector/J. This section deals with
        their symptoms, and their resolutions.
      </p><p><span class="bold"><strong>1.5.1.1:
    </strong></span></p><p>Question:</p><p>
              When I try to connect to the database with MySQL
              Connector/J, I get the following exception:
            </p><pre class="screen">SQLException: Server configuration denies access to data source
SQLState: 08001
VendorError: 0</pre><p>
              What's going on? I can connect just fine with the MySQL
              command-line client.
            </p><p>Answer:</p><p>
              MySQL Connector/J must use TCP/IP sockets to connect to
              MySQL, as Java does not support Unix Domain Sockets.
              Therefore, when MySQL Connector/J connects to MySQL, the
              security manager in MySQL server will use its grant tables
              to determine whether the connection should be allowed.
            </p><p>
              You must add grants to allow this to happen. The following
              is an example of how to do this (but not the most secure).
            </p><p>
              From the mysql command-line client, logged in as a user
              that can grant privileges, issue the following command:
            </p><pre class="screen">GRANT ALL PRIVILEGES ON [dbname].* to
                '[user]'@'[hostname]' identified by
                '[password]'</pre><p>
              replacing [dbname] with the name of your database, [user]
              with the user name, [hostname] with the host that MySQL
              Connector/J will be connecting from, and [password] with
              the password you want to use. Be aware that RedHat Linux
              is broken with respect to the hostname portion for the
              case when you are connecting from localhost. You need to
              use "localhost.localdomain" for the [hostname] value in
              this case. Follow this by issuing the "FLUSH PRIVILEGES"
              command.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                Testing your connectivity with the
                <span><strong class="command">mysql</strong></span> command-line client will not
                work unless you add the <code class="option">--host</code> flag,
                and use something other than
                <code class="literal">localhost</code> for the host. The
                <span><strong class="command">mysql</strong></span> command-line client will use
                Unix domain sockets if you use the special hostname
                <code class="literal">localhost</code>. If you are testing
                connectivity to <code class="literal">localhost</code>, use
                <code class="literal">127.0.0.1</code> as the hostname instead.
              </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
                If you don't understand what the 'GRANT' command does,
                or how it works, you should read and understand the
                <a href="http://www.mysql.com/doc/en/Privilege_system.html" target="_top">'General
                Security Issues and the MySQL Access Privilege
                System'</a> section of the MySQL manual before
                attempting to change privileges.
              </p><p>
                Changing privileges and permissions improperly in MySQL
                can potentially cause your server installation to not
                have optimal security properties.
              </p></div><p><span class="bold"><strong>1.5.1.2:
    </strong></span></p><p>Question:</p><p>
              My application throws an SQLException 'No Suitable
              Driver'. Why is this happening?
            </p><p>Answer:</p><p>
              One of two things are happening. Either the driver is not
              in your CLASSPATH or your URL format is incorrect (see the
              <a href="#cj-installing" title="1.2. Installing Connector/J">Section 1.2, “Installing Connector/J”</a> section.).
            </p><p><span class="bold"><strong>1.5.1.3:
    </strong></span></p><p>Question:</p><p>
              I'm trying to use MySQL Connector/J in an applet or
              application and I get an exception similar to:
            </p><pre class="screen">SQLException: Cannot connect to MySQL server on host:3306.
Is there a MySQL server running on the machine/port you
are trying to connect to?

(java.security.AccessControlException)
SQLState: 08S01
VendorError: 0 </pre><p>Answer:</p><p>
              Either you're running an Applet, your MySQL server has
              been installed with the "--skip-networking" option set, or
              your MySQL server has a firewall sitting in front of it.
            </p><p>
              Applets can only make network connections back to the
              machine that runs the web server that served the .class
              files for the applet. This means that MySQL must run on
              the same machine (or you must have some sort of port
              re-direction) for this to work. This also means that you
              will not be able to test applets from your local file
              system, you must always deploy them to a web server.
            </p><p>
              MySQL Connector/J can only communicate with MySQL using
              TCP/IP, as Java does not support Unix domain sockets.
              TCP/IP communication with MySQL might be affected if MySQL
              was started with the "--skip-networking" flag, or if it is
              firewalled.
            </p><p>
              If MySQL has been started with the "--skip-networking"
              option set (the Debian Linux package of MySQL server does
              this for example), you need to comment it out in the file
              /etc/mysql/my.cnf or /etc/my.cnf. Of course your my.cnf
              file might also exist in the <code class="filename">data</code>
              directory of your MySQL server, or anywhere else
              (depending on how MySQL was compiled for your system).
              Binaries created by MySQL AB always look in /etc/my.cnf
              and [datadir]/my.cnf. If your MySQL server has been
              firewalled, you will need to have the firewall configured
              to allow TCP/IP connections from the host where your Java
              code is running to the MySQL server on the port that MySQL
              is listening to (by default, 3306).
            </p><p><span class="bold"><strong>1.5.1.4:
    </strong></span></p><p>Question:</p><p><a name="connector_j_wait_timeout_q_and_a"></a>
              I have a servlet/application that works fine for a day,
              and then stops working overnight
            </p><p>Answer:</p><p>
              MySQL closes connections after 8 hours of inactivity. You
              either need to use a connection pool that handles stale
              connections or use the "autoReconnect" parameter (see
              <a href="#cj-configuration-properties" title="1.3.1. Driver/Datasource Class Names, URL Syntax and Configuration Properties for Connector/J">Section 1.3.1, “Driver/Datasource Class Names, URL Syntax and Configuration Properties for Connector/J”</a>).
            </p><p>
              Also, you should be catching SQLExceptions in your
              application and dealing with them, rather than propagating
              them all the way until your application exits, this is
              just good programming practice. MySQL Connector/J will set
              the SQLState (see java.sql.SQLException.getSQLState() in
              your APIDOCS) to "08S01" when it encounters
              network-connectivity issues during the processing of a
              query. Your application code should then attempt to
              re-connect to MySQL at this point.
            </p><p>
              The following (simplistic) example shows what code that
              can handle these exceptions might look like:
            </p><p>
              </p><div class="example"><a name="id2974430"></a><p class="title"><b>Example 13. Example of transaction with retry logic</b></p><pre class="programlisting">public void doBusinessOp() throws SQLException {
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;

        //
        // How many times do you want to retry the transaction
        // (or at least _getting_ a connection)?
        //
        int retryCount = 5;

        boolean transactionCompleted = false;

        do {
            try {
                conn = getConnection(); // assume getting this from a
                                        // javax.sql.DataSource, or the
                                        // java.sql.DriverManager

                conn.setAutoCommit(false);

                //
                // Okay, at this point, the 'retry-ability' of the
                // transaction really depends on your application logic,
                // whether or not you're using autocommit (in this case
                // not), and whether you're using transacational storage
                // engines
                //
                // For this example, we'll assume that it's _not_ safe
                // to retry the entire transaction, so we set retry count
                // to 0 at this point
                //
                // If you were using exclusively transaction-safe tables,
                // or your application could recover from a connection going
                // bad in the middle of an operation, then you would not
                // touch 'retryCount' here, and just let the loop repeat
                // until retryCount == 0.
                //
                retryCount = 0;

                stmt = conn.createStatement();

                String query = "SELECT foo FROM bar ORDER BY baz";

                rs = stmt.executeQuery(query);

                while (rs.next()) {
                }

                rs.close();
                rs = null;

                stmt.close();
                stmt = null;

                conn.commit();
                conn.close();
                conn = null;

                transactionCompleted = true;
            } catch (SQLException sqlEx) {

                //
                // The two SQL states that are 'retry-able' are 08S01
                // for a communications error, and 40001 for deadlock.
                //
                // Only retry if the error was due to a stale connection,
                // communications problem or deadlock
                //

                String sqlState = sqlEx.getSQLState();

                if ("08S01".equals(sqlState) || "40001".equals(sqlState)) {
                    retryCount--;
                } else {
                    retryCount = 0;
                }
            } finally {
                if (rs != null) {
                    try {
                        rs.close();
                    } catch (SQLException sqlEx) {
                        // You'd probably want to log this . . .
                    }
                }

                if (stmt != null) {
                    try {
                        stmt.close();
                    } catch (SQLException sqlEx) {
                        // You'd probably want to log this as well . . .
                    }
                }

                if (conn != null) {
                    try {
                        //
                        // If we got here, and conn is not null, the
                        // transaction should be rolled back, as not
                        // all work has been done

                        try {
                            conn.rollback();
                        } finally {
                            conn.close();
                        }
                    } catch (SQLException sqlEx) {
                        //
                        // If we got an exception here, something
                        // pretty serious is going on, so we better
                        // pass it up the stack, rather than just
                        // logging it. . .

                        throw sqlEx;
                    }
                }
            }
        } while (!transactionCompleted &amp;&amp; (retryCount &gt; 0));
    }</pre></div><p>
            </p><p><span class="bold"><strong>1.5.1.5:
    </strong></span></p><p>Question:</p><p>
              I'm trying to use JDBC-2.0 updatable result sets, and I
              get an exception saying my result set is not updatable.
            </p><p>Answer:</p><p>
              Because MySQL does not have row identifiers, MySQL
              Connector/J can only update result sets that have come
              from queries on tables that have at least one primary key,
              the query must select every primary key and the query can
              only span one table (that is, no joins). This is outlined
              in the JDBC specification.
            </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-reporting-bugs"></a>1.5.2. How to Report Connector/J Bugs or Problems</h4></div></div></div><p>
        The normal place to report bugs is
        <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a>, which is the address for
        our bugs database. This database is public, and can be browsed
        and searched by anyone. If you log in to the system, you will
        also be able to enter new reports.
      </p><p>
        If you have found a sensitive security bug in MySQL, you can
        send email to
        <a href="mailto:security@mysql.com" target="_top">security@mysql.com</a>.
      </p><p>
        Writing a good bug report takes patience, but doing it right the
        first time saves time both for us and for yourself. A good bug
        report, containing a full test case for the bug, makes it very
        likely that we will fix the bug in the next release.
      </p><p>
        This section will help you write your report correctly so that
        you don't waste your time doing things that may not help us much
        or at all.
      </p><p>
        If you have a repeatable bug report, please report it to the
        bugs database at <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a>.
      </p><p>
        Any bug that we are able to repeat has a high chance of being
        fixed in the next MySQL release.
      </p><p>
        To report other problems, you can use one of the MySQL mailing
        lists.
      </p><p>
        Remember that it is possible for us to respond to a message
        containing too much information, but not to one containing too
        little. People often omit facts because they think they know the
        cause of a problem and assume that some details don't matter.
      </p><p>
        A good principle is this: If you are in doubt about stating
        something, state it. It is faster and less troublesome to write
        a couple more lines in your report than to wait longer for the
        answer if we must ask you to provide information that was
        missing from the initial report.
      </p><p>
        The most common errors made in bug reports are (a) not including
        the version number of Connector/J or MySQL used, and (b) not
        fully describing the platform on which Connector/J is installed
        (including the JVM version, and the platform type and version
        number that MySQL itself is installed on).
      </p><p>
        This is highly relevant information, and in 99 cases out of 100,
        the bug report is useless without it. Very often we get
        questions like, ``Why doesn't this work for me?'' Then we find
        that the feature requested wasn't implemented in that MySQL
        version, or that a bug described in a report has already been
        fixed in newer MySQL versions.
      </p><p>
        Sometimes the error is platform-dependent; in such cases, it is
        next to impossible for us to fix anything without knowing the
        operating system and the version number of the platform.
      </p><p>
        If at all possible, you should create a repeatable, stanalone
        testcase that doesn't involve any third-party classes.
      </p><p>
        To streamline this process, we ship a base class for testcases
        with Connector/J, named
        '<code class="classname">com.mysql.jdbc.util.BaseBugReport</code>'. To
        create a testcase for Connector/J using this class, create your
        own class that inherits from
        <code class="classname">com.mysql.jdbc.util.BaseBugReport</code> and
        override the methods <code class="methodname">setUp()</code>,
        <code class="methodname">tearDown()</code> and
        <code class="methodname">runTest</code> ().
      </p><p>
        In the <code class="methodname">setUp()</code> method, create code that
        creates your tables, and populates them with any data needed to
        demonstrate the bug.
      </p><p>
        In the <code class="methodname">runTest</code> () method, create code
        that demonstrates the bug using the tables and data you created
        in the <code class="function">setUp</code> method.
      </p><p>
        In the <code class="methodname">tearDown()</code> method, drop any
        tables you created in the <code class="methodname">setUp()</code>
        method.
      </p><p>
        In any of the above three methods, you should use one of the
        variants of the <code class="methodname">getConnection</code> () method
        to create a JDBC connection to MySQL:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            getConnection() - Provides a connection to the JDBC URL
            specified in getUrl(). If a connection already exists, that
            connection is returned, otherwise a new connection is
            created.
          </p></li><li><p>
            getNewConnection() - Use this if you need to get a new
            connection for your bug report (i.e. there's more than one
            connection involved).
          </p></li><li><p>
            getConnection(String url) - Returns a connection using the
            given URL.
          </p></li><li><p>
            getConnection(String url, Properties props) - Returns a
            connection using the given URL and properties.
          </p></li></ul></div><p>
        If you need to use a JDBC URL that is different from
        'jdbc:mysql:///test', override the method
        <code class="methodname">getUrl()</code> as well.
      </p><p>
        Use the <code class="methodname">assertTrue(boolean expression)</code>
        and <code class="methodname">assertTrue(String failureMessage, boolean
        expression)</code> methods to create conditions that must
        be met in your testcase demonstrating the behavior you are
        expecting (vs. the behavior you are observing, which is why you
        are most likely filing a bug report).
      </p><p>
        Finally, create a <code class="methodname">main</code> () method that
        creates a new instance of your testcase, and calls the
        <code class="methodname">run</code> method:
      </p><pre class="programlisting">public static void main(String[] args) throws Exception {
      new MyBugReport().run();
 }</pre><p>
        Once you have finished your testcase, and have verified that it
        demonstrates the bug you are reporting, upload it with your bug
        report to <a href="http://bugs.mysql.com/" target="_top">http://bugs.mysql.com/</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cj-news"></a>1.6. MySQL Connector/J Change History</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#cj-news-5-0-0">1.6.1. Changes in MySQL Connector/J 5.0.0-beta (22 December 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-13">1.6.2. Changes in MySQL Connector/J 3.1.13 (xx xxx 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-12">1.6.3. Changes in MySQL Connector/J 3.1.12 (30 November 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-11">1.6.4. Changes in MySQL Connector/J 3.1.11-stable (07 October 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-10">1.6.5. Changes in MySQL Connector/J 3.1.10-stable (23 June 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-9">1.6.6. Changes in MySQL Connector/J 3.1.9-stable (22 June 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-8">1.6.7. Changes in MySQL Connector/J 3.1.8-stable (14 April 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-7">1.6.8. Changes in MySQL Connector/J 3.1.7-stable (18 February 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-6">1.6.9. Changes in MySQL Connector/J 3.1.6-stable (23 December 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-5">1.6.10. Changes in MySQL Connector/J 3.1.5-gamma (02 December 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-4">1.6.11. Changes in MySQL Connector/J 3.1.4-beta (04 September 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-3">1.6.12. Changes in MySQL Connector/J 3.1.3-beta (07 July 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-2">1.6.13. Changes in MySQL Connector/J 3.1.2-alpha (09 June 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-1">1.6.14. Changes in MySQL Connector/J 3.1.1-alpha (14 February 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-1-0">1.6.15. Changes in MySQL Connector/J 3.1.0-alpha (18 February 2003)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-17">1.6.16. Changes in MySQL Connector/J 3.0.17-ga (23 June 2005)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-16">1.6.17. Changes in MySQL Connector/J 3.0.16-ga (15 November 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-15">1.6.18. Changes in MySQL Connector/J 3.0.15-production (04 September 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-14">1.6.19. Changes in MySQL Connector/J 3.0.14-production (28 May 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-13">1.6.20. Changes in MySQL Connector/J 3.0.13-production (27 May 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-12">1.6.21. Changes in MySQL Connector/J 3.0.12-production (18 May 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-11">1.6.22. Changes in MySQL Connector/J 3.0.11-stable (19 February 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-10">1.6.23. Changes in MySQL Connector/J 3.0.10-stable (13 January 2004)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-9">1.6.24. Changes in MySQL Connector/J 3.0.9-stable (07 October 2003)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-8">1.6.25. Changes in MySQL Connector/J 3.0.8-stable (23 May 2003)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-7">1.6.26. Changes in MySQL Connector/J 3.0.7-stable (08 April 2003)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-6">1.6.27. Changes in MySQL Connector/J 3.0.6-stable (18 February 2003)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-5">1.6.28. Changes in MySQL Connector/J 3.0.5-gamma (22 January 2003)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-4">1.6.29. Changes in MySQL Connector/J 3.0.4-gamma (06 January 2003)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-3">1.6.30. Changes in MySQL Connector/J 3.0.3-dev (17 December 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-2">1.6.31. Changes in MySQL Connector/J 3.0.2-dev (08 November 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-1">1.6.32. Changes in MySQL Connector/J 3.0.1-dev (21 September 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-3-0-0">1.6.33. Changes in MySQL Connector/J 3.0.0-dev (31 July 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-14">1.6.34. Changes in MySQL Connector/J 2.0.14 (16 May 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-13">1.6.35. Changes in MySQL Connector/J 2.0.13 (24 April 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-12">1.6.36. Changes in MySQL Connector/J 2.0.12 (07 April 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-11">1.6.37. Changes in MySQL Connector/J 2.0.11 (27 January 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-10">1.6.38. Changes in MySQL Connector/J 2.0.10 (24 January 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-9">1.6.39. Changes in MySQL Connector/J 2.0.9 (13 January 2002)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-8">1.6.40. Changes in MySQL Connector/J 2.0.8 (25 November 2001)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-7">1.6.41. Changes in MySQL Connector/J 2.0.7 (24 October 2001)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-6">1.6.42. Changes in MySQL Connector/J 2.0.6 (16 June 2001)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-5">1.6.43. Changes in MySQL Connector/J 2.0.5 (13 June 2001)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-3">1.6.44. Changes in MySQL Connector/J 2.0.3 (03 December 2000)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0-1">1.6.45. Changes in MySQL Connector/J 2.0.1 (06 April 2000)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0pre5">1.6.46. Changes in MySQL Connector/J 2.0.0pre5 (21 February 2000)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0pre4">1.6.47. Changes in MySQL Connector/J 2.0.0pre4 (10 January 2000)</a></span></dt><dt><span class="section"><a href="#cj-news-2-0pre">1.6.48. Changes in MySQL Connector/J 2.0.0pre (17 August 1999)</a></span></dt><dt><span class="section"><a href="#cj-news-1-2b">1.6.49. Changes in MySQL Connector/J 1.2b (04 July 1999)</a></span></dt><dt><span class="section"><a href="#cj-news-1-2a">1.6.50. Changes in MySQL Connector/J 1.2a (14 April 1999)</a></span></dt><dt><span class="section"><a href="#cj-news-1-1i">1.6.51. Changes in MySQL Connector/J 1.1i (24 March 1999)</a></span></dt><dt><span class="section"><a href="#cj-news-1-1h">1.6.52. Changes in MySQL Connector/J 1.1h (08 March 1999)</a></span></dt><dt><span class="section"><a href="#cj-news-1-1g">1.6.53. Changes in MySQL Connector/J 1.1g (19 February 1999)</a></span></dt><dt><span class="section"><a href="#cj-news-1-1f">1.6.54. Changes in MySQL Connector/J 1.1f (31 December 1998)</a></span></dt><dt><span class="section"><a href="#cj-news-1-1b">1.6.55. Changes in MySQL Connector/J 1.1b (03 November 1998)</a></span></dt><dt><span class="section"><a href="#cj-news-1-1">1.6.56. Changes in MySQL Connector/J 1.1 (02 September 1998)</a></span></dt><dt><span class="section"><a href="#cj-news-1-0">1.6.57. Changes in MySQL Connector/J 1.0 (24 August 1998)</a></span></dt><dt><span class="section"><a href="#cj-news-0-9d">1.6.58. Changes in MySQL Connector/J 0.9d (04 August 1998)</a></span></dt><dt><span class="section"><a href="#cj-news-0-9">1.6.59. Changes in MySQL Connector/J 0.9 (28 July 1998)</a></span></dt><dt><span class="section"><a href="#cj-news-0-8">1.6.60. Changes in MySQL Connector/J 0.8 (06 July 1998)</a></span></dt><dt><span class="section"><a href="#cj-news-0-7">1.6.61. Changes in MySQL Connector/J 0.7 (01 July 1998)</a></span></dt><dt><span class="section"><a href="#cj-news-0-6">1.6.62. Changes in MySQL Connector/J 0.6 (21 May 1998)</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-5-0-0"></a>1.6.1. Changes in MySQL Connector/J 5.0.0-beta (22 December 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">XADataSource</code> implemented (ported from 3.2
          branch which won't be released as a product). Use
          <code class="literal">com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</code>
          as your datasource class name in your application server to
          utilize XA transactions in MySQL-5.0.10 and newer.
        </p></li><li><p>
          <code class="literal">PreparedStatement.setString()</code> didn't work
          correctly when <code class="literal">sql_mode</code> on server contained
          <code class="literal">NO_BACKSLASH_ESCAPES</code> and no characters that
          needed escaping were present in the string.
        </p></li><li><p>
          Attempt detection of the MySQL type <code class="literal">BINARY</code>
          (it's an alias, so this isn't always reliable), and use the
          <code class="literal">java.sql.Types.BINARY</code> type mapping for it.
        </p></li><li><p>
          Moved <code class="filename">-bin-g.jar</code> file into separate
          <code class="filename">debug</code> subdirectory to avoid confusion.
        </p></li><li><p>
          Don't allow <code class="literal">.setAutoCommit(true)</code>, or
          <code class="literal">.commit()</code> or <code class="literal">.rollback()</code>
          on an XA-managed connection as per the JDBC specification.
        </p></li><li><p>
          If the connection <code class="literal">useTimezone</code> is set to
          <code class="literal">true</code>, then also respect time zone
          conversions in escape-processed string literals (for example,
          <code class="literal">"{ts ...}"</code> and <code class="literal">"{t
          ...}"</code>).
        </p></li><li><p>
          Return original column name for
          <code class="literal">RSMD.getColumnName()</code> if the column was
          aliased, alias name for <code class="literal">.getColumnLabel()</code>
          (if aliased), and original table name for
          <code class="literal">.getTableName()</code>. Note this only works for
          MySQL-4.1 and newer, as older servers don't make this
          information available to clients.
        </p></li><li><p>
          Setting <code class="literal">useJDBCCompliantTimezoneShift=true</code>
          (it's not the default) causes the driver to use GMT for
          <span class="emphasis"><em>all</em></span>
          <code class="literal">TIMESTAMP</code>/<code class="literal">DATETIME</code> time
          zones, and the current VM time zone for any other type that
          refers to time zones. This feature can not be used when
          <code class="literal">useTimezone=true</code> to convert between server
          and client time zones.
        </p></li><li><p>
          Add one level of indirection of internal representation of
          <code class="literal">CallableStatement</code> parameter metadata to
          avoid class not found issues on JDK-1.3 for
          <code class="literal">ParameterMetadata</code> interface (which doesn't
          exist prior to JDBC-3.0).
        </p></li><li><p>
          Added unit tests for <code class="literal">XADatasource</code>, as well
          as friendlier exceptions for XA failures compared to the
          "stock" <code class="literal">XAException</code> (which has no
          messages).
        </p></li><li><p>
          Idle timeouts cause <code class="literal">XAConnections</code> to whine
          about rolling themselves back. (<a href="http://bugs.mysql.com/14729" target="_top">Bug#14729</a>)
        </p></li><li><p>
          Added support for Connector/MXJ integration via url
          subprotocol <code class="literal">jdbc:mysql:mxj://...</code>.
        </p></li><li><p>
          Moved all <code class="literal">SQLException</code> constructor usage to
          a factory in <code class="literal">SQLError</code> (ground-work for
          JDBC-4.0 <code class="literal">SQLState</code>-based exception classes).
        </p></li><li><p>
          Removed Java5-specific calls to <code class="literal">BigDecimal</code>
          constructor (when result set value is <code class="literal">''</code>,
          <code class="literal">(int)0</code> was being used as an argument
          indirectly via method return value. This signature doesn't
          exist prior to Java5.)
        </p></li><li><p>
          Added service-provider entry to
          <code class="filename">META-INF/services/java.sql.Driver</code> for
          JDBC-4.0 support.
        </p></li><li><p>
          Return "[VAR]BINARY" for
          <code class="literal">RSMD.getColumnTypeName()</code> when that is
          actually the type, and it can be distinguished (MySQL-4.1 and
          newer).
        </p></li><li><p>
          When fix for <a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a> was merged from 3.1.12, added
          functionality for <code class="literal">CallableStatement</code>'s
          parameter metadata to return correct information for
          <code class="literal">.getParameterClassName()</code>.
        </p></li><li><p>
          Fuller synchronization of <code class="literal">Connection</code> to
          avoid deadlocks when using multithreaded frameworks that
          multithread a single connection (usually not recommended, but
          the JDBC spec allows it anyways), part of fix to <a href="http://bugs.mysql.com/14972" target="_top">Bug#14972</a>).
        </p></li><li><p>
          Implementation of <code class="literal">Statement.cancel()</code> and
          <code class="literal">Statement.setQueryTimeout()</code>. Both require
          MySQL-5.0.0 or newer server, require a separate connection to
          issue the <code class="literal">KILL QUERY</code> statement, and in the
          case of <code class="literal">setQueryTimeout()</code> creates an
          additional thread to handle the timeout functionality.
        </p><p>
          Note: Failures to cancel the statement for
          <code class="literal">setQueryTimeout()</code> may manifest themselves
          as <code class="literal">RuntimeExceptions</code> rather than failing
          silently, as there is currently no way to unblock the thread
          that is executing the query being cancelled due to timeout
          expiration and have it throw the exception instead.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-13"></a>1.6.2. Changes in MySQL Connector/J 3.1.13 (xx xxx 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">INOUT</code> parameter does not store
          <code class="literal">IN</code> value. (<a href="http://bugs.mysql.com/15464" target="_top">Bug#15464</a>)
        </p></li><li><p>
          Exception thrown for new decimal type when using updatable
          result sets. (<a href="http://bugs.mysql.com/14609" target="_top">Bug#14609</a>)
        </p></li><li><p>
          No "dos" character set in MySQL &gt; 4.1.0. (<a href="http://bugs.mysql.com/15544" target="_top">Bug#15544</a>)
        </p></li><li><p>
          <code class="literal">PreparedStatement.setObject()</code> serializes
          <code class="literal">BigInteger</code> as object, rather than sending
          as numeric value (and is thus not complementary to
          <code class="literal">.getObject()</code> on an <code class="literal">UNSIGNED
          LONG</code> type). (<a href="http://bugs.mysql.com/15383" target="_top">Bug#15383</a>)
        </p></li><li><p>
          <code class="literal">ResultSet.getShort()</code> for <code class="literal">UNSIGNED
          TINYINT</code> returned wrong values. (<a href="http://bugs.mysql.com/11874" target="_top">Bug#11874</a>)
        </p></li><li><p>
          <code class="filename">lib-nodist</code> directory missing from package
          breaks out-of-box build. (<a href="http://bugs.mysql.com/15676" target="_top">Bug#15676</a>)
        </p></li><li><p>
          <code class="literal">DBMD.getColumns()</code> returns wrong type for
          <code class="literal">BIT</code>. (<a href="http://bugs.mysql.com/15854" target="_top">Bug#15854</a>)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-12"></a>1.6.3. Changes in MySQL Connector/J 3.1.12 (30 November 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed client-side prepared statement bug with embedded
          <code class="literal">?</code> characters inside quoted identifiers (it
          was recognized as a placeholder, when it was not).
        </p></li><li><p>
          Don't allow <code class="literal">executeBatch()</code> for
          <code class="literal">CallableStatements</code> with registered
          <code class="literal">OUT</code>/<code class="literal">INOUT</code> parameters
          (JDBC compliance).
        </p></li><li><p>
          Fall back to platform-encoding for
          <code class="literal">URLDecoder.decode()</code> when parsing driver URL
          properties if the platform doesn't have a two-argument version
          of this method.
        </p></li><li><p>
          Java type conversion may be incorrect for
          <code class="literal">MEDIUMINT</code>. (<a href="http://bugs.mysql.com/14562" target="_top">Bug#14562</a>)
        </p></li><li><p>
          Added configuration property
          <code class="literal">useGmtMillisForDatetimes</code> which when set to
          <code class="literal">true</code> causes
          <code class="literal">ResultSet.getDate()</code>,
          <code class="literal">.getTimestamp()</code> to return correct
          millis-since GMT when <code class="literal">.getTime()</code> is called
          on the return value (currently default is
          <code class="literal">false</code> for legacy behavior).
        </p></li><li><p>
          Fixed
          <code class="literal">DatabaseMetaData.stores*Identifiers()</code>:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              If <code class="literal">lower_case_table_names=0</code> (on
              server):
            </p><div class="itemizedlist"><ul type="square"><li><p>
                  <code class="literal">storesLowerCaseIdentifiers()</code>
                  returns <code class="literal">false</code>
                </p></li><li><p>
                  <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
                  returns <code class="literal">false</code>
                </p></li><li><p>
                  <code class="literal">storesMixedCaseIdentifiers()</code>
                  returns <code class="literal">true</code>
                </p></li><li><p>
                  <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
                  returns <code class="literal">true</code>
                </p></li><li><p>
                  <code class="literal">storesUpperCaseIdentifiers()</code>
                  returns <code class="literal">false</code>
                </p></li><li><p>
                  <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
                  returns <code class="literal">true</code>
                </p></li></ul></div></li><li><p>
              If <code class="literal">lower_case_table_names=1</code> (on
              server):
            </p><div class="itemizedlist"><ul type="square"><li><p>
                  <code class="literal">storesLowerCaseIdentifiers()</code>
                  returns <code class="literal">true</code>
                </p></li><li><p>
                  <code class="literal">storesLowerCaseQuotedIdentifiers()</code>
                  returns <code class="literal">true</code>
                </p></li><li><p>
                  <code class="literal">storesMixedCaseIdentifiers()</code>
                  returns <code class="literal">false</code>
                </p></li><li><p>
                  <code class="literal">storesMixedCaseQuotedIdentifiers()</code>
                  <code class="literal">returns false</code>
                </p></li><li><p>
                  <code class="literal">storesUpperCaseIdentifiers()</code>
                  returns <code class="literal">false</code>
                </p></li><li><p>
                  <code class="literal">storesUpperCaseQuotedIdentifiers()</code>
                  returns <code class="literal">true</code>
                </p></li></ul></div></li></ul></div></li><li><p>
          <code class="literal">DatabaseMetaData.getColumns()</code> doesn't
          return <code class="literal">TABLE_NAME</code> correctly. (<a href="http://bugs.mysql.com/14815" target="_top">Bug#14815</a>)
        </p></li><li><p>
          Escape processor replaces quote character in quoted string
          with string delimiter. (<a href="http://bugs.mysql.com/14909" target="_top">Bug#14909</a>)
        </p></li><li><p>
          OpenOffice expects
          <code class="literal">DBMD.supportsIntegrityEnhancementFacility()</code>
          to return <code class="literal">true</code> if foreign keys are
          supported by the datasource, even though this method also
          covers support for check constraints, which MySQL
          <span class="emphasis"><em>doesn't</em></span> have. Setting the configuration
          property
          <code class="literal">overrideSupportsIntegrityEnhancementFacility</code>
          to <code class="literal">true</code> causes the driver to return
          <code class="literal">true</code> for this method. (<a href="http://bugs.mysql.com/12975" target="_top">Bug#12975</a>)
        </p></li><li><p>
          Added <code class="literal">com.mysql.jdbc.testsuite.url.default</code>
          system property to set default JDBC url for testsuite (to
          speed up bug resolution when I'm working in Eclipse).
        </p></li><li><p>
          Unable to initialize character set mapping tables (due to J2EE
          classloader differences). (<a href="http://bugs.mysql.com/14938" target="_top">Bug#14938</a>)
        </p></li><li><p>
          Deadlock while closing server-side prepared statements from
          multiple threads sharing one connection. (<a href="http://bugs.mysql.com/14972" target="_top">Bug#14972</a>)
        </p></li><li><p>
          <code class="literal">logSlowQueries</code> should give better info.
          (<a href="http://bugs.mysql.com/12230" target="_top">Bug#12230</a>)
        </p></li><li><p>
          Extraneous sleep on <code class="literal">autoReconnect</code>. (<a href="http://bugs.mysql.com/13775" target="_top">Bug#13775</a>)
        </p></li><li><p>
          Driver incorrectly closes streams passed as arguments to
          <code class="literal">PreparedStatements</code>. Reverts to legacy
          behavior by setting the JDBC configuration property
          <code class="literal">autoClosePStmtStreams</code> to
          <code class="literal">true</code> (also included in the 3-0-Compat
          configuration “<span class="quote">bundle</span>”). (<a href="http://bugs.mysql.com/15024" target="_top">Bug#15024</a>)
        </p></li><li><p>
          <code class="literal">maxQuerySizeToLog</code> is not respected. Added
          logging of bound values for <code class="literal">execute()</code> phase
          of server-side prepared statements when
          <code class="literal">profileSQL=true</code> as well. (<a href="http://bugs.mysql.com/13048" target="_top">Bug#13048</a>)
        </p></li><li><p>
          Usage advisor complains about unreferenced columns, even
          though they've been referenced. (<a href="http://bugs.mysql.com/15065" target="_top">Bug#15065</a>)
        </p></li><li><p>
          Don't increase timeout for failover/reconnect. (<a href="http://bugs.mysql.com/6577" target="_top">Bug#6577</a>)
        </p></li><li><p>
          Process escape tokens in
          <code class="literal">Connection.prepareStatement(...)</code>. (<a href="http://bugs.mysql.com/15141" target="_top">Bug#15141</a>) You can disable this behavior by setting the JDBC URL
          configuration property
          <code class="literal">processEscapeCodesForPrepStmts</code> to
          <code class="literal">false</code>.
        </p></li><li><p>
          Reconnect during middle of <code class="literal">executeBatch()</code>
          should not occur if <code class="literal">autoReconnect</code> is
          enabled. (<a href="http://bugs.mysql.com/13255" target="_top">Bug#13255</a>)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-11"></a>1.6.4. Changes in MySQL Connector/J 3.1.11-stable (07 October 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Spurious <code class="literal">!</code> on console when character
          encoding is <code class="literal">utf8</code>. (<a href="http://bugs.mysql.com/11629" target="_top">Bug#11629</a>)
        </p></li><li><p>
          Fixed statements generated for testcases missing
          <code class="literal">;</code> for “<span class="quote">plain</span>” statements.
        </p></li><li><p>
          Incorrect generation of testcase scripts for server-side
          prepared statements. (<a href="http://bugs.mysql.com/11663" target="_top">Bug#11663</a>)
        </p></li><li><p>
          Fixed regression caused by fix for <a href="http://bugs.mysql.com/11552" target="_top">Bug#11552</a> that caused
          driver to return incorrect values for unsigned integers when
          those integers where within the range of the positive signed
          type.
        </p></li><li><p>
          Moved source code to Subversion repository.
        </p></li><li><p>
          Escape tokenizer doesn't respect stacked single quotes for
          escapes. (<a href="http://bugs.mysql.com/11797" target="_top">Bug#11797</a>)
        </p></li><li><p>
          <code class="literal">GEOMETRY</code> type not recognized when using
          server-side prepared statements.
        </p></li><li><p>
          <code class="literal">ReplicationConnection</code> won't switch to
          slave, throws “<span class="quote">Catalog can't be null</span>” exception.
          (<a href="http://bugs.mysql.com/11879" target="_top">Bug#11879</a>)
        </p></li><li><p>
          Properties shared between master and slave with replication
          connection. (<a href="http://bugs.mysql.com/12218" target="_top">Bug#12218</a>)
        </p></li><li><p>
          <code class="literal">Statement.getWarnings()</code> fails with NPE if
          statement has been closed. (<a href="http://bugs.mysql.com/10630" target="_top">Bug#10630</a>)
        </p></li><li><p>
          Only get <code class="literal">char[]</code> from SQL in
          <code class="literal">PreparedStatement.ParseInfo()</code> when needed.
        </p></li><li><p>
          Geometry types not handled with server-side prepared
          statements. (<a href="http://bugs.mysql.com/12104" target="_top">Bug#12104</a>)
        </p></li><li><p>
          <code class="literal">StringUtils.getBytes()</code> doesn't work when
          using multi-byte character encodings and a length in
          <span class="emphasis"><em>characters</em></span> is specified. (<a href="http://bugs.mysql.com/11614" target="_top">Bug#11614</a>)
        </p></li><li><p>
          <code class="literal">Pstmt.setObject(...., Types.BOOLEAN)</code> throws
          exception. (<a href="http://bugs.mysql.com/11798" target="_top">Bug#11798</a>)
        </p></li><li><p>
          <code class="literal">maxPerformance.properties</code> mis-spells
          “<span class="quote">elideSetAutoCommits</span>”. (<a href="http://bugs.mysql.com/11976" target="_top">Bug#11976</a>)
        </p></li><li><p>
          <code class="literal">DBMD.storesLower/Mixed/UpperIdentifiers()</code>
          reports incorrect values for servers deployed on Windows. (<a href="http://bugs.mysql.com/11575" target="_top">Bug#11575</a>)
        </p></li><li><p>
          <code class="literal">ResultSet.moveToCurrentRow()</code> fails to work
          when preceded by a call to
          <code class="literal">ResultSet.moveToInsertRow()</code>. (<a href="http://bugs.mysql.com/11190" target="_top">Bug#11190</a>)
        </p></li><li><p>
          <code class="literal">VARBINARY</code> data corrupted when using
          server-side prepared statements and
          <code class="literal">.setBytes()</code>. (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)
        </p></li><li><p>
          <code class="literal">explainSlowQueries</code> hangs with server-side
          prepared statements. (<a href="http://bugs.mysql.com/12229" target="_top">Bug#12229</a>)
        </p></li><li><p>
          Escape processor didn't honor strings demarcated with double
          quotes. (<a href="http://bugs.mysql.com/11498" target="_top">Bug#11498</a>)
        </p></li><li><p>
          Lifted restriction of changing streaming parameters with
          server-side prepared statements. As long as
          <code class="literal">all</code> streaming parameters were set before
          execution, <code class="literal">.clearParameters()</code> does not have
          to be called. (due to limitation of client/server protocol,
          prepared statements can not reset
          <span class="emphasis"><em>individual</em></span> stream data on the server
          side).
        </p></li><li><p>
          Reworked <code class="literal">Field</code> class,
          <code class="literal">*Buffer</code>, and <code class="literal">MysqlIO</code> to
          be aware of field lengths &gt;
          <code class="literal">Integer.MAX_VALUE</code>.
        </p></li><li><p>
          Updated <code class="literal">DBMD.supportsCorrelatedQueries()</code> to
          return <code class="literal">true</code> for versions &gt; 4.1,
          <code class="literal">supportsGroupByUnrelated()</code> to return
          <code class="literal">true</code> and
          <code class="literal">getResultSetHoldability()</code> to return
          <code class="literal">HOLD_CURSORS_OVER_COMMIT</code>.
        </p></li><li><p>
          Handling of catalog argument in
          <code class="literal">DatabaseMetaData.getIndexInfo()</code>, which also
          means changes to the following methods in
          <code class="literal">DatabaseMetaData</code>: (<a href="http://bugs.mysql.com/12541" target="_top">Bug#12541</a>)
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">getBestRowIdentifier()</code>
            </p></li><li><p>
              <code class="literal">getColumns()</code>
            </p></li><li><p>
              <code class="literal">getCrossReference()</code>
            </p></li><li><p>
              <code class="literal">getExportedKeys()</code>
            </p></li><li><p>
              <code class="literal">getImportedKeys()</code>
            </p></li><li><p>
              <code class="literal">getIndexInfo()</code>
            </p></li><li><p>
              <code class="literal">getPrimaryKeys()</code>
            </p></li><li><p>
              <code class="literal">getProcedures()</code> (and thus indirectly
              <code class="literal">getProcedureColumns()</code>)
            </p></li><li><p>
              <code class="literal">getTables()</code>
            </p></li></ul></div><p>
          The <code class="literal">catalog</code> argument in all of these
          methods now behaves in the following way:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Specifying <code class="literal">NULL</code> means that catalog will
              not be used to filter the results (thus all databases will
              be searched), unless you've set
              <code class="literal">nullCatalogMeansCurrent=true</code> in your
              JDBC URL properties.
            </p></li><li><p>
              Specifying <code class="literal">""</code> means
              “<span class="quote">current</span>” catalog, even though this isn't
              quite JDBC spec compliant, it's there for legacy users.
            </p></li><li><p>
              Specifying a catalog works as stated in the API docs.
            </p></li><li><p>
              Made <code class="literal">Connection.clientPrepare()</code>
              available from “<span class="quote">wrapped</span>” connections in the
              <code class="literal">jdbc2.optional</code> package (connections
              built by <code class="literal">ConnectionPoolDataSource</code>
              instances).
            </p></li></ul></div></li><li><p>
          Added <code class="literal">Connection.isMasterConnection()</code> for
          clients to be able to determine if a multi-host master/slave
          connection is connected to the first host in the list.
        </p></li><li><p>
          Tokenizer for <code class="literal">=</code> in URL properties was
          causing <code class="literal">sessionVariables=....</code> to be
          parameterized incorrectly. (<a href="http://bugs.mysql.com/12753" target="_top">Bug#12753</a>)
        </p></li><li><p>
          Foreign key information that is quoted is parsed incorrectly
          when <code class="literal">DatabaseMetaData</code> methods use that
          information. (<a href="http://bugs.mysql.com/11781" target="_top">Bug#11781</a>)
        </p></li><li><p>
          The <code class="literal">sendBlobChunkSize</code> property is now
          clamped to <code class="literal">max_allowed_packet</code> with
          consideration of stream buffer size and packet headers to
          avoid <code class="literal">PacketTooBigExceptions</code> when
          <code class="literal">max_allowed_packet</code> is similar in size to
          the default <code class="literal">sendBlobChunkSize</code> which is 1M.
        </p></li><li><p>
          <code class="literal">CallableStatement.clearParameters()</code> now
          clears resources associated with
          <code class="literal">INOUT</code>/<code class="literal">OUTPUT</code> parameters
          as well as <code class="literal">INPUT</code> parameters.
        </p></li><li><p>
          <code class="literal">Connection.prepareCall()</code> is database name
          case-sensitive (on Windows systems). (<a href="http://bugs.mysql.com/12417" target="_top">Bug#12417</a>)
        </p></li><li><p>
          <code class="literal">cp1251</code> incorrectly mapped to
          <code class="literal">win1251</code> for servers newer than 4.0.x. (<a href="http://bugs.mysql.com/12752" target="_top">Bug#12752</a>)
        </p></li><li><p>
          <code class="literal">java.sql.Types.OTHER</code> returned for
          <code class="literal">BINARY</code> and <code class="literal">VARBINARY</code>
          columns when using
          <code class="literal">DatabaseMetaData.getColumns()</code>. (<a href="http://bugs.mysql.com/12970" target="_top">Bug#12970</a>)
        </p></li><li><p>
          <code class="literal">ServerPreparedStatement.getBinding()</code> now
          checks if the statement is closed before attempting to
          reference the list of parameter bindings, to avoid throwing a
          <code class="literal">NullPointerException</code>.
        </p></li><li><p>
          <code class="literal">ResultSetMetaData</code> from
          <code class="literal">Statement.getGeneratedKeys()</code> caused a
          <code class="literal">NullPointerException</code> to be thrown whenever
          a method that required a connection reference was called. (<a href="http://bugs.mysql.com/13277" target="_top">Bug#13277</a>)
        </p></li><li><p>
          Backport of <code class="literal">Field</code> class,
          <code class="literal">ResultSetMetaData.getColumnClassName()</code>, and
          <code class="literal">ResultSet.getObject(int)</code> changes from 5.0
          branch to fix behavior surrounding <code class="literal">VARCHAR
          BINARY</code>/<code class="literal">VARBINARY</code> and related
          types.
        </p></li><li><p>
          Fixed <code class="literal">NullPointerException</code> when converting
          <code class="literal">catalog</code> parameter in many
          <code class="literal">DatabaseMetaDataMethods</code> to
          <code class="literal">byte[]</code>s (for the result set) when the
          parameter is <code class="literal">null</code>. (<code class="literal">null</code>
          isn't technically allowed by the JDBC specification, but we've
          historically allowed it).
        </p></li><li><p>
          Backport of <code class="literal">VAR[BINARY|CHAR] [BINARY]</code> types
          detection from 5.0 branch.
        </p></li><li><p>
          Read response in
          <code class="literal">MysqlIO.sendFileToServer()</code>, even if the
          local file can't be opened, otherwise next query issued will
          fail, because it's reading the response to the empty
          <code class="literal">LOAD DATA INFILE</code> packet sent to the server.
        </p></li><li><p>
          Workaround for <a href="http://bugs.mysql.com/13374" target="_top">Bug#13374</a>:
          <code class="literal">ResultSet.getStatement()</code> on closed result
          set returns <code class="literal">NULL</code> (as per JDBC 4.0 spec, but
          not backward-compatible). Set the connection property
          <code class="literal">retainStatementAfterResultSetClose</code> to
          <code class="literal">true</code> to be able to retrieve a
          <code class="literal">ResultSet</code>'s statement after the
          <code class="literal">ResultSet</code> has been closed via
          <code class="literal">.getStatement()</code> (the default is
          <code class="literal">false</code>, to be JDBC-compliant and to reduce
          the chance that code using JDBC leaks
          <code class="literal">Statement</code> instances).
        </p></li><li><p>
          URL configuration parameters don't allow
          ‘<code class="literal">&amp;</code>’ or
          ‘<code class="literal">=</code>’ in their values. The JDBC
          driver now parses configuration parameters as if they are
          encoded using the application/x-www-form-urlencoded format as
          specified by <code class="literal">java.net.URLDecoder</code>
          (<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLDecoder.html" target="_top">http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLDecoder.html</a>).
          (<a href="http://bugs.mysql.com/13453" target="_top">Bug#13453</a>)
        </p><p>
          If the ‘<code class="literal">%</code>’ character is present
          in a configuration property, it must now be represented as
          <code class="literal">%25</code>, which is the encoded form of
          ‘<code class="literal">%</code>’ when using
          application/x-www-form-urlencoded encoding.
        </p></li><li><p>
          The configuration property <code class="literal">sessionVariables</code>
          now allows you to specify variables that start with the
          ‘<code class="literal">@</code>’ sign.
        </p></li><li><p>
          When <code class="literal">gatherPerfMetrics</code> is enabled for
          servers older than 4.1.0, a
          <code class="literal">NullPointerException</code> is thrown from the
          constructor of <code class="literal">ResultSet</code> if the query
          doesn't use any tables. (<a href="http://bugs.mysql.com/13043" target="_top">Bug#13043</a>)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-10"></a>1.6.5. Changes in MySQL Connector/J 3.1.10-stable (23 June 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed connecting without a database specified raised an
          exception in <code class="literal">MysqlIO.changeDatabaseTo()</code>.
        </p></li><li><p>
          Initial implemention of <code class="literal">ParameterMetadata</code>
          for
          <code class="literal">PreparedStatement.getParameterMetadata()</code>.
          Only works fully for <code class="literal">CallableStatements</code>, as
          current server-side prepared statements return every parameter
          as a <code class="literal">VARCHAR</code> type.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-9"></a>1.6.6. Changes in MySQL Connector/J 3.1.9-stable (22 June 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Overhaul of character set configuration, everything now lives
          in a properties file.
        </p></li><li><p>
          Driver now correctly uses CP932 if available on the server for
          Windows-31J, CP932 and MS932 java encoding names, otherwise it
          resorts to SJIS, which is only a close approximation.
          Currently only MySQL-5.0.3 and newer (and MySQL-4.1.12 or .13,
          depending on when the character set gets backported) can
          reliably support any variant of CP932.
        </p></li><li><p>
          <code class="literal">com.mysql.jdbc.PreparedStatement.ParseInfo</code>
          does unnecessary call to <code class="literal">toCharArray()</code>.
          (<a href="http://bugs.mysql.com/9064" target="_top">Bug#9064</a>)
        </p></li><li><p>
          Memory leak in <code class="literal">ServerPreparedStatement</code> if
          <code class="literal">serverPrepare()</code> fails. (<a href="http://bugs.mysql.com/10144" target="_top">Bug#10144</a>)
        </p></li><li><p>
          Actually write manifest file to correct place so it ends up in
          the binary jar file.
        </p></li><li><p>
          Added <code class="literal">createDatabaseIfNotExist</code> property
          (default is <code class="literal">false</code>), which will cause the
          driver to ask the server to create the database specified in
          the URL if it doesn't exist. You must have the appropriate
          privileges for database creation for this to work.
        </p></li><li><p>
          Unsigned <code class="literal">SMALLINT</code> treated as signed for
          <code class="literal">ResultSet.getInt()</code>, fixed all cases for
          <code class="literal">UNSIGNED</code> integer values and server-side
          prepared statements, as well as
          <code class="literal">ResultSet.getObject()</code> for <code class="literal">UNSIGNED
          TINYINT</code>. (<a href="http://bugs.mysql.com/10156" target="_top">Bug#10156</a>)
        </p></li><li><p>
          Double quotes not recognized when parsing client-side prepared
          statements. (<a href="http://bugs.mysql.com/10155" target="_top">Bug#10155</a>)
        </p></li><li><p>
          Made <code class="literal">enableStreamingResults()</code> visible on
          <code class="literal">com.mysql.jdbc.jdbc2.optional.StatementWrapper</code>.
        </p></li><li><p>
          Made <code class="literal">ServerPreparedStatement.asSql()</code> work
          correctly so auto-explain functionality would work with
          server-side prepared statements.
        </p></li><li><p>
          Made JDBC2-compliant wrappers public in order to allow access
          to vendor extensions.
        </p></li><li><p>
          Cleaned up logging of profiler events, moved code to dump a
          profiler event as a string to
          <code class="literal">com.mysql.jdbc.log.LogUtils</code> so that third
          parties can use it.
        </p></li><li><p>
          <code class="literal">DatabaseMetaData.supportsMultipleOpenResults()</code>
          now returns <code class="literal">true</code>. The driver has supported
          this for some time, DBMD just missed that fact.
        </p></li><li><p>
          Driver doesn't support <code class="literal">{?=CALL(...)}</code> for
          calling stored functions. This involved adding support for
          function retrieval to
          <code class="literal">DatabaseMetaData.getProcedures()</code> and
          <code class="literal">getProcedureColumns()</code> as well. (<a href="http://bugs.mysql.com/10310" target="_top">Bug#10310</a>)
        </p></li><li><p>
          <code class="literal">SQLException</code> thrown when retrieving
          <code class="literal">YEAR(2)</code> with
          <code class="literal">ResultSet.getString()</code>. The driver will now
          always treat <code class="literal">YEAR</code> types as
          <code class="literal">java.sql.Dates</code> and return the correct
          values for <code class="literal">getString()</code>. Alternatively, the
          <code class="literal">yearIsDateType</code> connection property can be
          set to <code class="literal">false</code> and the values will be treated
          as <code class="literal">SHORT</code>s. (<a href="http://bugs.mysql.com/10485" target="_top">Bug#10485</a>)
        </p></li><li><p>
          The datatype returned for <code class="literal">TINYINT(1)</code>
          columns when <code class="literal">tinyInt1isBit=true</code> (the
          default) can be switched between
          <code class="literal">Types.BOOLEAN</code> and
          <code class="literal">Types.BIT</code> using the new configuration
          property <code class="literal">transformedBitIsBoolean</code>, which
          defaults to <code class="literal">false</code>. If set to
          <code class="literal">false</code> (the default),
          <code class="literal">DatabaseMetaData.getColumns()</code> and
          <code class="literal">ResultSetMetaData.getColumnType()</code> will
          return <code class="literal">Types.BOOLEAN</code> for
          <code class="literal">TINYINT(1)</code> columns. If
          <code class="literal">true</code>, <code class="literal">Types.BOOLEAN</code> will
          be returned instead. Regardless of this configuration
          property, if <code class="literal">tinyInt1isBit</code> is enabled,
          columns with the type <code class="literal">TINYINT(1)</code> will be
          returned as <code class="literal">java.lang.Boolean</code> instances
          from <code class="literal">ResultSet.getObject(...)</code>, and
          <code class="literal">ResultSetMetaData.getColumnClassName()</code> will
          return <code class="literal">java.lang.Boolean</code>.
        </p></li><li><p>
          <code class="literal">SQLException</code> is thrown when using property
          <code class="literal">characterSetResults</code> with
          <code class="literal">cp932</code> or <code class="literal">eucjpms</code>. (<a href="http://bugs.mysql.com/10496" target="_top">Bug#10496</a>)
        </p></li><li><p>
          Reorganized directory layout. Sources now are in
          <code class="filename">src</code> folder. Don't pollute parent
          directory when building, now output goes to
          <code class="filename">./build</code>, distribution goes to
          <code class="filename">./dist</code>.
        </p></li><li><p>
          Added support/bug hunting feature that generates
          <code class="filename">.sql</code> test scripts to
          <code class="literal">STDERR</code> when
          <code class="literal">autoGenerateTestcaseScript</code> is set to
          <code class="literal">true</code>.
        </p></li><li><p>
          0-length streams not sent to server when using server-side
          prepared statements. (<a href="http://bugs.mysql.com/10850" target="_top">Bug#10850</a>)
        </p></li><li><p>
          Setting <code class="literal">cachePrepStmts=true</code> now causes the
          <code class="literal">Connection</code> to also cache the check the
          driver performs to determine if a prepared statement can be
          server-side or not, as well as caches server-side prepared
          statements for the lifetime of a connection. As before, the
          <code class="literal">prepStmtCacheSize</code> parameter controls the
          size of these caches.
        </p></li><li><p>
          Try to handle <code class="literal">OutOfMemoryErrors</code> more
          gracefully. Although not much can be done, they will in most
          cases close the connection they happened on so that further
          operations don't run into a connection in some unknown state.
          When an OOM has happened, any further operations on the
          connection will fail with a “<span class="quote">Connection closed</span>”
          exception that will also list the OOM exception as the reason
          for the implicit connection close event.
        </p></li><li><p>
          Don't send <code class="literal">COM_RESET_STMT</code> for each
          execution of a server-side prepared statement if it isn't
          required.
        </p></li><li><p>
          Driver detects if you're running MySQL-5.0.7 or later, and
          does not scan for <code class="literal">LIMIT ?[,?]</code> in statements
          being prepared, as the server supports those types of queries
          now.
        </p></li><li><p>
          <code class="literal">VARBINARY</code> data corrupted when using
          server-side prepared statements and
          <code class="literal">ResultSet.getBytes()</code>. (<a href="http://bugs.mysql.com/11115" target="_top">Bug#11115</a>)
        </p></li><li><p>
          <code class="literal">Connection.setCatalog()</code> is now aware of the
          <code class="literal">useLocalSessionState</code> configuration
          property, which when set to <code class="literal">true</code> will
          prevent the driver from sending <code class="literal">USE ...</code> to
          the server if the requested catalog is the same as the current
          catalog.
        </p></li><li><p>
          Added the following configuration bundles, use one or many via
          the <code class="literal">useConfigs</code> configuration property:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">maxPerformance</code> — maximum
              performance without being reckless
            </p></li><li><p>
              <code class="literal">solarisMaxPerformance</code> — maximum
              performance for Solaris, avoids syscalls where it can
            </p></li><li><p>
              <code class="literal">3-0-Compat</code> — Compatibility with
              Connector/J 3.0.x functionality
            </p></li></ul></div></li><li><p>
          Added <code class="literal">maintainTimeStats</code> configuration
          property (defaults to <code class="literal">true</code>), which tells
          the driver whether or not to keep track of the last query time
          and the last successful packet sent to the server's time. If
          set to <code class="literal">false</code>, removes two syscalls per
          query.
        </p></li><li><p>
          <code class="literal">autoReconnect</code> ping causes exception on
          connection startup. (<a href="http://bugs.mysql.com/11259" target="_top">Bug#11259</a>)
        </p></li><li><p>
          Connector/J dumping query into <code class="literal">SQLException</code>
          twice. (<a href="http://bugs.mysql.com/11360" target="_top">Bug#11360</a>)
        </p></li><li><p>
          Fixed <code class="literal">PreparedStatement.setClob()</code> not
          accepting <code class="literal">null</code> as a parameter.
        </p></li><li><p>
          Production package doesn't include JBoss integration classes.
          (<a href="http://bugs.mysql.com/11411" target="_top">Bug#11411</a>)
        </p></li><li><p>
          Removed nonsensical “<span class="quote">costly type conversion</span>”
          warnings when using usage advisor.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-8"></a>1.6.7. Changes in MySQL Connector/J 3.1.8-stable (14 April 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed <code class="literal">DatabaseMetaData.getTables()</code>
          returning views when they were not asked for as one of the
          requested table types.
        </p></li><li><p>
          Added support for new precision-math
          <code class="literal">DECIMAL</code> type in MySQL 5.0.3 and up.
        </p></li><li><p>
          Fixed <code class="literal">ResultSet.getTime()</code> on a
          <code class="literal">NULL</code> value for server-side prepared
          statements throws NPE.
        </p></li><li><p>
          Made <code class="literal">Connection.ping()</code> a public method.
        </p></li><li><p>
          <code class="literal">DATE_FORMAT()</code> queries returned as
          <code class="literal">BLOB</code>s from <code class="literal">getObject()</code>.
          (<a href="http://bugs.mysql.com/8868" target="_top">Bug#8868</a>)
        </p></li><li><p>
          <code class="literal">ServerPreparedStatements</code> now correctly
          “<span class="quote">stream</span>”
          <code class="literal">BLOB</code>/<code class="literal">CLOB</code> data to the
          server. You can configure the threshold chunk size using the
          JDBC URL property <code class="literal">blobSendChunkSize</code> (the
          default is 1MB).
        </p></li><li><p>
          <code class="literal">BlobFromLocator</code> now uses correct identifier
          quoting when generating prepared statements.
        </p></li><li><p>
          Server-side session variables can be preset at connection time
          by passing them as a comma-delimited list for the connection
          property <code class="literal">sessionVariables</code>.
        </p></li><li><p>
          Fixed regression in <code class="literal">ping()</code> for users using
          <code class="literal">autoReconnect=true</code>.
        </p></li><li><p>
          <code class="literal">PreparedStatement.addBatch()</code> doesn't work
          with server-side prepared statements and streaming
          <code class="literal">BINARY</code> data. (<a href="http://bugs.mysql.com/9040" target="_top">Bug#9040</a>)
        </p></li><li><p>
          <code class="literal">DBMD.supportsMixedCase*Identifiers()</code>
          returns wrong value on servers running on case-sensitive
          filesystems. (<a href="http://bugs.mysql.com/8800" target="_top">Bug#8800</a>)
        </p></li><li><p>
          Cannot use <code class="literal">UTF-8</code> for characterSetResults
          configuration property. (<a href="http://bugs.mysql.com/9206" target="_top">Bug#9206</a>)
        </p></li><li><p>
          A continuation of <a href="http://bugs.mysql.com/8868" target="_top">Bug#8868</a>, where functions used in queries
          that should return non-string types when resolved by temporary
          tables suddenly become opaque binary strings (work-around for
          server limitation). Also fixed fields with type of
          <code class="literal">CHAR(n) CHARACTER SET BINARY</code> to return
          correct/matching classes for
          <code class="literal">RSMD.getColumnClassName()</code> and
          <code class="literal">ResultSet.getObject()</code>. (<a href="http://bugs.mysql.com/9236" target="_top">Bug#9236</a>)
        </p></li><li><p>
          <code class="literal">DBMD.supportsResultSetConcurrency()</code> not
          returning <code class="literal">true</code> for forward-only/read-only
          result sets (we obviously support this). (<a href="http://bugs.mysql.com/8792" target="_top">Bug#8792</a>)
        </p></li><li><p>
          <code class="literal">DATA_TYPE</code> column from
          <code class="literal">DBMD.getBestRowIdentifier()</code> causes
          <code class="literal">ArrayIndexOutOfBoundsException</code> when
          accessed (and in fact, didn't return any value). (<a href="http://bugs.mysql.com/8803" target="_top">Bug#8803</a>)
        </p></li><li><p>
          Check for empty strings (<code class="literal">''</code>) when
          converting <code class="literal">CHAR</code>/<code class="literal">VARCHAR</code>
          column data to numbers, throw exception if
          <code class="literal">emptyStringsConvertToZero</code> configuration
          property is set to <code class="literal">false</code> (for
          backward-compatibility with 3.0, it is now set to
          <code class="literal">true</code> by default, but will most likely
          default to <code class="literal">false</code> in 3.2).
        </p></li><li><p>
          <code class="literal">PreparedStatement.getMetaData()</code> inserts
          blank row in database under certain conditions when not using
          server-side prepared statements. (<a href="http://bugs.mysql.com/9320" target="_top">Bug#9320</a>)
        </p></li><li><p>
          <code class="literal">Connection.canHandleAsPreparedStatement()</code>
          now makes “<span class="quote">best effort</span>” to distinguish
          <code class="literal">LIMIT</code> clauses with placeholders in them
          from ones without in order to have fewer false positives when
          generating work-arounds for statements the server cannot
          currently handle as server-side prepared statements.
        </p></li><li><p>
          Fixed <code class="filename">build.xml</code> to not compile
          <code class="literal">log4j</code> logging if <code class="literal">log4j</code>
          not available.
        </p></li><li><p>
          Added support for the c3p0 connection pool's
          (<a href="http://c3p0.sf.net/" target="_top">http://c3p0.sf.net/</a>) validation/connection
          checker interface which uses the lightweight
          <code class="literal">COM_PING</code> call to the server if available.
          To use it, configure your c3p0 connection pool's
          <code class="literal">connectionTesterClassName</code> property to use
          <code class="literal">com.mysql.jdbc.integration.c3p0.MysqlConnectionTester</code>.
        </p></li><li><p>
          Better detection of <code class="literal">LIMIT</code> inside/outside of
          quoted strings so that the driver can more correctly determine
          whether a prepared statement can be prepared on the server or
          not.
        </p></li><li><p>
          Stored procedures with same name in different databases
          confuse the driver when it tries to determine parameter
          counts/types. (<a href="http://bugs.mysql.com/9319" target="_top">Bug#9319</a>)
        </p></li><li><p>
          Added finalizers to <code class="literal">ResultSet</code> and
          <code class="literal">Statement</code> implementations to be JDBC
          spec-compliant, which requires that if not explicitly closed,
          these resources should be closed upon garbage collection.
        </p></li><li><p>
          Stored procedures with <code class="literal">DECIMAL</code> parameters
          with storage specifications that contained
          ‘<code class="literal">,</code>’ in them would fail. (<a href="http://bugs.mysql.com/9682" target="_top">Bug#9682</a>)
        </p></li><li><p>
          <code class="literal">PreparedStatement.setObject(int, Object, int type,
          int scale)</code> now uses scale value for
          <code class="literal">BigDecimal</code> instances.
        </p></li><li><p>
          <code class="literal">Statement.getMoreResults()</code> could throw NPE
          when existing result set was <code class="literal">.close()</code>d.
          (<a href="http://bugs.mysql.com/9704" target="_top">Bug#9704</a>)
        </p></li><li><p>
          The performance metrics feature now gathers information about
          number of tables referenced in a SELECT.
        </p></li><li><p>
          The logging system is now automatically configured. If the
          value has been set by the user, via the URL property
          <code class="literal">logger</code> or the system property
          <code class="literal">com.mysql.jdbc.logger</code>, then use that,
          otherwise, autodetect it using the following steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Log4j, if it's available,
            </p></li><li><p>
              Then JDK1.4 logging,
            </p></li><li><p>
              Then fallback to our <code class="literal">STDERR</code> logging.
            </p></li></ol></div></li><li><p>
          <code class="literal">DBMD.getTables()</code> shouldn't return tables if
          views are asked for, even if the database version doesn't
          support views. (<a href="http://bugs.mysql.com/9778" target="_top">Bug#9778</a>)
        </p></li><li><p>
          Fixed driver not returning <code class="literal">true</code> for
          <code class="literal">-1</code> when
          <code class="literal">ResultSet.getBoolean()</code> was called on result
          sets returned from server-side prepared statements.
        </p></li><li><p>
          Added a <code class="filename">Manifest.MF</code> file with
          implementation information to the <code class="filename">.jar</code>
          file.
        </p></li><li><p>
          More tests in <code class="literal">Field.isOpaqueBinary()</code> to
          distinguish opaque binary (that is, fields with type
          <code class="literal">CHAR(n)</code> and <code class="literal">CHARACTER SET
          BINARY</code>) from output of various scalar and aggregate
          functions that return strings.
        </p></li><li><p>
          Should accept <code class="literal">null</code> for catalog (meaning use
          current) in DBMD methods, even though it's not JDBC-compliant
          for legacy's sake. Disable by setting connection property
          <code class="literal">nullCatalogMeansCurrent</code> to
          <code class="literal">false</code> (which will be the default value in
          C/J 3.2.x). (<a href="http://bugs.mysql.com/9917" target="_top">Bug#9917</a>)
        </p></li><li><p>
          Should accept <code class="literal">null</code> for name patterns in
          DBMD (meaning ‘<code class="literal">%</code>’), even though
          it isn't JDBC compliant, for legacy's sake. Disable by setting
          connection property
          <code class="literal">nullNamePatternMatchesAll</code> to
          <code class="literal">false</code> (which will be the default value in
          C/J 3.2.x). (<a href="http://bugs.mysql.com/9769" target="_top">Bug#9769</a>)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-7"></a>1.6.8. Changes in MySQL Connector/J 3.1.7-stable (18 February 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Timestamp key column data needed <code class="literal">_binary</code>
          stripped for
          <code class="literal">UpdatableResultSet.refreshRow()</code>. (<a href="http://bugs.mysql.com/7686" target="_top">Bug#7686</a>)
        </p></li><li><p>
          Timestamps converted incorrectly to strings with server-side
          prepared statements and updatable result sets. (<a href="http://bugs.mysql.com/7715" target="_top">Bug#7715</a>)
        </p></li><li><p>
          Detect new <code class="literal">sql_mode</code> variable in string form
          (it used to be integer) and adjust quoting method for strings
          appropriately.
        </p></li><li><p>
          Added <code class="literal">holdResultsOpenOverStatementClose</code>
          property (default is <code class="literal">false</code>), that keeps
          result sets open over statement.close() or new execution on
          same statement (suggested by Kevin Burton).
        </p></li><li><p>
          Infinite recursion when “<span class="quote">falling back</span>” to master
          in failover configuration. (<a href="http://bugs.mysql.com/7952" target="_top">Bug#7952</a>)
        </p></li><li><p>
          Disable multi-statements (if enabled) for MySQL-4.1 versions
          prior to version 4.1.10 if the query cache is enabled, as the
          server returns wrong results in this configuration.
        </p></li><li><p>
          Fixed duplicated code in
          <code class="literal">configureClientCharset()</code> that prevented
          <code class="literal">useOldUTF8Behavior=true</code> from working
          properly.
        </p></li><li><p>
          Removed <code class="literal">dontUnpackBinaryResults</code>
          functionality, the driver now always stores results from
          server-side prepared statements as is from the server and
          unpacks them on demand.
        </p></li><li><p>
          Emulated locators corrupt binary data when using server-side
          prepared statements. (<a href="http://bugs.mysql.com/8096" target="_top">Bug#8096</a>)
        </p></li><li><p>
          Fixed synchronization issue with
          <code class="literal">ServerPreparedStatement.serverPrepare()</code>
          that could cause deadlocks/crashes if connection was shared
          between threads.
        </p></li><li><p>
          By default, the driver now scans SQL you are preparing via all
          variants of <code class="literal">Connection.prepareStatement()</code>
          to determine if it is a supported type of statement to prepare
          on the server side, and if it is not supported by the server,
          it instead prepares it as a client-side emulated prepared
          statement. You can disable this by passing
          <code class="literal">emulateUnsupportedPstmts=false</code> in your JDBC
          URL. (<a href="http://bugs.mysql.com/4718" target="_top">Bug#4718</a>)
        </p></li><li><p>
          Remove <code class="literal">_binary</code> introducer from parameters
          used as in/out parameters in
          <code class="literal">CallableStatement</code>.
        </p></li><li><p>
          Always return <code class="literal">byte[]</code>s for output parameters
          registered as <code class="literal">*BINARY</code>.
        </p></li><li><p>
          Send correct value for “<span class="quote">boolean</span>”
          <code class="literal">true</code> to server for
          <code class="literal">PreparedStatement.setObject(n, "true",
          Types.BIT)</code>.
        </p></li><li><p>
          Fixed bug with Connection not caching statements from
          <code class="literal">prepareStatement()</code> when the statement
          wasn't a server-side prepared statement.
        </p></li><li><p>
          Choose correct “<span class="quote">direction</span>” to apply time
          adjustments when both client and server are in GMT time zone
          when using <code class="literal">ResultSet.get(..., cal)</code> and
          <code class="literal">PreparedStatement.set(...., cal)</code>.
        </p></li><li><p>
          Added <code class="literal">dontTrackOpenResources</code> option
          (default is <code class="literal">false</code>, to be JDBC compliant),
          which helps with memory use for non-well-behaved apps (that
          is, applications that don't close <code class="literal">Statement</code>
          objects when they should).
        </p></li><li><p>
          <code class="literal">ResultSet.getString()</code> doesn't maintain
          format stored on server, bug fix only enabled when
          <code class="literal">noDatetimeStringSync</code> property is set to
          <code class="literal">true</code> (the default is
          <code class="literal">false</code>). (<a href="http://bugs.mysql.com/8428" target="_top">Bug#8428</a>)
        </p></li><li><p>
          Fixed NPE in <code class="literal">ResultSet.realClose()</code> when
          using usage advisor and result set was already closed.
        </p></li><li><p>
          <code class="literal">PreparedStatements</code> not creating streaming
          result sets. (<a href="http://bugs.mysql.com/8478" target="_top">Bug#8478</a>)
        </p></li><li><p>
          Don't pass <code class="literal">NULL</code> to
          <code class="literal">String.valueOf()</code> in
          <code class="literal">ResultSet.getNativeConvertToString()</code>, as it
          stringifies it (that is, returns <code class="literal">null</code>),
          which is not correct for the method in question.
        </p></li><li><p>
          <code class="literal">ResultSet.getBigDecimal()</code> throws exception
          when rounding would need to occur to set scale. The driver now
          chooses a rounding mode of “<span class="quote">half up</span>” if
          non-rounding <code class="literal">BigDecimal.setScale()</code> fails.
          (<a href="http://bugs.mysql.com/8484" target="_top">Bug#8484</a>)
        </p></li><li><p>
          Added <code class="literal">useLocalSessionState</code> configuration
          property, when set to <code class="literal">true</code> the JDBC driver
          trusts that the application is well-behaved and only sets
          autocommit and transaction isolation levels using the methods
          provided on <code class="literal">java.sql.Connection</code>, and
          therefore can manipulate these values in many cases without
          incurring round-trips to the database server.
        </p></li><li><p>
          Added <code class="literal">enableStreamingResults()</code> to
          <code class="literal">Statement</code> for connection pool
          implementations that check
          <code class="literal">Statement.setFetchSize()</code> for
          specification-compliant values. Call
          <code class="literal">Statement.setFetchSize(&gt;=0)</code> to disable
          the streaming results for that statement.
        </p></li><li><p>
          Added support for <code class="literal">BIT</code> type in MySQL-5.0.3.
          The driver will treat <code class="literal">BIT(1-8)</code> as the JDBC
          standard <code class="literal">BIT</code> type (which maps to
          <code class="literal">java.lang.Boolean</code>), as the server does not
          currently send enough information to determine the size of a
          bitfield when &lt; 9 bits are declared.
          <code class="literal">BIT(&gt;9)</code> will be treated as
          <code class="literal">VARBINARY</code>, and will return
          <code class="literal">byte[]</code> when <code class="literal">getObject()</code>
          is called.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-6"></a>1.6.9. Changes in MySQL Connector/J 3.1.6-stable (23 December 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed hang on <code class="literal">SocketInputStream.read()</code> with
          <code class="literal">Statement.setMaxRows()</code> and multiple result
          sets when driver has to truncate result set directly, rather
          than tacking a <code class="literal">LIMIT
          <em class="replaceable"><code>n</code></em></code> on the end of it.
        </p></li><li><p>
          <code class="literal">DBMD.getProcedures()</code> doesn't respect
          catalog parameter. (<a href="http://bugs.mysql.com/7026" target="_top">Bug#7026</a>)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-5"></a>1.6.10. Changes in MySQL Connector/J 3.1.5-gamma (02 December 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fix comparisons made between string constants and dynamic
          strings that are converted with either
          <code class="literal">toUpperCase()</code> or
          <code class="literal">toLowerCase()</code> to use
          <code class="literal">Locale.ENGLISH</code>, as some locales
          “<span class="quote">override</span>” case rules for English. Also use
          <code class="literal">StringUtils.indexOfIgnoreCase()</code> instead of
          <code class="literal">.toUpperCase().indexOf()</code>, avoids creating a
          very short-lived transient <code class="literal">String</code> instance.
        </p></li><li><p>
          Server-side prepared statements did not honor
          <code class="literal">zeroDateTimeBehavior</code> property, and would
          cause class-cast exceptions when using
          <code class="literal">ResultSet.getObject()</code>, as the all-zero
          string was always returned. (<a href="http://bugs.mysql.com/5235" target="_top">Bug#5235</a>)
        </p></li><li><p>
          Fixed batched updates with server prepared statements weren't
          looking if the types had changed for a given batched set of
          parameters compared to the previous set, causing the server to
          return the error “<span class="quote">Wrong arguments to
          mysql_stmt_execute()</span>”.
        </p></li><li><p>
          Handle case when string representation of timestamp contains
          trailing ‘<code class="literal">.</code>’ with no numbers
          following it.
        </p></li><li><p>
          Inefficient detection of pre-existing string instances in
          <code class="literal">ResultSet.getNativeString()</code>. (<a href="http://bugs.mysql.com/5706" target="_top">Bug#5706</a>)
        </p></li><li><p>
          Don't throw exceptions for
          <code class="literal">Connection.releaseSavepoint()</code>.
        </p></li><li><p>
          Use a per-session <code class="literal">Calendar</code> instance by
          default when decoding dates from
          <code class="literal">ServerPreparedStatements</code> (set to old, less
          performant behavior by setting property
          <code class="literal">dynamicCalendars=true</code>).
        </p></li><li><p>
          Added experimental configuration property
          <code class="literal">dontUnpackBinaryResults</code>, which delays
          unpacking binary result set values until they're asked for,
          and only creates object instances for non-numerical values (it
          is set to <code class="literal">false</code> by default). For some
          usecase/jvm combinations, this is friendlier on the garbage
          collector.
        </p></li><li><p>
          <code class="literal">UNSIGNED BIGINT</code> unpacked incorrectly from
          server-side prepared statement result sets. (<a href="http://bugs.mysql.com/5729" target="_top">Bug#5729</a>)
        </p></li><li><p>
          <code class="literal">ServerSidePreparedStatement</code> allocating
          short-lived objects unnecessarily. (<a href="http://bugs.mysql.com/6225" target="_top">Bug#6225</a>)
        </p></li><li><p>
          Removed unwanted new <code class="literal">Throwable()</code> in
          <code class="literal">ResultSet</code> constructor due to bad merge
          (caused a new object instance that was never used for every
          result set created). Found while profiling for <a href="http://bugs.mysql.com/6359" target="_top">Bug#6359</a>.
        </p></li><li><p>
          Fixed too-early creation of <code class="literal">StringBuffer</code> in
          <code class="literal">EscapeProcessor.escapeSQL()</code>, also return
          <code class="literal">String</code> when escaping not needed (to avoid
          unnecessary object allocations). Found while profiling for <a href="http://bugs.mysql.com/6359" target="_top">Bug#6359</a>.
        </p></li><li><p>
          Use null-safe-equals for key comparisons in updatable result
          sets.
        </p></li><li><p>
          <code class="literal">SUM()</code> on <code class="literal">DECIMAL</code> with
          server-side prepared statement ignores scale if zero-padding
          is needed (this ends up being due to conversion to
          <code class="literal">DOUBLE</code> by server, which when converted to a
          string to parse into <code class="literal">BigDecimal</code>, loses all
          “<span class="quote">padding</span>” zeros). (<a href="http://bugs.mysql.com/6537" target="_top">Bug#6537</a>)
        </p></li><li><p>
          Use
          <code class="literal">DatabaseMetaData.getIdentifierQuoteString()</code>
          when building DBMD queries.
        </p></li><li><p>
          Use 1MB packet for sending file for <code class="literal">LOAD DATA LOCAL
          INFILE</code> if that is &lt;
          <code class="literal">max_allowed_packet</code> on server.
        </p></li><li><p>
          <code class="literal">ResultSetMetaData.getColumnDisplaySize()</code>
          returns incorrect values for multi-byte charsets. (<a href="http://bugs.mysql.com/6399" target="_top">Bug#6399</a>)
        </p></li><li><p>
          Make auto-deserialization of
          <code class="literal">java.lang.Objects</code> stored in
          <code class="literal">BLOB</code> columns configurable via
          <code class="literal">autoDeserialize</code> property (defaults to
          <code class="literal">false</code>).
        </p></li><li><p>
          Re-work <code class="literal">Field.isOpaqueBinary()</code> to detect
          <code class="literal">CHAR(<em class="replaceable"><code>n</code></em>) CHARACTER SET
          BINARY</code> to support fixed-length binary fields for
          <code class="literal">ResultSet.getObject()</code>.
        </p></li><li><p>
          Use our own implementation of buffered input streams to get
          around blocking behavior of
          <code class="literal">java.io.BufferedInputStream</code>. Disable this
          with <code class="literal">useReadAheadInput=false</code>.
        </p></li><li><p>
          Failing to connect to the server when one of the addresses for
          the given host name is IPV6 (which the server does not yet
          bind on). The driver now loops through
          <span class="emphasis"><em>all</em></span> IP addresses for a given host, and
          stops on the first one that <code class="literal">accepts()</code> a
          <code class="literal">socket.connect()</code>. (<a href="http://bugs.mysql.com/6348" target="_top">Bug#6348</a>)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-4"></a>1.6.11. Changes in MySQL Connector/J 3.1.4-beta (04 September 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Connector/J 3.1.3 beta does not handle integers correctly
          (caused by changes to support unsigned reads in
          <code class="literal">Buffer.readInt()</code> -&gt;
          <code class="literal">Buffer.readShort()</code>). (<a href="http://bugs.mysql.com/4510" target="_top">Bug#4510</a>)
        </p></li><li><p>
          Added support in
          <code class="literal">DatabaseMetaData.getTables()</code> and
          <code class="literal">getTableTypes()</code> for views, which are now
          available in MySQL server 5.0.x.
        </p></li><li><p>
          <code class="literal">ServerPreparedStatement.execute*()</code>
          sometimes threw
          <code class="literal">ArrayIndexOutOfBoundsException</code> when
          unpacking field metadata. (<a href="http://bugs.mysql.com/4642" target="_top">Bug#4642</a>)
        </p></li><li><p>
          Optimized integer number parsing, enable “<span class="quote">old</span>”
          slower integer parsing using JDK classes via
          <code class="literal">useFastIntParsing=false</code> property.
        </p></li><li><p>
          Added <code class="literal">useOnlyServerErrorMessages</code> property,
          which causes message text in exceptions generated by the
          server to only contain the text sent by the server (as opposed
          to the SQLState's “<span class="quote">standard</span>” description,
          followed by the server's error message). This property is set
          to <code class="literal">true</code> by default.
        </p></li><li><p>
          <code class="literal">ResultSet.wasNull()</code> does not work for
          primatives if a previous <code class="literal">null</code> was returned.
          (<a href="http://bugs.mysql.com/4689" target="_top">Bug#4689</a>)
        </p></li><li><p>
          Track packet sequence numbers if
          <code class="literal">enablePacketDebug=true</code>, and throw an
          exception if packets received out-of-order.
        </p></li><li><p>
          <code class="literal">ResultSet.getObject()</code> returns wrong type
          for strings when using prepared statements. (<a href="http://bugs.mysql.com/4482" target="_top">Bug#4482</a>)
        </p></li><li><p>
          Calling <code class="literal">MysqlPooledConnection.close()</code> twice
          (even though an application error), caused NPE. Fixed.
        </p></li><li><p>
          <code class="literal">ServerPreparedStatements</code> dealing with
          return of <code class="literal">DECIMAL</code> type don't work. (<a href="http://bugs.mysql.com/5012" target="_top">Bug#5012</a>)
        </p></li><li><p>
          <code class="literal">ResultSet.getObject()</code> doesn't return type
          <code class="literal">Boolean</code> for pseudo-bit types from prepared
          statements on 4.1.x (shortcut for avoiding extra type
          conversion when using binary-encoded result sets obscured test
          in <code class="literal">getObject()</code> for “<span class="quote">pseudo</span>”
          bit type). (<a href="http://bugs.mysql.com/5032" target="_top">Bug#5032</a>)
        </p></li><li><p>
          You can now use URLs in <code class="literal">LOAD DATA LOCAL
          INFILE</code> statements, and the driver will use Java's
          built-in handlers for retreiving the data and sending it to
          the server. This feature is not enabled by default, you must
          set the <code class="literal">allowUrlInLocalInfile</code> connection
          property to <code class="literal">true</code>.
        </p></li><li><p>
          The driver is more strict about truncation of numerics on
          <code class="literal">ResultSet.get*()</code>, and will throw an
          <code class="literal">SQLException</code> when truncation is detected.
          You can disable this by setting
          <code class="literal">jdbcCompliantTruncation</code> to
          <code class="literal">false</code> (it is enabled by default, as this
          functionality is required for JDBC compliance).
        </p></li><li><p>
          Added three ways to deal with all-zero datetimes when reading
          them from a <code class="literal">ResultSet</code>:
          <code class="literal">exception</code> (the default), which throws an
          <code class="literal">SQLException</code> with an SQLState of
          <code class="literal">S1009</code>; <code class="literal">convertToNull</code>,
          which returns <code class="literal">NULL</code> instead of the date; and
          <code class="literal">round</code>, which rounds the date to the nearest
          closest value which is <code class="literal">'0001-01-01'</code>.
        </p></li><li><p>
          Fixed <code class="literal">ServerPreparedStatement</code> to read
          prepared statement metadata off the wire, even though it's
          currently a placeholder instead of using
          <code class="literal">MysqlIO.clearInputStream()</code> which didn't
          work at various times because data wasn't available to read
          from the server yet. This fixes sporadic errors users were
          having with <code class="literal">ServerPreparedStatements</code>
          throwing <code class="literal">ArrayIndexOutOfBoundExceptions</code>.
        </p></li><li><p>
          Use <code class="literal">com.mysql.jdbc.Message</code>'s classloader
          when loading resource bundle, should fix sporadic issues when
          the caller's classloader can't locate the resource bundle.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-3"></a>1.6.12. Changes in MySQL Connector/J 3.1.3-beta (07 July 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Mangle output parameter names for
          <code class="literal">CallableStatements</code> so they will not clash
          with user variable names.
        </p></li><li><p>
          Added support for <code class="literal">INOUT</code> parameters in
          <code class="literal">CallableStatements</code>.
        </p></li><li><p>
          Null bitmask sent for server-side prepared statements was
          incorrect. (<a href="http://bugs.mysql.com/4119" target="_top">Bug#4119</a>)
        </p></li><li><p>
          Use SQL Standard SQL states by default, unless
          <code class="literal">useSqlStateCodes</code> property is set to
          <code class="literal">false</code>.
        </p></li><li><p>
          Added packet debuging code (see the
          <code class="literal">enablePacketDebug</code> property documentation).
        </p></li><li><p>
          Added constants for MySQL error numbers (publicly accessible,
          see <code class="literal">com.mysql.jdbc.MysqlErrorNumbers</code>), and
          the ability to generate the mappings of vendor error codes to
          SQLStates that the driver uses (for documentation purposes).
        </p></li><li><p>
          Externalized more messages (on-going effort).
        </p></li><li><p>
          Error in retrieval of <code class="literal">mediumint</code> column with
          prepared statements and binary protocol. (<a href="http://bugs.mysql.com/4311" target="_top">Bug#4311</a>)
        </p></li><li><p>
          Support new time zone variables in MySQL-4.1.3 when
          <code class="literal">useTimezone=true</code>.
        </p></li><li><p>
          Support for unsigned numerics as return types from prepared
          statements. This also causes a change in
          <code class="literal">ResultSet.getObject()</code> for the
          <code class="literal">bigint unsigned</code> type, which used to return
          <code class="literal">BigDecimal</code> instances, it now returns
          instances of <code class="literal">java.lang.BigInteger</code>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-2"></a>1.6.13. Changes in MySQL Connector/J 3.1.2-alpha (09 June 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed stored procedure parameter parsing info when size was
          specified for a parameter (for example,
          <code class="literal">char()</code>, <code class="literal">varchar()</code>).
        </p></li><li><p>
          Enabled callable statement caching via
          <code class="literal">cacheCallableStmts</code> property.
        </p></li><li><p>
          Fixed case when no output parameters specified for a stored
          procedure caused a bogus query to be issued to retrieve out
          parameters, leading to a syntax error from the server.
        </p></li><li><p>
          Fixed case when no parameters could cause a
          <code class="literal">NullPointerException</code> in
          <code class="literal">CallableStatement.setOutputParameters()</code>.
        </p></li><li><p>
          Removed wrapping of exceptions in
          <code class="literal">MysqlIO.changeUser()</code>.
        </p></li><li><p>
          Fixed sending of split packets for large queries, enabled nio
          ability to send large packets as well.
        </p></li><li><p>
          Added <code class="literal">.toString()</code> functionality to
          <code class="literal">ServerPreparedStatement</code>, which should help
          if you're trying to debug a query that is a prepared statement
          (it shows SQL as the server would process).
        </p></li><li><p>
          Added <code class="literal">gatherPerformanceMetrics</code> property,
          along with properties to control when/where this info gets
          logged (see docs for more info).
        </p></li><li><p>
          <code class="literal">ServerPreparedStatements</code> weren't actually
          de-allocating server-side resources when
          <code class="literal">.close()</code> was called.
        </p></li><li><p>
          Added <code class="literal">logSlowQueries</code> property, along with
          <code class="literal">slowQueriesThresholdMillis</code> property to
          control when a query should be considered “<span class="quote">slow.</span>”
        </p></li><li><p>
          Correctly map output parameters to position given in
          <code class="literal">prepareCall()</code> versus. order implied during
          <code class="literal">registerOutParameter()</code>. (<a href="http://bugs.mysql.com/3146" target="_top">Bug#3146</a>)
        </p></li><li><p>
          Correctly detect initial character set for servers &gt;=
          4.1.0.
        </p></li><li><p>
          Cleaned up detection of server properties.
        </p></li><li><p>
          Support placeholder for parameter metadata for server &gt;=
          4.1.2.
        </p></li><li><p>
          <code class="literal">getProcedures()</code> does not return any
          procedures in result set. (<a href="http://bugs.mysql.com/3539" target="_top">Bug#3539</a>)
        </p></li><li><p>
          <code class="literal">getProcedureColumns()</code> doesn't work with
          wildcards for procedure name. (<a href="http://bugs.mysql.com/3540" target="_top">Bug#3540</a>)
        </p></li><li><p>
          <code class="literal">DBMD.getSQLStateType()</code> returns incorrect
          value. (<a href="http://bugs.mysql.com/3520" target="_top">Bug#3520</a>)
        </p></li><li><p>
          Added <code class="literal">connectionCollation</code> property to cause
          driver to issue <code class="literal">set
          collation_connection=...</code> query on connection init if
          default collation for given charset is not appropriate.
        </p></li><li><p>
          Fixed <code class="literal">DatabaseMetaData.getProcedures()</code> when
          run on MySQL-5.0.0 (output of <code class="literal">SHOW PROCEDURE
          STATUS</code> changed between 5.0.0 and 5.0.1.
        </p></li><li><p>
          <code class="literal">getWarnings()</code> returns
          <code class="literal">SQLWarning</code> instead of
          <code class="literal">DataTruncation</code>. (<a href="http://bugs.mysql.com/3804" target="_top">Bug#3804</a>)
        </p></li><li><p>
          Don't enable server-side prepared statements for server
          version 5.0.0 or 5.0.1, as they aren't compatible with the
          '4.1.2+' style that the driver uses (the driver expects
          information to come back that isn't there, so it hangs).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-1"></a>1.6.14. Changes in MySQL Connector/J 3.1.1-alpha (14 February 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed bug with <code class="literal">UpdatableResultSets</code> not
          using client-side prepared statements.
        </p></li><li><p>
          Fixed character encoding issues when converting bytes to ASCII
          when MySQL doesn't provide the character set, and the JVM is
          set to a multi-byte encoding (usually affecting retrieval of
          numeric values).
        </p></li><li><p>
          Unpack “<span class="quote">unknown</span>” data types from server prepared
          statements as <code class="literal">Strings</code>.
        </p></li><li><p>
          Implemented long data (Blobs, Clobs, InputStreams, Readers)
          for server prepared statements.
        </p></li><li><p>
          Implemented <code class="literal">Statement.getWarnings()</code> for
          MySQL-4.1 and newer (using <code class="literal">SHOW WARNINGS</code>).
        </p></li><li><p>
          Default result set type changed to
          <code class="literal">TYPE_FORWARD_ONLY</code> (JDBC compliance).
        </p></li><li><p>
          Centralized setting of result set type and concurrency.
        </p></li><li><p>
          Refactored how connection properties are set and exposed as
          <code class="literal">DriverPropertyInfo</code> as well as
          <code class="literal">Connection</code> and
          <code class="literal">DataSource</code> properties.
        </p></li><li><p>
          Support for NIO. Use <code class="literal">useNIO=true</code> on
          platforms that support NIO.
        </p></li><li><p>
          Support for transaction savepoints (MySQL &gt;= 4.0.14 or
          4.1.1).
        </p></li><li><p>
          Support for <code class="literal">mysql_change_user()</code>. See the
          <code class="literal">changeUser()</code> method in
          <code class="literal">com.mysql.jdbc.Connection</code>.
        </p></li><li><p>
          Reduced number of methods called in average query to be more
          efficient.
        </p></li><li><p>
          Prepared <code class="literal">Statements</code> will be re-prepared on
          auto-reconnect. Any errors encountered are postponed until
          first attempt to re-execute the re-prepared statement.
        </p></li><li><p>
          Ensure that warnings are cleared before executing queries on
          prepared statements, as-per JDBC spec (now that we support
          warnings).
        </p></li><li><p>
          Support “<span class="quote">old</span>” <code class="literal">profileSql</code>
          capitalization in <code class="literal">ConnectionProperties</code>.
          This property is deprecated, you should use
          <code class="literal">profileSQL</code> if possible.
        </p></li><li><p>
          Optimized <code class="literal">Buffer.readLenByteArray()</code> to
          return shared empty byte array when length is 0.
        </p></li><li><p>
          Allow contents of
          <code class="literal">PreparedStatement.setBlob()</code> to be retained
          between calls to <code class="literal">.execute*()</code>.
        </p></li><li><p>
          Deal with 0-length tokens in
          <code class="literal">EscapeProcessor</code> (caused by callable
          statement escape syntax).
        </p></li><li><p>
          Check for closed connection on delete/update/insert row
          operations in <code class="literal">UpdatableResultSet</code>.
        </p></li><li><p>
          Fix support for table aliases when checking for all primary
          keys in <code class="literal">UpdatableResultSet</code>.
        </p></li><li><p>
          Removed <code class="literal">useFastDates</code> connection property.
        </p></li><li><p>
          Correctly initialize datasource properties from JNDI Refs,
          including explicitly specified URLs.
        </p></li><li><p>
          <code class="literal">DatabaseMetaData</code> now reports
          <code class="literal">supportsStoredProcedures()</code> for MySQL
          versions &gt;= 5.0.0
        </p></li><li><p>
          Fixed stack overflow in
          <code class="literal">Connection.prepareCall()</code> (bad merge).
        </p></li><li><p>
          Fixed <code class="literal">IllegalAccessError</code> to
          <code class="literal">Calendar.getTimeInMillis()</code> in
          <code class="literal">DateTimeValue</code> (for JDK &lt; 1.4).
        </p></li><li><p>
          <code class="literal">DatabaseMetaData.getColumns()</code> is not
          returning correct column ordinal info for
          non-<code class="literal">'%'</code> column name patterns. (<a href="http://bugs.mysql.com/1673" target="_top">Bug#1673</a>)
        </p></li><li><p>
          Merged fix of datatype mapping from MySQL type
          <code class="literal">FLOAT</code> to
          <code class="literal">java.sql.Types.REAL</code> from 3.0 branch.
        </p></li><li><p>
          Detect collation of column for
          <code class="literal">RSMD.isCaseSensitive()</code>.
        </p></li><li><p>
          Fixed sending of queries larger than 16M.
        </p></li><li><p>
          Added named and indexed input/output parameter support to
          <code class="literal">CallableStatement</code>. MySQL-5.0.x or newer.
        </p></li><li><p>
          Fixed <code class="literal">NullPointerException</code> in
          <code class="literal">ServerPreparedStatement.setTimestamp()</code>, as
          well as year and month descrepencies in
          <code class="literal">ServerPreparedStatement.setTimestamp()</code>,
          <code class="literal">setDate()</code>.
        </p></li><li><p>
          Added ability to have multiple database/JVM targets for
          compliance and regression/unit tests in
          <code class="filename">build.xml</code>.
        </p></li><li><p>
          Fixed NPE and year/month bad conversions when accessing some
          datetime functionality in
          <code class="literal">ServerPreparedStatements</code> and their
          resultant result sets.
        </p></li><li><p>
          Display where/why a connection was implicitly closed (to aid
          debugging).
        </p></li><li><p>
          <code class="literal">CommunicationsException</code> implemented, that
          tries to determine why communications was lost with a server,
          and displays possible reasons when
          <code class="literal">.getMessage()</code> is called.
        </p></li><li><p>
          <code class="literal">NULL</code> values for numeric types in binary
          encoded result sets causing
          <code class="literal">NullPointerExceptions</code>. (<a href="http://bugs.mysql.com/2359" target="_top">Bug#2359</a>)
        </p></li><li><p>
          Implemented <code class="literal">Connection.prepareCall()</code>, and
          <code class="literal">DatabaseMetaData</code>.
          <code class="literal">getProcedures()</code> and
          <code class="literal">getProcedureColumns()</code>.
        </p></li><li><p>
          Reset <code class="literal">long binary</code> parameters in
          <code class="literal">ServerPreparedStatement</code> when
          <code class="literal">clearParameters()</code> is called, by sending
          <code class="literal">COM_RESET_STMT</code> to the server.
        </p></li><li><p>
          Merged prepared statement caching, and
          <code class="literal">.getMetaData()</code> support from 3.0 branch.
        </p></li><li><p>
          Fixed off-by-1900 error in some cases for years in
          <code class="literal">TimeUtil.fastDate</code>/<code class="literal">TimeCreate()</code>
          when unpacking results from server-side prepared statements.
        </p></li><li><p>
          Fixed charset conversion issue in
          <code class="literal">getTables()</code>. (<a href="http://bugs.mysql.com/2502" target="_top">Bug#2502</a>)
        </p></li><li><p>
          Implemented multiple result sets returned from a statement or
          stored procedure.
        </p></li><li><p>
          Server-side prepared statements were not returning datatype
          <code class="literal">YEAR</code> correctly. (<a href="http://bugs.mysql.com/2606" target="_top">Bug#2606</a>)
        </p></li><li><p>
          Enabled streaming of result sets from server-side prepared
          statements.
        </p></li><li><p>
          Class-cast exception when using scrolling result sets and
          server-side prepared statements. (<a href="http://bugs.mysql.com/2623" target="_top">Bug#2623</a>)
        </p></li><li><p>
          Merged unbuffered input code from 3.0.
        </p></li><li><p>
          Fixed <code class="literal">ConnectionProperties</code> that weren't
          properly exposed via accessors, cleaned up
          <code class="literal">ConnectionProperties</code> code.
        </p></li><li><p>
          <code class="literal">NULL</code> fields were not being encoded
          correctly in all cases in server-side prepared statements.
          (<a href="http://bugs.mysql.com/2671" target="_top">Bug#2671</a>)
        </p></li><li><p>
          Fixed rare buffer underflow when writing numbers into buffers
          for sending prepared statement execution requests.
        </p></li><li><p>
          Use DocBook version of docs for shipped versions of drivers.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-1-0"></a>1.6.15. Changes in MySQL Connector/J 3.1.0-alpha (18 February 2003)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Added <code class="literal">requireSSL</code> property.
        </p></li><li><p>
          Added <code class="literal">useServerPrepStmts</code> property (default
          <code class="literal">false</code>). The driver will use server-side
          prepared statements when the server version supports them (4.1
          and newer) when this property is set to
          <code class="literal">true</code>. It is currently set to
          <code class="literal">false</code> by default until all bind/fetch
          functionality has been implemented. Currently only DML
          prepared statements are implemented for 4.1 server-side
          prepared statements.
        </p></li><li><p>
          Track open <code class="literal">Statements</code>, close all when
          <code class="literal">Connection.close()</code> is called (JDBC
          compliance).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-17"></a>1.6.16. Changes in MySQL Connector/J 3.0.17-ga (23 June 2005)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">Timestamp</code>/<code class="literal">Time</code>
          conversion goes in the wrong “<span class="quote">direction</span>” when
          <code class="literal">useTimeZone=true</code> and server time zone
          differs from client time zone. (<a href="http://bugs.mysql.com/5874" target="_top">Bug#5874</a>)
        </p></li><li><p>
          <code class="literal">DatabaseMetaData.getIndexInfo()</code> ignored
          <code class="literal">unique</code> parameter. (<a href="http://bugs.mysql.com/7081" target="_top">Bug#7081</a>)
        </p></li><li><p>
          Support new protocol type
          <code class="literal">MYSQL_TYPE_VARCHAR</code>.
        </p></li><li><p>
          Added <code class="literal">useOldUTF8Behavior</code>' configuration
          property, which causes JDBC driver to act like it did with
          MySQL-4.0.x and earlier when the character encoding is
          <code class="literal">utf-8</code> when connected to MySQL-4.1 or newer.
        </p></li><li><p>
          Statements created from a pooled connection were returning
          physical connection instead of logical connection when
          <code class="literal">getConnection()</code> was called. (<a href="http://bugs.mysql.com/7316" target="_top">Bug#7316</a>)
        </p></li><li><p>
          <code class="literal">PreparedStatements</code> don't encode Big5 (and
          other multi-byte) character sets correctly in static SQL
          strings. (<a href="http://bugs.mysql.com/7033" target="_top">Bug#7033</a>)
        </p></li><li><p>
          Connections starting up failed-over (due to down master) never
          retry master. (<a href="http://bugs.mysql.com/6966" target="_top">Bug#6966</a>)
        </p></li><li><p>
          <code class="literal">PreparedStatement.fixDecimalExponent()</code>
          adding extra <code class="literal">+</code>, making number unparseable
          by MySQL server. (<a href="http://bugs.mysql.com/7061" target="_top">Bug#7061</a>)
        </p></li><li><p>
          Timestamp key column data needed <code class="literal">_binary</code>
          stripped for
          <code class="literal">UpdatableResultSet.refreshRow()</code>. (<a href="http://bugs.mysql.com/7686" target="_top">Bug#7686</a>)
        </p></li><li><p>
          Backported SQLState codes mapping from Connector/J 3.1, enable
          with <code class="literal">useSqlStateCodes=true</code> as a connection
          property, it defaults to <code class="literal">false</code> in this
          release, so that we don't break legacy applications (it
          defaults to <code class="literal">true</code> starting with Connector/J
          3.1).
        </p></li><li><p>
          <code class="literal">PreparedStatement.fixDecimalExponent()</code>
          adding extra <code class="literal">+</code>, making number unparseable
          by MySQL server. (<a href="http://bugs.mysql.com/7601" target="_top">Bug#7601</a>)
        </p></li><li><p>
          Escape sequence {fn convert(..., type)} now supports
          ODBC-style types that are prepended by
          <code class="literal">SQL_</code>.
        </p></li><li><p>
          Fixed duplicated code in
          <code class="literal">configureClientCharset()</code> that prevented
          <code class="literal">useOldUTF8Behavior=true</code> from working
          properly.
        </p></li><li><p>
          Handle streaming result sets with more than 2 billion rows
          properly by fixing wraparound of row number counter.
        </p></li><li><p>
          <code class="literal">MS932</code>, <code class="literal">SHIFT_JIS</code>, and
          <code class="literal">Windows_31J</code> not recognized as aliases for
          <code class="literal">sjis</code>. (<a href="http://bugs.mysql.com/7607" target="_top">Bug#7607</a>)
        </p></li><li><p>
          Adding <code class="literal">CP943</code> to aliases for
          <code class="literal">sjis</code>. (<a href="http://bugs.mysql.com/6549" target="_top">Bug#6549</a>, fixed while fixing <a href="http://bugs.mysql.com/7607" target="_top">Bug#7607</a>)
        </p></li><li><p>
          Which requires hex escaping of binary data when using
          multi-byte charsets with prepared statements. (<a href="http://bugs.mysql.com/8064" target="_top">Bug#8064</a>)
        </p></li><li><p>
          <code class="literal">NON_UNIQUE</code> column from
          <code class="literal">DBMD.getIndexInfo()</code> returned inverted
          value. (<a href="http://bugs.mysql.com/8812" target="_top">Bug#8812</a>)
        </p></li><li><p>
          Workaround for server <a href="http://bugs.mysql.com/9098" target="_top">Bug#9098</a>: Default values of
          <code class="literal">CURRENT_*</code> for <code class="literal">DATE</code>,
          <code class="literal">TIME</code>, <code class="literal">DATETIME</code>, and
          <code class="literal">TIMESTAMP</code> columns can't be distinguished
          from <code class="literal">string</code> values, so
          <code class="literal">UpdatableResultSet.moveToInsertRow()</code>
          generates bad SQL for inserting default values.
        </p></li><li><p>
          <code class="literal">EUCKR</code> charset is sent as <code class="literal">SET NAMES
          euc_kr</code> which MySQL-4.1 and newer doesn't understand.
          (<a href="http://bugs.mysql.com/8629" target="_top">Bug#8629</a>)
        </p></li><li><p>
          <code class="literal">DatabaseMetaData.supportsSelectForUpdate()</code>
          returns correct value based on server version.
        </p></li><li><p>
          Use hex escapes for
          <code class="literal">PreparedStatement.setBytes()</code> for
          double-byte charsets including “<span class="quote">aliases</span>”
          <code class="literal">Windows-31J</code>, <code class="literal">CP934</code>,
          <code class="literal">MS932</code>.
        </p></li><li><p>
          Added support for the <code class="literal">EUC_JP_Solaris</code>
          character encoding, which maps to a MySQL encoding of
          <code class="literal">eucjpms</code> (backported from 3.1 branch). This
          only works on servers that support <code class="literal">eucjpms</code>,
          namely 5.0.3 or later.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-16"></a>1.6.17. Changes in MySQL Connector/J 3.0.16-ga (15 November 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Re-issue character set configuration commands when re-using
          pooled connections and/or
          <code class="literal">Connection.changeUser()</code> when connected to
          MySQL-4.1 or newer.
        </p></li><li><p>
          Fixed <code class="literal">ResultSetMetaData.isReadOnly()</code> to
          detect non-writable columns when connected to MySQL-4.1 or
          newer, based on existence of “<span class="quote">original</span>” table and
          column names.
        </p></li><li><p>
          <code class="literal">ResultSet.updateByte()</code> when on insert row
          throws <code class="literal">ArrayOutOfBoundsException</code>. (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)
        </p></li><li><p>
          Fixed <code class="literal">DatabaseMetaData.getTypes()</code> returning
          incorrect (this is, non-negative) scale for the
          <code class="literal">NUMERIC</code> type.
        </p></li><li><p>
          Off-by-one bug in
          <code class="literal">Buffer.readString(<em class="replaceable"><code>string</code></em>)</code>.
          (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)
        </p></li><li><p>
          Made <code class="literal">TINYINT(1)</code> -&gt;
          <code class="literal">BIT</code>/<code class="literal">Boolean</code> conversion
          configurable via <code class="literal">tinyInt1isBit</code> property
          (default <code class="literal">true</code> to be JDBC compliant out of
          the box).
        </p></li><li><p>
          Only set <code class="literal">character_set_results</code> during
          connection establishment if server version &gt;= 4.1.1.
        </p></li><li><p>
          Fixed regression where <code class="literal">useUnbufferedInput</code>
          was defaulting to <code class="literal">false</code>.
        </p></li><li><p>
          <code class="literal">ResultSet.getTimestamp()</code> on a column with
          <code class="literal">TIME</code> in it fails. (<a href="http://bugs.mysql.com/5664" target="_top">Bug#5664</a>)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-15"></a>1.6.18. Changes in MySQL Connector/J 3.0.15-production (04 September 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">StringUtils.escapeEasternUnicodeByteStream</code>
          was still broken for GBK. (<a href="http://bugs.mysql.com/4010" target="_top">Bug#4010</a>)
        </p></li><li><p>
          Failover for <code class="literal">autoReconnect</code> not using port
          numbers for any hosts, and not retrying all hosts.
          (<span class="bold"><strong>Warning</strong></span>: This required a
          change to the <code class="literal">SocketFactory</code>
          <code class="literal">connect()</code> method signature, which is now
          <code class="literal">public Socket connect(String host, int portNumber,
          Properties props)</code>; therefore, any third-party socket
          factories will have to be changed to support this signature.
          (<a href="http://bugs.mysql.com/4334" target="_top">Bug#4334</a>)
        </p></li><li><p>
          Logical connections created by
          <code class="literal">MysqlConnectionPoolDataSource</code> will now
          issue a <code class="literal">rollback()</code> when they are closed and
          sent back to the pool. If your application server/connection
          pool already does this for you, you can set the
          <code class="literal">rollbackOnPooledClose</code> property to
          <code class="literal">false</code> to avoid the overhead of an extra
          <code class="literal">rollback()</code>.
        </p></li><li><p>
          Removed redundant calls to <code class="literal">checkRowPos()</code> in
          <code class="literal">ResultSet</code>.
        </p></li><li><p>
          <code class="literal">DOUBLE</code> mapped twice in
          <code class="literal">DBMD.getTypeInfo()</code>. (<a href="http://bugs.mysql.com/4742" target="_top">Bug#4742</a>)
        </p></li><li><p>
          Added FLOSS license exemption.
        </p></li><li><p>
          Calling <code class="literal">.close()</code> twice on a
          <code class="literal">PooledConnection</code> causes NPE. (<a href="http://bugs.mysql.com/4808" target="_top">Bug#4808</a>)
        </p></li><li><p>
          <code class="literal">DBMD.getColumns()</code> returns incorrect JDBC
          type for unsigned columns. This affects type mappings for all
          numeric types in the <code class="literal">RSMD.getColumnType()</code>
          and <code class="literal">RSMD.getColumnTypeNames()</code> methods as
          well, to ensure that “<span class="quote">like</span>” types from
          <code class="literal">DBMD.getColumns()</code> match up with what
          <code class="literal">RSMD.getColumnType()</code> and
          <code class="literal">getColumnTypeNames()</code> return. (<a href="http://bugs.mysql.com/4138" target="_top">Bug#4138</a>,
          <a href="http://bugs.mysql.com/4860" target="_top">Bug#4860</a>)
        </p></li><li><p>
          “<span class="quote">Production</span>” is now “<span class="quote">GA</span>” (General
          Availability) in naming scheme of distributions.
        </p></li><li><p>
          <code class="literal">RSMD.getPrecision()</code> returning 0 for
          non-numeric types (should return max length in chars for
          non-binary types, max length in bytes for binary types). This
          fix also fixes mapping of
          <code class="literal">RSMD.getColumnType()</code> and
          <code class="literal">RSMD.getColumnTypeName()</code> for the
          <code class="literal">BLOB</code> types based on the length sent from
          the server (the server doesn't distinguish between
          <code class="literal">TINYBLOB</code>, <code class="literal">BLOB</code>,
          <code class="literal">MEDIUMBLOB</code> or <code class="literal">LONGBLOB</code>
          at the network protocol level). (<a href="http://bugs.mysql.com/4880" target="_top">Bug#4880</a>)
        </p></li><li><p>
          <code class="literal">ResultSet</code> should release
          <code class="literal">Field[]</code> instance in
          <code class="literal">.close()</code>. (<a href="http://bugs.mysql.com/5022" target="_top">Bug#5022</a>)
        </p></li><li><p>
          <code class="literal">ResultSet.getMetaData()</code> should not return
          incorrectly initialized metadata if the result set has been
          closed, but should instead throw an
          <code class="literal">SQLException</code>. Also fixed for
          <code class="literal">getRow()</code> and
          <code class="literal">getWarnings()</code> and traversal methods by
          calling <code class="literal">checkClosed()</code> before operating on
          instance-level fields that are nullified during
          <code class="literal">.close()</code>. (<a href="http://bugs.mysql.com/5069" target="_top">Bug#5069</a>)
        </p></li><li><p>
          Parse new time zone variables from 4.1.x servers.
        </p></li><li><p>
          Use <code class="literal">_binary</code> introducer for
          <code class="literal">PreparedStatement.setBytes()</code> and
          <code class="literal">set*Stream()</code> when connected to MySQL-4.1.x
          or newer to avoid misinterpretation during character
          conversion.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-14"></a>1.6.19. Changes in MySQL Connector/J 3.0.14-production (28 May 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed URL parsing error.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-13"></a>1.6.20. Changes in MySQL Connector/J 3.0.13-production (27 May 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Using a <code class="literal">MySQLDatasource</code> without server name
          fails. (<a href="http://bugs.mysql.com/3848" target="_top">Bug#3848</a>)
        </p></li><li><p>
          <code class="literal">No Database Selected</code> when using
          <code class="literal">MysqlConnectionPoolDataSource</code>. (<a href="http://bugs.mysql.com/3920" target="_top">Bug#3920</a>)
        </p></li><li><p>
          <code class="literal">PreparedStatement.getGeneratedKeys()</code> method
          returns only 1 result for batched insertions. (<a href="http://bugs.mysql.com/3873" target="_top">Bug#3873</a>)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-12"></a>1.6.21. Changes in MySQL Connector/J 3.0.12-production (18 May 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Add unsigned attribute to
          <code class="literal">DatabaseMetaData.getColumns()</code> output in the
          <code class="literal">TYPE_NAME</code> column.
        </p></li><li><p>
          Added <code class="literal">failOverReadOnly</code> property, to allow
          end-user to configure state of connection (read-only/writable)
          when failed over.
        </p></li><li><p>
          Backported “<span class="quote">change user</span>” and “<span class="quote">reset server
          state</span>” functionality from 3.1 branch, to allow clients
          of <code class="literal">MysqlConnectionPoolDataSource</code> to reset
          server state on <code class="literal">getConnection()</code> on a pooled
          connection.
        </p></li><li><p>
          Don't escape SJIS/GBK/BIG5 when using MySQL-4.1 or newer.
        </p></li><li><p>
          Allow <code class="literal">url</code> parameter for
          <code class="literal">MysqlDataSource</code> and
          <code class="literal">MysqlConnectionPool</code>
          <code class="literal">DataSource</code> so that passing of other
          properties is possible from inside appservers.
        </p></li><li><p>
          Map duplicate key and foreign key errors to SQLState of
          <code class="literal">23000</code>.
        </p></li><li><p>
          Backport documentation tooling from 3.1 branch.
        </p></li><li><p>
          Return creating statement for <code class="literal">ResultSets</code>
          created by <code class="literal">getGeneratedKeys()</code>. (<a href="http://bugs.mysql.com/2957" target="_top">Bug#2957</a>)
        </p></li><li><p>
          Allow <code class="literal">java.util.Date</code> to be sent in as
          parameter to <code class="literal">PreparedStatement.setObject()</code>,
          converting it to a <code class="literal">Timestamp</code> to maintain
          full precision. (<a href="http://bugs.mysql.com/103" target="_top">Bug#103</a>).
        </p></li><li><p>
          Don't truncate <code class="literal">BLOB</code> or
          <code class="literal">CLOB</code> values when using
          <code class="literal">setBytes()</code> and/or
          <code class="literal">setBinary/CharacterStream()</code>. (<a href="http://bugs.mysql.com/2670" target="_top">Bug#2670</a>).
        </p></li><li><p>
          Dynamically configure character set mappings for field-level
          character sets on MySQL-4.1.0 and newer using <code class="literal">SHOW
          COLLATION</code> when connecting.
        </p></li><li><p>
          Map <code class="literal">binary</code> character set to
          <code class="literal">US-ASCII</code> to support
          <code class="literal">DATETIME</code> charset recognition for servers
          &gt;= 4.1.2.
        </p></li><li><p>
          Use <code class="literal">SET character_set_results</code> during
          initialization to allow any charset to be returned to the
          driver for result sets.
        </p></li><li><p>
          Use <code class="literal">charsetnr</code> returned during connect to
          encode queries before issuing <code class="literal">SET NAMES</code> on
          MySQL &gt;= 4.1.0.
        </p></li><li><p>
          Add helper methods to <code class="literal">ResultSetMetaData</code>
          (<code class="literal">getColumnCharacterEncoding()</code> and
          <code class="literal">getColumnCharacterSet()</code>) to allow end-users
          to see what charset the driver thinks it should be using for
          the column.
        </p></li><li><p>
          Only set <code class="literal">character_set_results</code> for MySQL
          &gt;= 4.1.0.
        </p></li><li><p>
          <code class="literal">StringUtils.escapeSJISByteStream()</code> not
          covering all eastern double-byte charsets correctly. (<a href="http://bugs.mysql.com/3511" target="_top">Bug#3511</a>)
        </p></li><li><p>
          Renamed <code class="literal">StringUtils.escapeSJISByteStream()</code>
          to more appropriate
          <code class="literal">escapeEasternUnicodeByteStream()</code>.
        </p></li><li><p>
          Not specifying database in URL caused
          <code class="literal">MalformedURL</code> exception. (<a href="http://bugs.mysql.com/3554" target="_top">Bug#3554</a>)
        </p></li><li><p>
          Auto-convert MySQL encoding names to Java encoding names if
          used for <code class="literal">characterEncoding</code> property.
        </p></li><li><p>
          Added encoding names that are recognized on some JVMs to fix
          case where they were reverse-mapped to MySQL encoding names
          incorrectly.
        </p></li><li><p>
          Use <code class="literal">junit.textui.TestRunner</code> for all unit
          tests (to allow them to be run from the command line outside
          of Ant or Eclipse).
        </p></li><li><p>
          <code class="literal">UpdatableResultSet</code> not picking up default
          values for <code class="literal">moveToInsertRow()</code>. (<a href="http://bugs.mysql.com/3557" target="_top">Bug#3557</a>)
        </p></li><li><p>
          Inconsistent reporting of data type. The server still doesn't
          return all types for *BLOBs *TEXT correctly, so the driver
          won't return those correctly. (<a href="http://bugs.mysql.com/3570" target="_top">Bug#3570</a>)
        </p></li><li><p>
          <code class="literal">DBMD.getSQLStateType()</code> returns incorrect
          value. (<a href="http://bugs.mysql.com/3520" target="_top">Bug#3520</a>)
        </p></li><li><p>
          Fixed regression in
          <code class="literal">PreparedStatement.setString()</code> and eastern
          character encodings.
        </p></li><li><p>
          Made <code class="literal">StringRegressionTest</code> 4.1-unicode
          aware.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-11"></a>1.6.22. Changes in MySQL Connector/J 3.0.11-stable (19 February 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Trigger a <code class="literal">SET NAMES utf8</code> when encoding is
          forced to <code class="literal">utf8</code> <span class="emphasis"><em>or</em></span>
          <code class="literal">utf-8</code> via the
          <code class="literal">characterEncoding</code> property. Previously,
          only the Java-style encoding name of <code class="literal">utf-8</code>
          would trigger this.
        </p></li><li><p>
          <code class="literal">AutoReconnect</code> time was growing faster than
          exponentially. (<a href="http://bugs.mysql.com/2447" target="_top">Bug#2447</a>)
        </p></li><li><p>
          Fixed failover always going to last host in list. (<a href="http://bugs.mysql.com/2578" target="_top">Bug#2578</a>)
        </p></li><li><p>
          Added <code class="literal">useUnbufferedInput</code> parameter, and now
          use it by default (due to JVM issue
          <a href="http://developer.java.sun.com/developer/bugParade/bugs/4401235.html" target="_top">http://developer.java.sun.com/developer/bugParade/bugs/4401235.html</a>)
        </p></li><li><p>
          Detect <code class="literal">on</code>/<code class="literal">off</code> or
          <code class="literal">1</code>, <code class="literal">2</code>,
          <code class="literal">3</code> form of
          <code class="literal">lower_case_table_names</code> value on server.
        </p></li><li><p>
          Return <code class="literal">java.lang.Integer</code> for
          <code class="literal">TINYINT</code> and <code class="literal">SMALLINT</code>
          types from
          <code class="literal">ResultSetMetaData.getColumnClassName()</code>.
          (<a href="http://bugs.mysql.com/2852" target="_top">Bug#2852</a>)
        </p></li><li><p>
          Return <code class="literal">java.lang.Double</code> for
          <code class="literal">FLOAT</code> type from
          <code class="literal">ResultSetMetaData.getColumnClassName()</code>.
          (<a href="http://bugs.mysql.com/2855" target="_top">Bug#2855</a>)
        </p></li><li><p>
          Return <code class="literal">[B</code> instead of
          <code class="literal">java.lang.Object</code> for
          <code class="literal">BINARY</code>, <code class="literal">VARBINARY</code> and
          <code class="literal">LONGVARBINARY</code> types from
          <code class="literal">ResultSetMetaData.getColumnClassName()</code>
          (JDBC compliance).
        </p></li><li><p>
          Issue connection events on all instances created from a
          <code class="literal">ConnectionPoolDataSource</code>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-10"></a>1.6.23. Changes in MySQL Connector/J 3.0.10-stable (13 January 2004)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Don't count quoted IDs when inside a 'string' in
          <code class="literal">PreparedStatement</code> parsing. (<a href="http://bugs.mysql.com/1511" target="_top">Bug#1511</a>)
        </p></li><li><p>
          “<span class="quote">Friendlier</span>” exception message for
          <code class="literal">PacketTooLargeException</code>. (<a href="http://bugs.mysql.com/1534" target="_top">Bug#1534</a>)
        </p></li><li><p>
          Backported fix for aliased tables and
          <code class="literal">UpdatableResultSets</code> in
          <code class="literal">checkUpdatability()</code> method from 3.1 branch.
        </p></li><li><p>
          Fix for <code class="literal">ArrayIndexOutOfBounds</code> exception
          when using <code class="literal">Statement.setMaxRows()</code>. (<a href="http://bugs.mysql.com/1695" target="_top">Bug#1695</a>)
        </p></li><li><p>
          Barge blobs and split packets not being read correctly. (<a href="http://bugs.mysql.com/1576" target="_top">Bug#1576</a>)
        </p></li><li><p>
          Fixed regression of
          <code class="literal">Statement.getGeneratedKeys()</code> and
          <code class="literal">REPLACE</code> statements.
        </p></li><li><p>
          Subsequent call to <code class="literal">ResultSet.updateFoo()</code>
          causes NPE if result set is not updatable. (<a href="http://bugs.mysql.com/1630" target="_top">Bug#1630</a>)
        </p></li><li><p>
          Fix for 4.1.1-style authentication with no password.
        </p></li><li><p>
          Foreign Keys column sequence is not consistent in
          <code class="literal">DatabaseMetaData.getImported/Exported/CrossReference()</code>.
          (<a href="http://bugs.mysql.com/1731" target="_top">Bug#1731</a>)
        </p></li><li><p>
          <code class="literal">DatabaseMetaData.getSystemFunction()</code>
          returning bad function <code class="literal">VResultsSion</code>. (<a href="http://bugs.mysql.com/1775" target="_top">Bug#1775</a>)
        </p></li><li><p>
          Cross-database updatable result sets are not checked for
          updatability correctly. (<a href="http://bugs.mysql.com/1592" target="_top">Bug#1592</a>)
        </p></li><li><p>
          <code class="literal">DatabaseMetaData.getColumns()</code> should return
          <code class="literal">Types.LONGVARCHAR</code> for MySQL
          <code class="literal">LONGTEXT</code> type.
        </p></li><li><p>
          <code class="literal">ResultSet.getObject()</code> on
          <code class="literal">TINYINT</code> and <code class="literal">SMALLINT</code>
          columns should return Java type <code class="literal">Integer</code>.
          (<a href="http://bugs.mysql.com/1913" target="_top">Bug#1913</a>)
        </p></li><li><p>
          Added <code class="literal">alwaysClearStream</code> connection
          property, which causes the driver to always empty any
          remaining data on the input stream before each query.
        </p></li><li><p>
          Added more descriptive error message <code class="literal">Server
          Configuration Denies Access to DataSource</code>, as well
          as retrieval of message from server.
        </p></li><li><p>
          Autoreconnect code didn't set catalog upon reconnect if it had
          been changed.
        </p></li><li><p>
          Implement <code class="literal">ResultSet.updateClob()</code>.
        </p></li><li><p>
          <code class="literal">ResultSetMetaData.isCaseSensitive()</code>
          returned wrong value for
          <code class="literal">CHAR</code>/<code class="literal">VARCHAR</code> columns.
        </p></li><li><p>
          Connection property <code class="literal">maxRows</code> not honored.
          (<a href="http://bugs.mysql.com/1933" target="_top">Bug#1933</a>)
        </p></li><li><p>
          Statements being created too many times in
          <code class="literal">DBMD.extractForeignKeyFromCreateTable()</code>.
          (<a href="http://bugs.mysql.com/1925" target="_top">Bug#1925</a>)
        </p></li><li><p>
          Support escape sequence {fn convert ... }. (<a href="http://bugs.mysql.com/1914" target="_top">Bug#1914</a>)
        </p></li><li><p>
          <code class="literal">ArrayIndexOutOfBounds</code> when parameter number
          == number of parameters + 1. (<a href="http://bugs.mysql.com/1958" target="_top">Bug#1958</a>)
        </p></li><li><p>
          <code class="literal">ResultSet.findColumn()</code> should use first
          matching column name when there are duplicate column names in
          <code class="literal">SELECT</code> query (JDBC-compliance). (<a href="http://bugs.mysql.com/2006" target="_top">Bug#2006</a>)
        </p></li><li><p>
          Removed static synchronization bottleneck from
          <code class="literal">PreparedStatement.setTimestamp()</code>.
        </p></li><li><p>
          Removed static synchronization bottleneck from instance
          factory method of
          <code class="literal">SingleByteCharsetConverter</code>.
        </p></li><li><p>
          Enable caching of the parsing stage of prepared statements via
          the <code class="literal">cachePrepStmts</code>,
          <code class="literal">prepStmtCacheSize</code>, and
          <code class="literal">prepStmtCacheSqlLimit</code> properties (disabled
          by default).
        </p></li><li><p>
          Speed up parsing of <code class="literal">PreparedStatements</code>, try
          to use one-pass whenever possible.
        </p></li><li><p>
          Fixed security exception when used in Applets (applets can't
          read the system property <code class="literal">file.encoding</code>
          which is needed for <code class="literal">LOAD DATA LOCAL
          INFILE</code>).
        </p></li><li><p>
          Use constants for SQLStates.
        </p></li><li><p>
          Map charset <code class="literal">ko18_ru</code> to
          <code class="literal">ko18r</code> when connected to MySQL-4.1.0 or
          newer.
        </p></li><li><p>
          Ensure that <code class="literal">Buffer.writeString()</code> saves room
          for the <code class="literal">\0</code>.
        </p></li><li><p>
          Fixed exception <code class="literal">Unknown character set
          'danish'</code> on connect with JDK-1.4.0
        </p></li><li><p>
          Fixed mappings in SQLError to report deadlocks with SQLStates
          of <code class="literal">41000</code>.
        </p></li><li><p>
          <code class="literal">maxRows</code> property would affect internal
          statements, so check it for all statement creation internal to
          the driver, and set to 0 when it is not.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-9"></a>1.6.24. Changes in MySQL Connector/J 3.0.9-stable (07 October 2003)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Faster date handling code in <code class="literal">ResultSet</code> and
          <code class="literal">PreparedStatement</code> (no longer uses
          <code class="literal">Date</code> methods that synchronize on static
          calendars).
        </p></li><li><p>
          Fixed test for end of buffer in
          <code class="literal">Buffer.readString()</code>.
        </p></li><li><p>
          Fixed <code class="literal">ResultSet.previous()</code> behavior to move
          current position to before result set when on first row of
          result set. (<a href="http://bugs.mysql.com/496" target="_top">Bug#496</a>)
        </p></li><li><p>
          Fixed <code class="literal">Statement</code> and
          <code class="literal">PreparedStatement</code> issuing bogus queries
          when <code class="literal">setMaxRows()</code> had been used and a
          <code class="literal">LIMIT</code> clause was present in the query.
        </p></li><li><p>
          <code class="literal">refreshRow</code> didn't work when primary key
          values contained values that needed to be escaped (they ended
          up being doubly escaped). (<a href="http://bugs.mysql.com/661" target="_top">Bug#661</a>)
        </p></li><li><p>
          Support <code class="literal">InnoDB</code> contraint names when
          extracting foreign key information in
          <code class="literal">DatabaseMetaData</code> (implementing ideas from
          Parwinder Sekhon). (<a href="http://bugs.mysql.com/517" target="_top">Bug#517</a>, <a href="http://bugs.mysql.com/664" target="_top">Bug#664</a>)
        </p></li><li><p>
          Backported 4.1 protocol changes from 3.1 branch (server-side
          SQL states, new field information, larger client capability
          flags, connect-with-database, and so forth).
        </p></li><li><p>
          Fix <code class="literal">UpdatableResultSet</code> to return values for
          <code class="literal">get<em class="replaceable"><code>XXX</code></em>()</code> when on
          insert row. (<a href="http://bugs.mysql.com/675" target="_top">Bug#675</a>)
        </p></li><li><p>
          The <code class="literal">insertRow</code> in an
          <code class="literal">UpdatableResultSet</code> is now loaded with the
          default column values when
          <code class="literal">moveToInsertRow()</code> is called. (<a href="http://bugs.mysql.com/688" target="_top">Bug#688</a>)
        </p></li><li><p>
          <code class="literal">DatabaseMetaData.getColumns()</code> wasn't
          returning <code class="literal">NULL</code> for default values that are
          specified as <code class="literal">NULL</code>.
        </p></li><li><p>
          Change default statement type/concurrency to
          <code class="literal">TYPE_FORWARD_ONLY</code> and
          <code class="literal">CONCUR_READ_ONLY</code> (spec compliance).
        </p></li><li><p>
          Don't try and reset isolation level on reconnect if MySQL
          doesn't support them.
        </p></li><li><p>
          Don't wrap <code class="literal">SQLExceptions</code> in
          <code class="literal">RowDataDynamic</code>.
        </p></li><li><p>
          Don't change timestamp TZ twice if
          <code class="literal">useTimezone==true</code>. (<a href="http://bugs.mysql.com/774" target="_top">Bug#774</a>)
        </p></li><li><p>
          Fixed regression in large split-packet handling. (<a href="http://bugs.mysql.com/848" target="_top">Bug#848</a>)
        </p></li><li><p>
          Better diagnostic error messages in exceptions for
          “<span class="quote">streaming</span>” result sets.
        </p></li><li><p>
          Issue exception on
          <code class="literal">ResultSet.get<em class="replaceable"><code>XXX</code></em>()</code>
          on empty result set (wasn't caught in some cases).
        </p></li><li><p>
          Don't hide messages from exceptions thrown in I/O layers.
        </p></li><li><p>
          Don't fire connection closed events when closing pooled
          connections, or on
          <code class="literal">PooledConnection.getConnection()</code> with
          already open connections. (<a href="http://bugs.mysql.com/884" target="_top">Bug#884</a>)
        </p></li><li><p>
          Clip +/- INF (to smallest and largest representative values
          for the type in MySQL) and NaN (to 0) for
          <code class="literal">setDouble</code>/<code class="literal">setFloat()</code>,
          and issue a warning on the statement when the server does not
          support +/- INF or NaN.
        </p></li><li><p>
          Double-escaping of <code class="literal">'\'</code> when charset is SJIS
          or GBK and <code class="literal">'\'</code> appears in non-escaped
          input. (<a href="http://bugs.mysql.com/879" target="_top">Bug#879</a>)
        </p></li><li><p>
          When emptying input stream of unused rows for
          “<span class="quote">streaming</span>” result sets, have the current thread
          <code class="literal">yield()</code> every 100 rows in order to not
          monopolize CPU time.
        </p></li><li><p>
          <code class="literal">DatabaseMetaData.getColumns()</code> getting
          confused about the keyword “<span class="quote">set</span>” in character
          columns. (<a href="http://bugs.mysql.com/1099" target="_top">Bug#1099</a>)
        </p></li><li><p>
          Fixed deadlock issue with
          <code class="literal">Statement.setMaxRows()</code>.
        </p></li><li><p>
          Fixed <code class="literal">CLOB.truncate()</code>. (<a href="http://bugs.mysql.com/1130" target="_top">Bug#1130</a>)
        </p></li><li><p>
          Optimized <code class="literal">CLOB.setChracterStream()</code>. (<a href="http://bugs.mysql.com/1131" target="_top">Bug#1131</a>)
        </p></li><li><p>
          Made <code class="literal">databaseName</code>,
          <code class="literal">portNumber</code>, and
          <code class="literal">serverName</code> optional parameters for
          <code class="literal">MysqlDataSourceFactory</code>. (<a href="http://bugs.mysql.com/1246" target="_top">Bug#1246</a>)
        </p></li><li><p>
          <code class="literal">ResultSet.get/setString</code> mashing char 127.
          (<a href="http://bugs.mysql.com/1247" target="_top">Bug#1247</a>)
        </p></li><li><p>
          Backported authentication changes for 4.1.1 and newer from 3.1
          branch.
        </p></li><li><p>
          Added <code class="literal">com.mysql.jdbc.util.BaseBugReport</code> to
          help creation of testcases for bug reports.
        </p></li><li><p>
          Added property to “<span class="quote">clobber</span>” streaming results, by
          setting the <code class="literal">clobberStreamingResults</code>
          property to <code class="literal">true</code> (the default is
          <code class="literal">false</code>). This will cause a
          “<span class="quote">streaming</span>” <code class="literal">ResultSet</code> to be
          automatically closed, and any oustanding data still streaming
          from the server to be discarded if another query is executed
          before all the data has been read from the server.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-8"></a>1.6.25. Changes in MySQL Connector/J 3.0.8-stable (23 May 2003)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Allow bogus URLs in
          <code class="literal">Driver.getPropertyInfo()</code>.
        </p></li><li><p>
          Return list of generated keys when using multi-value
          <code class="literal">INSERTS</code> with
          <code class="literal">Statement.getGeneratedKeys()</code>.
        </p></li><li><p>
          Use JVM charset with filenames and <code class="literal">LOAD DATA [LOCAL]
          INFILE</code>.
        </p></li><li><p>
          Fix infinite loop with
          <code class="literal">Connection.cleanup()</code>.
        </p></li><li><p>
          Changed Ant target <code class="literal">compile-core</code> to
          <code class="literal">compile-driver</code>, and made testsuite
          compilation a separate target.
        </p></li><li><p>
          Fixed result set not getting set for
          <code class="literal">Statement.executeUpdate()</code>, which affected
          <code class="literal">getGeneratedKeys()</code> and
          <code class="literal">getUpdateCount()</code> in some cases.
        </p></li><li><p>
          Unicode character 0xFFFF in a string would cause the driver to
          throw an <code class="literal">ArrayOutOfBoundsException</code>. (<a href="http://bugs.mysql.com/378" target="_top">Bug#378</a>).
        </p></li><li><p>
          Return correct number of generated keys when using
          <code class="literal">REPLACE</code> statements.
        </p></li><li><p>
          Fix problem detecting server character set in some cases.
        </p></li><li><p>
          Fix row data decoding error when using
          <span class="emphasis"><em>very</em></span> large packets.
        </p></li><li><p>
          Optimized row data decoding.
        </p></li><li><p>
          Issue exception when operating on an already closed prepared
          statement.
        </p></li><li><p>
          Fixed SJIS encoding bug, thanks to Naoto Sato.
        </p></li><li><p>
          Optimized usage of <code class="literal">EscapeProcessor</code>.
        </p></li><li><p>
          Allow multiple calls to <code class="literal">Statement.close()</code>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-7"></a>1.6.26. Changes in MySQL Connector/J 3.0.7-stable (08 April 2003)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed <code class="literal">MysqlPooledConnection.close()</code> calling
          wrong event type.
        </p></li><li><p>
          Fixed <code class="literal">StringIndexOutOfBoundsException</code> in
          <code class="literal">PreparedStatement.setClob()</code>.
        </p></li><li><p>
          4.1 Column Metadata fixes.
        </p></li><li><p>
          Remove synchronization from
          <code class="literal">Driver.connect()</code> and
          <code class="literal">Driver.acceptsUrl()</code>.
        </p></li><li><p>
          <code class="literal">IOExceptions</code> during a transaction now cause
          the <code class="literal">Connection</code> to be closed.
        </p></li><li><p>
          Fixed missing conversion for <code class="literal">YEAR</code> type in
          <code class="literal">ResultSetMetaData.getColumnTypeName()</code>.
        </p></li><li><p>
          Don't pick up indexes that start with <code class="literal">pri</code>
          as primary keys for <code class="literal">DBMD.getPrimaryKeys()</code>.
        </p></li><li><p>
          Throw <code class="literal">SQLExceptions</code> when trying to do
          operations on a forcefully closed
          <code class="literal">Connection</code> (that is, when a communication
          link failure occurs).
        </p></li><li><p>
          You can now toggle profiling on/off using
          <code class="literal">Connection.setProfileSql(boolean)</code>.
        </p></li><li><p>
          Fixed charset issues with database metadata (charset was not
          getting set correctly).
        </p></li><li><p>
          Updatable <code class="literal">ResultSets</code> can now be created for
          aliased tables/columns when connected to MySQL-4.1 or newer.
        </p></li><li><p>
          Fixed <code class="literal">LOAD DATA LOCAL INFILE</code> bug when file
          &gt; <code class="literal">max_allowed_packet</code>.
        </p></li><li><p>
          Fixed escaping of 0x5c (<code class="literal">'\'</code>) character for
          GBK and Big5 charsets.
        </p></li><li><p>
          Fixed <code class="literal">ResultSet.getTimestamp()</code> when
          underlying field is of type <code class="literal">DATE</code>.
        </p></li><li><p>
          Ensure that packet size from
          <code class="literal">alignPacketSize()</code> does not exceed
          <code class="literal">max_allowed_packet</code> (JVM bug)
        </p></li><li><p>
          Don't reset <code class="literal">Connection.isReadOnly()</code> when
          autoReconnecting.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-6"></a>1.6.27. Changes in MySQL Connector/J 3.0.6-stable (18 February 2003)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed <code class="literal">ResultSetMetaData</code> to return
          <code class="literal">""</code> when catalog not known. Fixes
          <code class="literal">NullPointerExceptions</code> with Sun's
          <code class="literal">CachedRowSet</code>.
        </p></li><li><p>
          Fixed <code class="literal">DBMD.getTypeInfo()</code> and
          <code class="literal">DBMD.getColumns()</code> returning different value
          for precision in <code class="literal">TEXT</code> and
          <code class="literal">BLOB</code> types.
        </p></li><li><p>
          Allow ignoring of warning for “<span class="quote">non transactional
          tables</span>” during rollback (compliance/usability) by
          setting <code class="literal">ignoreNonTxTables</code> property to
          <code class="literal">true</code>.
        </p></li><li><p>
          Fixed <code class="literal">SQLExceptions</code> getting swallowed on
          initial connect.
        </p></li><li><p>
          Fixed <code class="literal">Statement.setMaxRows()</code> to stop
          sending <code class="literal">LIMIT</code> type queries when not needed
          (performance).
        </p></li><li><p>
          Clean up <code class="literal">Statement</code> query/method mismatch
          tests (that is, <code class="literal">INSERT</code> not allowed with
          <code class="literal">.executeQuery()</code>).
        </p></li><li><p>
          More checks added in <code class="literal">ResultSet</code> traversal
          method to catch when in closed state.
        </p></li><li><p>
          Fixed <code class="literal">ResultSetMetaData.isWritable()</code> to
          return correct value.
        </p></li><li><p>
          Add “<span class="quote">window</span>” of different <code class="literal">NULL</code>
          sorting behavior to
          <code class="literal">DBMD.nullsAreSortedAtStart</code> (4.0.2 to
          4.0.10, true; otherwise, no).
        </p></li><li><p>
          Implemented <code class="literal">Blob.setBytes()</code>. You still need
          to pass the resultant <code class="literal">Blob</code> back into an
          updatable <code class="literal">ResultSet</code> or
          <code class="literal">PreparedStatement</code> to persist the changes,
          because MySQL does not support “<span class="quote">locators</span>”.
        </p></li><li><p>
          Backported 4.1 charset field info changes from Connector/J
          3.1.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-5"></a>1.6.28. Changes in MySQL Connector/J 3.0.5-gamma (22 January 2003)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed <code class="literal">Buffer.fastSkipLenString()</code> causing
          <code class="literal">ArrayIndexOutOfBounds</code> exceptions with some
          queries when unpacking fields.
        </p></li><li><p>
          Implemented an empty <code class="literal">TypeMap</code> for
          <code class="literal">Connection.getTypeMap()</code> so that some
          third-party apps work with MySQL (IBM WebSphere 5.0 Connection
          pool).
        </p></li><li><p>
          Added missing <code class="literal">LONGTEXT</code> type to
          <code class="literal">DBMD.getColumns()</code>.
        </p></li><li><p>
          Retrieve <code class="literal">TX_ISOLATION</code> from database for
          <code class="literal">Connection.getTransactionIsolation()</code> when
          the MySQL version supports it, instead of an instance
          variable.
        </p></li><li><p>
          Quote table names in
          <code class="literal">DatabaseMetaData.getColumns()</code>,
          <code class="literal">getPrimaryKeys()</code>,
          <code class="literal">getIndexInfo()</code>,
          <code class="literal">getBestRowIdentifier()</code>.
        </p></li><li><p>
          Greatly reduce memory required for
          <code class="literal">setBinaryStream()</code> in
          <code class="literal">PreparedStatements</code>.
        </p></li><li><p>
          Fixed <code class="literal">ResultSet.isBeforeFirst()</code> for empty
          result sets.
        </p></li><li><p>
          Added update options for foreign key metadata.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-4"></a>1.6.29. Changes in MySQL Connector/J 3.0.4-gamma (06 January 2003)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Added quoted identifiers to database names for
          <code class="literal">Connection.setCatalog</code>.
        </p></li><li><p>
          Added support for quoted identifiers in
          <code class="literal">PreparedStatement</code> parser.
        </p></li><li><p>
          Streamlined character conversion and <code class="literal">byte[]</code>
          handling in <code class="literal">PreparedStatements</code> for
          <code class="literal">setByte()</code>.
        </p></li><li><p>
          Reduce memory footprint of
          <code class="literal">PreparedStatements</code> by sharing outbound
          packet with <code class="literal">MysqlIO</code>.
        </p></li><li><p>
          Added <code class="literal">strictUpdates</code> property to allow
          control of amount of checking for “<span class="quote">correctness</span>”
          of updatable result sets. Set this to <code class="literal">false</code>
          if you want faster updatable result sets and you know that you
          create them from <code class="literal">SELECT</code> statements on
          tables with primary keys and that you have selected all
          primary keys in your query.
        </p></li><li><p>
          Added support for 4.0.8-style large packets.
        </p></li><li><p>
          Fixed <code class="literal">PreparedStatement.executeBatch()</code>
          parameter overwriting.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-3"></a>1.6.30. Changes in MySQL Connector/J 3.0.3-dev (17 December 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Changed <code class="literal">charsToByte</code> in
          <code class="literal">SingleByteCharConverter</code> to be non-static.
        </p></li><li><p>
          Changed <code class="literal">SingleByteCharConverter</code> to use lazy
          initialization of each converter.
        </p></li><li><p>
          Fixed charset handling in <code class="literal">Fields.java</code>.
        </p></li><li><p>
          Implemented <code class="literal">Connection.nativeSQL()</code>.
        </p></li><li><p>
          More robust escape tokenizer: Recognize <code class="literal">--</code>
          comments, and allow nested escape sequences (see
          <code class="literal">testsuite.EscapeProcessingTest</code>).
        </p></li><li><p>
          <code class="literal">DBMD.getImported/ExportedKeys()</code> now handles
          multiple foreign keys per table.
        </p></li><li><p>
          Fixed <code class="literal">ResultSetMetaData.getPrecision()</code>
          returning incorrect values for some floating-point types.
        </p></li><li><p>
          Fixed <code class="literal">ResultSetMetaData.getColumnTypeName()</code>
          returning <code class="literal">BLOB</code> for <code class="literal">TEXT</code>
          and <code class="literal">TEXT</code> for <code class="literal">BLOB</code> types.
        </p></li><li><p>
          Fixed <code class="literal">Buffer.isLastDataPacket()</code> for 4.1 and
          newer servers.
        </p></li><li><p>
          Added <code class="literal">CLIENT_LONG_FLAG</code> to be able to get
          more column flags (<code class="literal">isAutoIncrement()</code> being
          the most important).
        </p></li><li><p>
          Because of above, implemented
          <code class="literal">ResultSetMetaData.isAutoIncrement()</code> to use
          <code class="literal">Field.isAutoIncrement()</code>.
        </p></li><li><p>
          Honor <code class="literal">lower_case_table_names</code> when enabled
          in the server when doing table name comparisons in
          <code class="literal">DatabaseMetaData</code> methods.
        </p></li><li><p>
          Some MySQL-4.1 protocol support (extended field info from
          selects).
        </p></li><li><p>
          Use non-aliased table/column names and database names to
          fullly qualify tables and columns in
          <code class="literal">UpdatableResultSet</code> (requires MySQL-4.1 or
          newer).
        </p></li><li><p>
          Allow user to alter behavior of <code class="literal">Statement</code>/
          <code class="literal">PreparedStatement.executeBatch()</code> via
          <code class="literal">continueBatchOnError</code> property (defaults to
          <code class="literal">true</code>).
        </p></li><li><p>
          Check for connection closed in more
          <code class="literal">Connection</code> methods
          (<code class="literal">createStatement</code>,
          <code class="literal">prepareStatement</code>,
          <code class="literal">setTransactionIsolation</code>,
          <code class="literal">setAutoCommit</code>).
        </p></li><li><p>
          More robust implementation of updatable result sets. Checks
          that <span class="emphasis"><em>all</em></span> primary keys of the table have
          been selected.
        </p></li><li><p>
          <code class="literal">LOAD DATA LOCAL INFILE ...</code> now works, if
          your server is configured to allow it. Can be turned off with
          the <code class="literal">allowLoadLocalInfile</code> property (see the
          <code class="filename">README</code>).
        </p></li><li><p>
          Substitute <code class="literal">'?'</code> for unknown character
          conversions in single-byte character sets instead of
          <code class="literal">'\0'</code>.
        </p></li><li><p>
          <code class="literal">NamedPipeSocketFactory</code> now works (only
          intended for Windows), see <code class="filename">README</code> for
          instructions.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-2"></a>1.6.31. Changes in MySQL Connector/J 3.0.2-dev (08 November 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed issue with updatable result sets and
          <code class="literal">PreparedStatements</code> not working.
        </p></li><li><p>
          Fixed
          <code class="literal">ResultSet.setFetchDirection(FETCH_UNKNOWN)</code>.
        </p></li><li><p>
          Fixed issue when calling
          <code class="literal">Statement.setFetchSize()</code> when using
          arbitrary values.
        </p></li><li><p>
          Fixed incorrect conversion in
          <code class="literal">ResultSet.getLong()</code>.
        </p></li><li><p>
          Implemented <code class="literal">ResultSet.updateBlob()</code>.
        </p></li><li><p>
          Removed duplicate code from
          <code class="literal">UpdatableResultSet</code> (it can be inherited
          from <code class="literal">ResultSet</code>, the extra code for each
          method to handle updatability I thought might someday be
          necessary has not been needed).
        </p></li><li><p>
          Fixed <code class="literal">UnsupportedEncodingException</code> thrown
          when “<span class="quote">forcing</span>” a character encoding via
          properties.
        </p></li><li><p>
          Fixed various non-ASCII character encoding issues.
        </p></li><li><p>
          Added driver property <code class="literal">useHostsInPrivileges</code>.
          Defaults to true. Affects whether or not
          <code class="literal">@hostname</code> will be used in
          <code class="literal">DBMD.getColumn/TablePrivileges</code>.
        </p></li><li><p>
          All <code class="literal">DBMD</code> result set columns describing
          schemas now return <code class="literal">NULL</code> to be more
          compliant with the behavior of other JDBC drivers for other
          database systems (MySQL does not support schemas).
        </p></li><li><p>
          Added SSL support. See <code class="filename">README</code> for
          information on how to use it.
        </p></li><li><p>
          Properly restore connection properties when autoReconnecting
          or failing-over, including <code class="literal">autoCommit</code>
          state, and isolation level.
        </p></li><li><p>
          Use <code class="literal">SHOW CREATE TABLE</code> when possible for
          determining foreign key information for
          <code class="literal">DatabaseMetaData</code>. Also allows cascade
          options for <code class="literal">DELETE</code> information to be
          returned.
        </p></li><li><p>
          Escape <code class="literal">0x5c</code> character in strings for the
          SJIS charset.
        </p></li><li><p>
          Fixed start position off-by-1 error in
          <code class="literal">Clob.getSubString()</code>.
        </p></li><li><p>
          Implemented <code class="literal">Clob.truncate()</code>.
        </p></li><li><p>
          Implemented <code class="literal">Clob.setString()</code>.
        </p></li><li><p>
          Implemented <code class="literal">Clob.setAsciiStream()</code>.
        </p></li><li><p>
          Implemented <code class="literal">Clob.setCharacterStream()</code>.
        </p></li><li><p>
          Added <code class="literal">com.mysql.jdbc.MiniAdmin</code> class, which
          allows you to send <code class="literal">shutdown</code> command to
          MySQL server. This is intended to be used when
          “<span class="quote">embedding</span>” Java and MySQL server together in an
          end-user application.
        </p></li><li><p>
          Added <code class="literal">connectTimeout</code> parameter that allows
          users of JDK-1.4 and newer to specify a maxium time to wait to
          establish a connection.
        </p></li><li><p>
          Failover and <code class="literal">autoReconnect</code> work only when
          the connection is in an <code class="literal">autoCommit(false)</code>
          state, in order to stay transaction-safe.
        </p></li><li><p>
          Added <code class="literal">queriesBeforeRetryMaster</code> property
          that specifies how many queries to issue when failed over
          before attempting to reconnect to the master (defaults to 50).
        </p></li><li><p>
          Fixed <code class="literal">DBMD.supportsResultSetConcurrency()</code>
          so that it returns true for
          <code class="literal">ResultSet.TYPE_SCROLL_INSENSITIVE</code> and
          <code class="literal">ResultSet.CONCUR_READ_ONLY</code> or
          <code class="literal">ResultSet.CONCUR_UPDATABLE</code>.
        </p></li><li><p>
          Fixed <code class="literal">ResultSet.isLast()</code> for empty result
          sets (should return <code class="literal">false</code>).
        </p></li><li><p>
          <code class="literal">PreparedStatement</code> now honors stream lengths
          in setBinary/Ascii/Character Stream() unless you set the
          connection property
          <code class="literal">useStreamLengthsInPrepStmts</code> to
          <code class="literal">false</code>.
        </p></li><li><p>
          Removed some not-needed temporary object creation by smarter
          use of <code class="literal">Strings</code> in
          <code class="literal">EscapeProcessor</code>,
          <code class="literal">Connection</code> and
          <code class="literal">DatabaseMetaData</code> classes.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-1"></a>1.6.32. Changes in MySQL Connector/J 3.0.1-dev (21 September 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed <code class="literal">ResultSet.getRow()</code> off-by-one bug.
        </p></li><li><p>
          Fixed <code class="literal">RowDataStatic.getAt()</code> off-by-one bug.
        </p></li><li><p>
          Added limited <code class="literal">Clob</code> functionality
          (<code class="literal">ResultSet.getClob()</code>,
          <code class="literal">PreparedStatemtent.setClob()</code>,
          <code class="literal">PreparedStatement.setObject(Clob)</code>.
        </p></li><li><p>
          Added <code class="literal">socketTimeout</code> parameter to URL.
        </p></li><li><p>
          <code class="literal">Connection.isClosed()</code> no longer
          “<span class="quote">pings</span>” the server.
        </p></li><li><p>
          <code class="literal">Connection.close()</code> issues
          <code class="literal">rollback()</code> when
          <code class="literal">getAutoCommit()</code> is
          <code class="literal">false</code>.
        </p></li><li><p>
          Added <code class="literal">paranoid</code> parameter, which sanitizes
          error messages by removing “<span class="quote">sensitive</span>”
          information from them (such as hostnames, ports, or
          usernames), as well as clearing “<span class="quote">sensitive</span>” data
          structures when possible.
        </p></li><li><p>
          Fixed <code class="literal">ResultSetMetaData.isSigned()</code> for
          <code class="literal">TINYINT</code> and <code class="literal">BIGINT</code>.
        </p></li><li><p>
          Charsets now automatically detected. Optimized code for
          single-byte character set conversion.
        </p></li><li><p>
          Implemented <code class="literal">ResultSet.getCharacterStream()</code>.
        </p></li><li><p>
          Added <code class="literal">LOCAL TEMPORARY</code> to table types in
          <code class="literal">DatabaseMetaData.getTableTypes()</code>.
        </p></li><li><p>
          Massive code clean-up to follow Java coding conventions (the
          time had come).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-3-0-0"></a>1.6.33. Changes in MySQL Connector/J 3.0.0-dev (31 July 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>!!! LICENSE CHANGE !!!</strong></span> The
          driver is now GPL. If you need non-GPL licenses, please
          contact me <code class="literal">&lt;mark@mysql.com&gt;</code>.
        </p></li><li><p>
          JDBC-3.0 functionality including
          <code class="literal">Statement/PreparedStatement.getGeneratedKeys()</code>
          and <code class="literal">ResultSet.getURL()</code>.
        </p></li><li><p>
          Performance enchancements: Driver is now 50-100% faster in
          most situations, and creates fewer temporary objects.
        </p></li><li><p>
          Repackaging: New driver name is
          <code class="literal">com.mysql.jdbc.Driver</code>, old name still
          works, though (the driver is now provided by MySQL-AB).
        </p></li><li><p>
          Better checking for closed connections in
          <code class="literal">Statement</code> and
          <code class="literal">PreparedStatement</code>.
        </p></li><li><p>
          Support for streaming (row-by-row) result sets (see
          <code class="filename">README</code>) Thanks to Doron.
        </p></li><li><p>
          Support for large packets (new addition to MySQL-4.0
          protocol), see <code class="filename">README</code> for more
          information.
        </p></li><li><p>
          JDBC Compliance: Passes all tests besides stored procedure
          tests.
        </p></li><li><p>
          Fix and sort primary key names in
          <code class="literal">DBMetaData</code> (SF bugs 582086 and 582086).
        </p></li><li><p>
          Float types now reported as
          <code class="literal">java.sql.Types.FLOAT</code> (SF bug 579573).
        </p></li><li><p>
          <code class="literal">ResultSet.getTimestamp()</code> now works for
          <code class="literal">DATE</code> types (SF bug 559134).
        </p></li><li><p>
          <code class="literal">ResultSet.getDate/Time/Timestamp</code> now
          recognizes all forms of invalid values that have been set to
          all zeroes by MySQL (SF bug 586058).
        </p></li><li><p>
          Testsuite now uses Junit (which you can get from
          <a href="http://www.junit.org" target="_top">http://www.junit.org</a>.
        </p></li><li><p>
          The driver now only works with JDK-1.2 or newer.
        </p></li><li><p>
          Added multi-host failover support (see
          <code class="filename">README</code>).
        </p></li><li><p>
          General source-code cleanup.
        </p></li><li><p>
          Overall speed improvements via controlling transient object
          creation in <code class="literal">MysqlIO</code> class when reading
          packets.
        </p></li><li><p>
          Performance improvements in string handling and field metadata
          creation (lazily instantiated) contributed by Alex
          Twisleton-Wykeham-Fiennes.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-14"></a>1.6.34. Changes in MySQL Connector/J 2.0.14 (16 May 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          More code cleanup
        </p></li><li><p>
          PreparedStatement now releases resources on .close() (SF bug
          553268)
        </p></li><li><p>
          Quoted identifiers not used if server version does not support
          them. Also, if server started with --ansi or
          --sql-mode=ANSI_QUOTES then '"' will be used as an identifier
          quote, otherwise '`' will be used.
        </p></li><li><p>
          ResultSet.getDouble() now uses code built into JDK to be more
          precise (but slower)
        </p></li><li><p>
          LogicalHandle.isClosed() calls through to physical connection
        </p></li><li><p>
          Added SQL profiling (to STDERR). Set "profileSql=true" in your
          JDBC url. See README for more information.
        </p></li><li><p>
          Fixed typo for relaxAutoCommit parameter.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-13"></a>1.6.35. Changes in MySQL Connector/J 2.0.13 (24 April 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          More code cleanup.
        </p></li><li><p>
          Fixed unicode chars being read incorrectly (SF bug 541088)
        </p></li><li><p>
          Faster blob escaping for PrepStmt
        </p></li><li><p>
          Added set/getPortNumber() to DataSource(s) (SF bug 548167)
        </p></li><li><p>
          Added setURL() to MySQLXADataSource (SF bug 546019)
        </p></li><li><p>
          PreparedStatement.toString() fixed (SF bug 534026)
        </p></li><li><p>
          ResultSetMetaData.getColumnClassName() now implemented
        </p></li><li><p>
          Rudimentary version of Statement.getGeneratedKeys() from
          JDBC-3.0 now implemented (you need to be using JDK-1.4 for
          this to work, I believe)
        </p></li><li><p>
          DBMetaData.getIndexInfo() - bad PAGES fixed (SF BUG 542201)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-12"></a>1.6.36. Changes in MySQL Connector/J 2.0.12 (07 April 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          General code cleanup.
        </p></li><li><p>
          Added getIdleFor() method to Connection and
          MysqlLogicalHandle.
        </p></li><li><p>
          Relaxed synchronization in all classes, should fix 520615 and
          520393.
        </p></li><li><p>
          Added getTable/ColumnPrivileges() to DBMD (fixes 484502).
        </p></li><li><p>
          Added new types to getTypeInfo(), fixed existing types thanks
          to Al Davis and Kid Kalanon.
        </p></li><li><p>
          Added support for BIT types (51870) to PreparedStatement.
        </p></li><li><p>
          Fixed getRow() bug (527165) in ResultSet
        </p></li><li><p>
          Fixes for ResultSet updatability in PreparedStatement.
        </p></li><li><p>
          Fixed time zone off by 1-hour bug in PreparedStatement
          (538286, 528785).
        </p></li><li><p>
          ResultSet: Fixed updatability (values being set to null if not
          updated).
        </p></li><li><p>
          DataSources - fixed setUrl bug (511614, 525565), wrong
          datasource class name (532816, 528767)
        </p></li><li><p>
          Added identifier quoting to all DatabaseMetaData methods that
          need them (should fix 518108)
        </p></li><li><p>
          Added support for YEAR type (533556)
        </p></li><li><p>
          ResultSet.insertRow() should now detect auto_increment fields
          in most cases and use that value in the new row. This
          detection will not work in multi-valued keys, however, due to
          the fact that the MySQL protocol does not return this
          information.
        </p></li><li><p>
          ResultSet.refreshRow() implemented.
        </p></li><li><p>
          Fixed testsuite.Traversal afterLast() bug, thanks to Igor
          Lastric.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-11"></a>1.6.37. Changes in MySQL Connector/J 2.0.11 (27 January 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed missing DELETE_RULE value in
          DBMD.getImported/ExportedKeys() and getCrossReference().
        </p></li><li><p>
          Full synchronization of Statement.java.
        </p></li><li><p>
          More changes to fix "Unexpected end of input stream" errors
          when reading BLOBs. This should be the last fix.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-10"></a>1.6.38. Changes in MySQL Connector/J 2.0.10 (24 January 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed spurious "Unexpected end of input stream" errors in
          MysqlIO (bug 507456).
        </p></li><li><p>
          Fixed null-pointer-exceptions when using
          MysqlConnectionPoolDataSource with Websphere 4 (bug 505839).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-9"></a>1.6.39. Changes in MySQL Connector/J 2.0.9 (13 January 2002)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Ant build was corrupting included jar files, fixed (bug
          487669).
        </p></li><li><p>
          Fixed extra memory allocation in MysqlIO.readPacket() (bug
          488663).
        </p></li><li><p>
          Implementation of DatabaseMetaData.getExported/ImportedKeys()
          and getCrossReference().
        </p></li><li><p>
          Full synchronization on methods modifying instance and
          class-shared references, driver should be entirely thread-safe
          now (please let me know if you have problems)
        </p></li><li><p>
          DataSource implementations moved to
          org.gjt.mm.mysql.jdbc2.optional package, and (initial)
          implementations of PooledConnectionDataSource and XADataSource
          are in place (thanks to Todd Wolff for the implementation and
          testing of PooledConnectionDataSource with IBM WebSphere 4).
        </p></li><li><p>
          Added detection of network connection being closed when
          reading packets (thanks to Todd Lizambri).
        </p></li><li><p>
          Fixed quoting error with escape processor (bug 486265).
        </p></li><li><p>
          Report batch update support through DatabaseMetaData (bug
          495101).
        </p></li><li><p>
          Fixed off-by-one-hour error in
          PreparedStatement.setTimestamp() (bug 491577).
        </p></li><li><p>
          Removed concatenation support from driver (the '||' operator),
          as older versions of VisualAge seem to be the only thing that
          use it, and it conflicts with the logical '||' operator. You
          will need to start mysqld with the "--ansi" flag to use the
          '||' operator as concatenation (bug 491680)
        </p></li><li><p>
          Fixed casting bug in PreparedStatement (bug 488663).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-8"></a>1.6.40. Changes in MySQL Connector/J 2.0.8 (25 November 2001)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Batch updates now supported (thanks to some inspiration from
          Daniel Rall).
        </p></li><li><p>
          XADataSource/ConnectionPoolDataSource code (experimental)
        </p></li><li><p>
          PreparedStatement.setAnyNumericType() now handles positive
          exponents correctly (adds "+" so MySQL can understand it).
        </p></li><li><p>
          DatabaseMetaData.getPrimaryKeys() and getBestRowIdentifier()
          are now more robust in identifying primary keys (matches
          regardless of case or abbreviation/full spelling of Primary
          Key in Key_type column).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-7"></a>1.6.41. Changes in MySQL Connector/J 2.0.7 (24 October 2001)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          PreparedStatement.setCharacterStream() now implemented
        </p></li><li><p>
          Fixed dangling socket problem when in high availability
          (autoReconnect=true) mode, and finalizer for Connection will
          close any dangling sockets on GC.
        </p></li><li><p>
          Fixed ResultSetMetaData.getPrecision() returning one less than
          actual on newer versions of MySQL.
        </p></li><li><p>
          ResultSet.getBlob() now returns null if column value was null.
        </p></li><li><p>
          Character sets read from database if useUnicode=true and
          characterEncoding is not set. (thanks to Dmitry Vereshchagin)
        </p></li><li><p>
          Initial transaction isolation level read from database (if
          avaialable) (thanks to Dmitry Vereshchagin)
        </p></li><li><p>
          Fixed DatabaseMetaData.supportsTransactions(), and
          supportsTransactionIsolationLevel() and getTypeInfo()
          SQL_DATETIME_SUB and SQL_DATA_TYPE fields not being readable.
        </p></li><li><p>
          Fixed PreparedStatement generating SQL that would end up with
          syntax errors for some queries.
        </p></li><li><p>
          Fixed ResultSet.isAfterLast() always returning false.
        </p></li><li><p>
          Fixed time zone issue in PreparedStatement.setTimestamp()
          (thanks to Erik Olofsson)
        </p></li><li><p>
          Captialize type names when "captializeTypeNames=true" is
          passed in URL or properties (for WebObjects, thanks to Anjo
          Krank)
        </p></li><li><p>
          Updatable result sets now correctly handle NULL values in
          fields.
        </p></li><li><p>
          PreparedStatement.setDouble() now uses full-precision doubles
          (reverting a fix made earlier to truncate them).
        </p></li><li><p>
          PreparedStatement.setBoolean() will use 1/0 for values if your
          MySQL version is 3.21.23 or higher.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-6"></a>1.6.42. Changes in MySQL Connector/J 2.0.6 (16 June 2001)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed PreparedStatement parameter checking
        </p></li><li><p>
          Fixed case-sensitive column names in ResultSet.java
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-5"></a>1.6.43. Changes in MySQL Connector/J 2.0.5 (13 June 2001)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed ResultSet.getBlob() ArrayIndex out-of-bounds
        </p></li><li><p>
          Fixed ResultSetMetaData.getColumnTypeName for TEXT/BLOB
        </p></li><li><p>
          Fixed ArrayIndexOutOfBounds when sending large BLOB queries
          (Max size packet was not being set)
        </p></li><li><p>
          Added ISOLATION level support to
          Connection.setIsolationLevel()
        </p></li><li><p>
          Fixed NPE on PreparedStatement.executeUpdate() when all
          columns have not been set.
        </p></li><li><p>
          Fixed data parsing of TIMESTAMPs with 2-digit years
        </p></li><li><p>
          Added Byte to PreparedStatement.setObject()
        </p></li><li><p>
          ResultSet.getBoolean() now recognizes '-1' as
          <code class="literal">true</code>
        </p></li><li><p>
          ResultSet has +/-Inf/inf support
        </p></li><li><p>
          ResultSet.insertRow() works now, even if not all columns are
          set (they will be set to "NULL")
        </p></li><li><p>
          DataBaseMetaData.getCrossReference() no longer ArrayIndexOOB
        </p></li><li><p>
          getObject() on ResultSet correctly does TINYINT-&gt;Byte and
          SMALLINT-&gt;Short
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-3"></a>1.6.44. Changes in MySQL Connector/J 2.0.3 (03 December 2000)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Implemented getBigDecimal() without scale component for JDBC2.
        </p></li><li><p>
          Fixed composite key problem with updatable result sets.
        </p></li><li><p>
          Added detection of -/+INF for doubles.
        </p></li><li><p>
          Faster ASCII string operations.
        </p></li><li><p>
          Fixed incorrect detection of MAX_ALLOWED_PACKET, so sending
          large blobs should work now.
        </p></li><li><p>
          Fixed off-by-one error in java.sql.Blob implementation code.
        </p></li><li><p>
          Added "ultraDevHack" URL parameter, set to "true" to allow
          (broken) Macromedia UltraDev to use the driver.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0-1"></a>1.6.45. Changes in MySQL Connector/J 2.0.1 (06 April 2000)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed RSMD.isWritable() returning wrong value. Thanks to
          Moritz Maass.
        </p></li><li><p>
          Cleaned up exception handling when driver connects
        </p></li><li><p>
          Columns that are of type TEXT now return as Strings when you
          use getObject()
        </p></li><li><p>
          DatabaseMetaData.getPrimaryKeys() now works correctly wrt to
          key_seq. Thanks to Brian Slesinsky.
        </p></li><li><p>
          No escape processing is done on PreparedStatements anymore per
          JDBC spec.
        </p></li><li><p>
          Fixed many JDBC-2.0 traversal, positioning bugs, especially
          wrt to empty result sets. Thanks to Ron Smits, Nick Brook,
          Cessar Garcia and Carlos Martinez.
        </p></li><li><p>
          Fixed some issues with updatability support in ResultSet when
          using multiple primary keys.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre5"></a>1.6.46. Changes in MySQL Connector/J 2.0.0pre5 (21 February 2000)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed Bad Handshake problem.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre4"></a>1.6.47. Changes in MySQL Connector/J 2.0.0pre4 (10 January 2000)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixes to ResultSet for insertRow() - Thanks to Cesar Garcia
        </p></li><li><p>
          Fix to Driver to recognize JDBC-2.0 by loading a JDBC-2.0
          class, instead of relying on JDK version numbers. Thanks to
          John Baker.
        </p></li><li><p>
          Fixed ResultSet to return correct row numbers
        </p></li><li><p>
          Statement.getUpdateCount() now returns rows matched, instead
          of rows actually updated, which is more SQL-92 like.
        </p></li></ul></div><p>
      10-29-99
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Statement/PreparedStatement.getMoreResults() bug fixed. Thanks
          to Noel J. Bergman.
        </p></li><li><p>
          Added Short as a type to PreparedStatement.setObject(). Thanks
          to Jeff Crowder
        </p></li><li><p>
          Driver now automagically configures maximum/preferred packet
          sizes by querying server.
        </p></li><li><p>
          Autoreconnect code uses fast ping command if server supports
          it.
        </p></li><li><p>
          Fixed various bugs wrt. to packet sizing when reading from the
          server and when alloc'ing to write to the server.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-2-0pre"></a>1.6.48. Changes in MySQL Connector/J 2.0.0pre (17 August 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Now compiles under JDK-1.2. The driver supports both JDK-1.1
          and JDK-1.2 at the same time through a core set of classes.
          The driver will load the appropriate interface classes at
          runtime by figuring out which JVM version you are using.
        </p></li><li><p>
          Fixes for result sets with all nulls in the first row.
          (Pointed out by Tim Endres)
        </p></li><li><p>
          Fixes to column numbers in SQLExceptions in ResultSet (Thanks
          to Blas Rodriguez Somoza)
        </p></li><li><p>
          The database no longer needs to specified to connect. (Thanks
          to Christian Motschke)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-2b"></a>1.6.49. Changes in MySQL Connector/J 1.2b (04 July 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Better Documentation (in progress), in doc/mm.doc/book1.html
        </p></li><li><p>
          DBMD now allows null for a column name pattern (not in spec),
          which it changes to '%'.
        </p></li><li><p>
          DBMD now has correct types/lengths for getXXX().
        </p></li><li><p>
          ResultSet.getDate(), getTime(), and getTimestamp() fixes.
          (contributed by Alan Wilken)
        </p></li><li><p>
          EscapeProcessor now handles \{ \} and { or } inside quotes
          correctly. (thanks to Alik for some ideas on how to fix it)
        </p></li><li><p>
          Fixes to properties handling in Connection. (contributed by
          Juho Tikkala)
        </p></li><li><p>
          ResultSet.getObject() now returns null for NULL columns in the
          table, rather than bombing out. (thanks to Ben Grosman)
        </p></li><li><p>
          ResultSet.getObject() now returns Strings for types from MySQL
          that it doesn't know about. (Suggested by Chris Perdue)
        </p></li><li><p>
          Removed DataInput/Output streams, not needed, 1/2 number of
          method calls per IO operation.
        </p></li><li><p>
          Use default character encoding if one is not specified. This
          is a work-around for broken JVMs, because according to spec,
          EVERY JVM must support "ISO8859_1", but they don't.
        </p></li><li><p>
          Fixed Connection to use the platform character encoding
          instead of "ISO8859_1" if one isn't explicitly set. This fixes
          problems people were having loading the character- converter
          classes that didn't always exist (JVM bug). (thanks to Fritz
          Elfert for pointing out this problem)
        </p></li><li><p>
          Changed MysqlIO to re-use packets where possible to reduce
          memory usage.
        </p></li><li><p>
          Fixed escape-processor bugs pertaining to {} inside quotes.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-2a"></a>1.6.50. Changes in MySQL Connector/J 1.2a (14 April 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed character-set support for non-Javasoft JVMs (thanks to
          many people for pointing it out)
        </p></li><li><p>
          Fixed ResultSet.getBoolean() to recognize 'y' &amp; 'n' as
          well as '1' &amp; '0' as boolean flags. (thanks to Tim Pizey)
        </p></li><li><p>
          Fixed ResultSet.getTimestamp() to give better performance.
          (thanks to Richard Swift)
        </p></li><li><p>
          Fixed getByte() for numeric types. (thanks to Ray Bellis)
        </p></li><li><p>
          Fixed DatabaseMetaData.getTypeInfo() for DATE type. (thanks to
          Paul Johnston)
        </p></li><li><p>
          Fixed EscapeProcessor for "fn" calls. (thanks to Piyush Shah
          at locomotive.org)
        </p></li><li><p>
          Fixed EscapeProcessor to not do extraneous work if there are
          no escape codes. (thanks to Ryan Gustafson)
        </p></li><li><p>
          Fixed Driver to parse URLs of the form
          "jdbc:mysql://host:port" (thanks to Richard Lobb)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1i"></a>1.6.51. Changes in MySQL Connector/J 1.1i (24 March 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed Timestamps for PreparedStatements
        </p></li><li><p>
          Fixed null pointer exceptions in RSMD and RS
        </p></li><li><p>
          Re-compiled with jikes for valid class files (thanks ms!)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1h"></a>1.6.52. Changes in MySQL Connector/J 1.1h (08 March 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed escape processor to deal with unmatched { and } (thanks
          to Craig Coles)
        </p></li><li><p>
          Fixed escape processor to create more portable (between
          DATETIME and TIMESTAMP types) representations so that it will
          work with BETWEEN clauses. (thanks to Craig Longman)
        </p></li><li><p>
          MysqlIO.quit() now closes the socket connection. Before, after
          many failed connections some OS's would run out of file
          descriptors. (thanks to Michael Brinkman)
        </p></li><li><p>
          Fixed NullPointerException in Driver.getPropertyInfo. (thanks
          to Dave Potts)
        </p></li><li><p>
          Fixes to MysqlDefs to allow all *text fields to be retrieved
          as Strings. (thanks to Chris at Leverage)
        </p></li><li><p>
          Fixed setDouble in PreparedStatement for large numbers to
          avoid sending scientific notation to the database. (thanks to
          J.S. Ferguson)
        </p></li><li><p>
          Fixed getScale() and getPrecision() in RSMD. (contrib'd by
          James Klicman)
        </p></li><li><p>
          Fixed getObject() when field was DECIMAL or NUMERIC (thanks to
          Bert Hobbs)
        </p></li><li><p>
          DBMD.getTables() bombed when passed a null table-name pattern.
          Fixed. (thanks to Richard Lobb)
        </p></li><li><p>
          Added check for "client not authorized" errors during connect.
          (thanks to Hannes Wallnoefer)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1g"></a>1.6.53. Changes in MySQL Connector/J 1.1g (19 February 1999)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Result set rows are now byte arrays. Blobs and Unicode work
          bidriectonally now. The useUnicode and encoding options are
          implemented now.
        </p></li><li><p>
          Fixes to PreparedStatement to send binary set by setXXXStream
          to be sent untouched to the MySQL server.
        </p></li><li><p>
          Fixes to getDriverPropertyInfo().
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1f"></a>1.6.54. Changes in MySQL Connector/J 1.1f (31 December 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Changed all ResultSet fields to Strings, this should allow
          Unicode to work, but your JVM must be able to convert between
          the character sets. This should also make reading data from
          the server be a bit quicker, because there is now no
          conversion from StringBuffer to String.
        </p></li><li><p>
          Changed PreparedStatement.streamToString() to be more
          efficient (code from Uwe Schaefer).
        </p></li><li><p>
          URL parsing is more robust (throws SQL exceptions on errors
          rather than NullPointerExceptions)
        </p></li><li><p>
          PreparedStatement now can convert Strings to Time/Date values
          via setObject() (code from Robert Currey).
        </p></li><li><p>
          IO no longer hangs in Buffer.readInt(), that bug was
          introduced in 1.1d when changing to all byte-arrays for result
          sets. (Pointed out by Samo Login)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1b"></a>1.6.55. Changes in MySQL Connector/J 1.1b (03 November 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixes to DatabaseMetaData to allow both IBM VA and J-Builder
          to work. Let me know how it goes. (thanks to Jac Kersing)
        </p></li><li><p>
          Fix to ResultSet.getBoolean() for NULL strings (thanks to
          Barry Lagerweij)
        </p></li><li><p>
          Beginning of code cleanup, and formatting. Getting ready to
          branch this off to a parallel JDBC-2.0 source tree.
        </p></li><li><p>
          Added "final" modifier to critical sections in MysqlIO and
          Buffer to allow compiler to inline methods for speed.
        </p></li></ul></div><p>
      9-29-98
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If object references passed to setXXX() in PreparedStatement
          are null, setNull() is automatically called for you. (Thanks
          for the suggestion goes to Erik Ostrom)
        </p></li><li><p>
          setObject() in PreparedStatement will now attempt to write a
          serialized representation of the object to the database for
          objects of Types.OTHER and objects of unknown type.
        </p></li><li><p>
          Util now has a static method readObject() which given a
          ResultSet and a column index will re-instantiate an object
          serialized in the above manner.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-1"></a>1.6.56. Changes in MySQL Connector/J 1.1 (02 September 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Got rid of "ugly hack" in MysqlIO.nextRow(). Rather than catch
          an exception, Buffer.isLastDataPacket() was fixed.
        </p></li><li><p>
          Connection.getCatalog() and Connection.setCatalog() should
          work now.
        </p></li><li><p>
          Statement.setMaxRows() works, as well as setting by property
          maxRows. Statement.setMaxRows() overrides maxRows set via
          properties or url parameters.
        </p></li><li><p>
          Automatic re-connection is available. Because it has to "ping"
          the database before each query, it is turned off by default.
          To use it, pass in "autoReconnect=true" in the connection URL.
          You may also change the number of reconnect tries, and the
          initial timeout value via "maxReconnects=n" (default 3) and
          "initialTimeout=n" (seconds, default 2) parameters. The
          timeout is an exponential backoff type of timeout; for
          example, if you have initial timeout of 2 seconds, and
          maxReconnects of 3, then the driver will timeout 2 seconds, 4
          seconds, then 16 seconds between each re-connection attempt.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-1-0"></a>1.6.57. Changes in MySQL Connector/J 1.0 (24 August 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed handling of blob data in Buffer.java
        </p></li><li><p>
          Fixed bug with authentication packet being sized too small.
        </p></li><li><p>
          The JDBC Driver is now under the LPGL
        </p></li></ul></div><p>
      8-14-98
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed Buffer.readLenString() to correctly read data for BLOBS.
        </p></li><li><p>
          Fixed PreparedStatement.stringToStream to correctly read data
          for BLOBS.
        </p></li><li><p>
          Fixed PreparedStatement.setDate() to not add a day. (above
          fixes thanks to Vincent Partington)
        </p></li><li><p>
          Added URL parameter parsing (?user=... and so forth).
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-9d"></a>1.6.58. Changes in MySQL Connector/J 0.9d (04 August 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Big news! New package name. Tim Endres from ICE Engineering is
          starting a new source tree for GNU GPL'd Java software. He's
          graciously given me the org.gjt.mm package directory to use,
          so now the driver is in the org.gjt.mm.mysql package scheme.
          I'm "legal" now. Look for more information on Tim's project
          soon.
        </p></li><li><p>
          Now using dynamically sized packets to reduce memory usage
          when sending commands to the DB.
        </p></li><li><p>
          Small fixes to getTypeInfo() for parameters, and so forth.
        </p></li><li><p>
          DatabaseMetaData is now fully implemented. Let me know if
          these drivers work with the various IDEs out there. I've heard
          that they're working with JBuilder right now.
        </p></li><li><p>
          Added JavaDoc documentation to the package.
        </p></li><li><p>
          Package now available in .zip or .tar.gz.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-9"></a>1.6.59. Changes in MySQL Connector/J 0.9 (28 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Implemented getTypeInfo(). Connection.rollback() now throws an
          SQLException per the JDBC spec.
        </p></li><li><p>
          Added PreparedStatement that supports all JDBC API methods for
          PreparedStatement including InputStreams. Please check this
          out and let me know if anything is broken.
        </p></li><li><p>
          Fixed a bug in ResultSet that would break some queries that
          only returned 1 row.
        </p></li><li><p>
          Fixed bugs in DatabaseMetaData.getTables(),
          DatabaseMetaData.getColumns() and
          DatabaseMetaData.getCatalogs().
        </p></li><li><p>
          Added functionality to Statement that allows executeUpdate()
          to store values for IDs that are automatically generated for
          AUTO_INCREMENT fields. Basically, after an executeUpdate(),
          look at the SQLWarnings for warnings like "LAST_INSERTED_ID =
          'some number', COMMAND = 'your SQL query'". If you are using
          AUTO_INCREMENT fields in your tables and are executing a lot
          of executeUpdate()s on one Statement, be sure to
          clearWarnings() every so often to save memory.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-8"></a>1.6.60. Changes in MySQL Connector/J 0.8 (06 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Split MysqlIO and Buffer to separate classes. Some
          ClassLoaders gave an IllegalAccess error for some fields in
          those two classes. Now mm.mysql works in applets and all
          classloaders. Thanks to Joe Ennis &lt;jce@mail.boone.com&gt;
          for pointing out the problem and working on a fix with me.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-7"></a>1.6.61. Changes in MySQL Connector/J 0.7 (01 July 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed DatabaseMetadata problems in getColumns() and bug in
          switch statement in the Field constructor. Thanks to Costin
          Manolache &lt;costin@tdiinc.com&gt; for pointing these out.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cj-news-0-6"></a>1.6.62. Changes in MySQL Connector/J 0.6 (21 May 1998)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
          Incorporated efficiency changes from Richard Swift
          &lt;Richard.Swift@kanatek.ca&gt; in
          <code class="literal">MysqlIO.java</code> and
          <code class="literal">ResultSet.java</code>:
        </p></li><li><p>
          We're now 15% faster than gwe's driver.
        </p></li><li><p>
          Started working on <code class="literal">DatabaseMetaData</code>.
        </p></li><li><p>
          The following methods are implemented:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">getTables()</code>
            </p></li><li><p>
              <code class="literal">getTableTypes()</code>
            </p></li><li><p>
              <code class="literal">getColumns</code>
            </p></li><li><p>
              <code class="literal">getCatalogs()</code>
            </p></li></ul></div></li></ul></div></div></div></div></body></html>
